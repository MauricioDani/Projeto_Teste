/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { EventEmitter, Input, Output } from '@angular/core';
import { browserLanguage, thfLocaleDefault, convertToBoolean } from '../../utils/util';
/** @type {?} */
export const thfListViewLiteralsDefault = {
    en: (/** @type {?} */ ({
        hideDetails: 'Hide details',
        loadMoreData: 'Load more data',
        noData: 'No data found',
        selectAll: 'Select all',
        showDetails: 'Show details'
    })),
    es: (/** @type {?} */ ({
        hideDetails: 'Ocultar detalles',
        loadMoreData: 'Cargar más resultados',
        noData: 'Datos no encontrados',
        selectAll: 'Seleccionar todos',
        showDetails: 'Mostrar detalles'
    })),
    pt: (/** @type {?} */ ({
        hideDetails: 'Ocultar detalhes',
        loadMoreData: 'Carregar mais resultados',
        noData: 'Nenhum dado encontrado',
        selectAll: 'Selecionar todos',
        showDetails: 'Exibir detalhes'
    }))
};
/**
 * \@description
 *
 * Componente de lista que recebe um array de objetos e renderiza de forma dinâmica os dados de
 * acordo com a necessidade de cada tela e deve ser utilizado em conjunto com as diretivas de *templates*
 *  **[t-list-view-content-template](/documentation/thf-list-view-content-template)** e
 * **[t-list-view-detail-template](/documentation/thf-list-view-detail-template)**.
 *
 * O componente disponibiliza uma área específica para exibição informações adicionais,
 * através da diretiva **[t-list-view-detail-template](/documentation/thf-list-view-detail-template)**.
 */
export class ThfListViewBaseComponent {
    constructor() {
        this.selectAll = false;
        this.showHeader = false;
        /**
         * Recebe uma ação, que será executada quando clicar no botão "Carregar mais resultados".
         *
         * > Caso nenhuma ação for definida o mesmo não ficará visível.
         */
        this.showMore = new EventEmitter();
        /**
         * Ação que será executada ao clicar no título.
         *
         * Ao ser disparado, o método inserido na ação irá receber como parâmetro o item da lista clicado.
         */
        this.titleAction = new EventEmitter();
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Lista de ações que serão exibidas no componente.
     * @param {?} value
     * @return {?}
     */
    set actions(value) {
        this._actions = Array.isArray(value) ? value : [];
    }
    /**
     * @return {?}
     */
    get actions() {
        return this._actions;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Define a altura do `thf-list-view` em *pixels*.
     * @param {?} height
     * @return {?}
     */
    set height(height) {
        this._height = height;
    }
    /**
     * @return {?}
     */
    get height() {
        return this._height;
    }
    /**
     * \@description
     *
     * Esconde o *checkbox* para seleção de todos os itens.
     *
     * \@default `false`
     * @param {?} hideSelectAll
     * @return {?}
     */
    set hideSelectAll(hideSelectAll) {
        this._hideSelectAll = convertToBoolean(hideSelectAll);
        this.showMainHeader();
    }
    /**
     * @return {?}
     */
    get hideSelectAll() {
        return this._hideSelectAll;
    }
    /**
     * Lista de itens que serão exibidos no componente.
     * @param {?} value
     * @return {?}
     */
    set items(value) {
        this._items = Array.isArray(value) ? value : [];
    }
    /**
     * @return {?}
     */
    get items() {
        return this._items;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Objeto com as literais usadas no `thf-list-view`.
     *
     * Existem duas maneiras de customizar o componente, passando um objeto com todas as literais disponíveis:
     *
     * ```
     *  const customLiterals: ThfListViewLiterals = {
     *    hideDetail: 'Ocultar detalhes completamente',
     *    loadMoreData: 'Mais dados',
     *    showDetail: 'Mostrar mais detalhes',
     *    selectAll: 'Selecionar todos os itens'
     *  };
     * ```
     *
     * Ou passando apenas as literais que deseja customizar:
     *
     * ```
     *  const customLiterals: ThfListViewLiterals = {
     *    showDetail: 'Mostrar mais detalhes'
     *  };
     * ```
     *
     * E para carregar as literais customizadas, basta apenas passar o objeto para o componente.
     *
     * ```
     * <thf-list-view
     *   [t-literals]="customLiterals">
     * </thf-list-view>
     * ```
     *
     * > O objeto padrão de literais será traduzido de acordo com o idioma do browser (pt, en, es).
     * @param {?} value
     * @return {?}
     */
    set literals(value) {
        if (value instanceof Object && !(value instanceof Array)) {
            this._literals = Object.assign({}, thfListViewLiteralsDefault[thfLocaleDefault], thfListViewLiteralsDefault[browserLanguage()], value);
        }
        else {
            this._literals = thfListViewLiteralsDefault[browserLanguage()];
        }
    }
    /**
     * @return {?}
     */
    get literals() {
        return this._literals || thfListViewLiteralsDefault[browserLanguage()];
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Habilita um *checkbox* para cada item da lista. Todos os items possuem a propriedade dinâmica `$selected` para identificar se o
     * item está selecionado, por exemplo:
     *
     * ```
     *  item.$selected
     *
     *  // ou
     *
     *  item['$selected']
     * ```
     *
     * \@default `false`
     * @param {?} select
     * @return {?}
     */
    set select(select) {
        this._select = convertToBoolean(select);
        this.showMainHeader();
    }
    /**
     * @return {?}
     */
    get select() {
        return this._select;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Indica que o botão `Carregar Mais Resultados` será desabilitado.
     * @param {?} value
     * @return {?}
     */
    set showMoreDisabled(value) {
        this._showMoreDisabled = convertToBoolean(value);
    }
    /**
     * @return {?}
     */
    get showMoreDisabled() {
        return this._showMoreDisabled;
    }
    /**
     * @param {?} listViewAction
     * @param {?} item
     * @return {?}
     */
    onClickAction(listViewAction, item) {
        /** @type {?} */
        const cleanItem = this.deleteInternalAttrs(item);
        if (listViewAction.action) {
            listViewAction.action(cleanItem);
        }
    }
    /**
     * @return {?}
     */
    onShowMore() {
        this.showMore.emit();
    }
    /**
     * @param {?} listItem
     * @return {?}
     */
    runTitleAction(listItem) {
        /** @type {?} */
        const itemWithPublicProperties = this.deleteInternalAttrs(listItem);
        this.titleAction.emit(itemWithPublicProperties);
    }
    /**
     * @return {?}
     */
    selectAllListItems() {
        if (!this.hideSelectAll) {
            this.selectAll = !this.selectAll;
            this.items.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                item.$selected = this.selectAll;
            }));
        }
    }
    /**
     * @param {?} row
     * @return {?}
     */
    selectListItem(row) {
        row.$selected = !row.$selected;
        this.selectAll = this.checkIfItemsAreSelected(this.items);
    }
    /**
     * @private
     * @param {?} item
     * @return {?}
     */
    deleteInternalAttrs(item) {
        /** @type {?} */
        const itemCopy = item ? Object.assign({}, item) : undefined;
        for (const key in itemCopy) {
            if (itemCopy.hasOwnProperty(key) && key.startsWith('$')) {
                delete itemCopy[key];
            }
        }
        return itemCopy;
    }
    /**
     * @private
     * @param {?} items
     * @return {?}
     */
    checkIfItemsAreSelected(items) {
        /** @type {?} */
        const someCheckedOrIndeterminate = (/**
         * @param {?} item
         * @return {?}
         */
        item => item.$selected || item.$selected === null);
        /** @type {?} */
        const everyChecked = (/**
         * @param {?} item
         * @return {?}
         */
        item => item.$selected);
        if (items.every(everyChecked)) {
            return true;
        }
        if (items.some(someCheckedOrIndeterminate)) {
            return null;
        }
        return false;
    }
    /**
     * @private
     * @return {?}
     */
    showMainHeader() {
        this.showHeader = !!(this.select && !this.hideSelectAll && this.items && this.items.length);
    }
}
ThfListViewBaseComponent.propDecorators = {
    actions: [{ type: Input, args: ['t-actions',] }],
    height: [{ type: Input, args: ['t-height',] }],
    hideSelectAll: [{ type: Input, args: ['t-hide-select-all',] }],
    items: [{ type: Input, args: ['t-items',] }],
    literals: [{ type: Input, args: ['t-literals',] }],
    propertyLink: [{ type: Input, args: ['t-property-link',] }],
    propertyTitle: [{ type: Input, args: ['t-property-title',] }],
    select: [{ type: Input, args: ['t-select',] }],
    showMoreDisabled: [{ type: Input, args: ['t-show-more-disabled',] }],
    showMore: [{ type: Output, args: ['t-show-more',] }],
    titleAction: [{ type: Output, args: ['t-title-action',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    ThfListViewBaseComponent.prototype._actions;
    /**
     * @type {?}
     * @private
     */
    ThfListViewBaseComponent.prototype._height;
    /**
     * @type {?}
     * @private
     */
    ThfListViewBaseComponent.prototype._hideSelectAll;
    /**
     * @type {?}
     * @private
     */
    ThfListViewBaseComponent.prototype._items;
    /**
     * @type {?}
     * @private
     */
    ThfListViewBaseComponent.prototype._literals;
    /**
     * @type {?}
     * @private
     */
    ThfListViewBaseComponent.prototype._select;
    /**
     * @type {?}
     * @private
     */
    ThfListViewBaseComponent.prototype._showMoreDisabled;
    /** @type {?} */
    ThfListViewBaseComponent.prototype.popupTarget;
    /** @type {?} */
    ThfListViewBaseComponent.prototype.selectAll;
    /** @type {?} */
    ThfListViewBaseComponent.prototype.showHeader;
    /**
     * Recebe uma propriedade que será utilizada para recuperar o valor do objeto que será usado como link para o título.
     * @type {?}
     */
    ThfListViewBaseComponent.prototype.propertyLink;
    /**
     * Recebe uma propriedade que será utilizada para recuperar o valor do objeto que será exibido como o título de cada item.
     * @type {?}
     */
    ThfListViewBaseComponent.prototype.propertyTitle;
    /**
     * Recebe uma ação, que será executada quando clicar no botão "Carregar mais resultados".
     *
     * > Caso nenhuma ação for definida o mesmo não ficará visível.
     * @type {?}
     */
    ThfListViewBaseComponent.prototype.showMore;
    /**
     * Ação que será executada ao clicar no título.
     *
     * Ao ser disparado, o método inserido na ação irá receber como parâmetro o item da lista clicado.
     * @type {?}
     */
    ThfListViewBaseComponent.prototype.titleAction;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLWxpc3Qtdmlldy1iYXNlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0b3R2cy90aGYtdWkvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy90aGYtbGlzdC12aWV3L3RoZi1saXN0LXZpZXctYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUU1RCxPQUFPLEVBQUUsZUFBZSxFQUFFLGdCQUFnQixFQUFFLGdCQUFnQixFQUFFLE1BQU0sa0JBQWtCLENBQUM7O0FBS3ZGLE1BQU0sT0FBTywwQkFBMEIsR0FBRztJQUN4QyxFQUFFLEVBQUUsbUJBQXNCO1FBQ3hCLFdBQVcsRUFBRSxjQUFjO1FBQzNCLFlBQVksRUFBRSxnQkFBZ0I7UUFDOUIsTUFBTSxFQUFFLGVBQWU7UUFDdkIsU0FBUyxFQUFFLFlBQVk7UUFDdkIsV0FBVyxFQUFFLGNBQWM7S0FDNUIsRUFBQTtJQUNELEVBQUUsRUFBRSxtQkFBc0I7UUFDeEIsV0FBVyxFQUFFLGtCQUFrQjtRQUMvQixZQUFZLEVBQUUsdUJBQXVCO1FBQ3JDLE1BQU0sRUFBRSxzQkFBc0I7UUFDOUIsU0FBUyxFQUFFLG1CQUFtQjtRQUM5QixXQUFXLEVBQUUsa0JBQWtCO0tBQ2hDLEVBQUE7SUFDRCxFQUFFLEVBQUUsbUJBQXNCO1FBQ3hCLFdBQVcsRUFBRSxrQkFBa0I7UUFDL0IsWUFBWSxFQUFFLDBCQUEwQjtRQUN4QyxNQUFNLEVBQUUsd0JBQXdCO1FBQ2hDLFNBQVMsRUFBRSxrQkFBa0I7UUFDN0IsV0FBVyxFQUFFLGlCQUFpQjtLQUMvQixFQUFBO0NBQ0Y7Ozs7Ozs7Ozs7OztBQWFELE1BQU0sT0FBTyx3QkFBd0I7SUFBckM7UUFXRSxjQUFTLEdBQVksS0FBSyxDQUFDO1FBQzNCLGVBQVUsR0FBWSxLQUFLLENBQUM7Ozs7OztRQWtLTCxhQUFRLEdBQXVC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Ozs7O0lBOEc1QixnREFBZ0Q7Ozs7O0lBR2hELGlEQUFrRDs7Ozs7OztJQWlEbEQsNENBQThFOzs7Ozs7O0lBTzlFLCtDQUFvRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBicm93c2VyTGFuZ3VhZ2UsIHRoZkxvY2FsZURlZmF1bHQsIGNvbnZlcnRUb0Jvb2xlYW4gfSBmcm9tICcuLi8uLi91dGlscy91dGlsJztcblxuaW1wb3J0IHsgVGhmTGlzdFZpZXdBY3Rpb24gfSBmcm9tICcuL2ludGVyZmFjZXMvdGhmLWxpc3Qtdmlldy1hY3Rpb24uaW50ZXJmYWNlJztcbmltcG9ydCB7IFRoZkxpc3RWaWV3TGl0ZXJhbHMgfSBmcm9tICcuL2ludGVyZmFjZXMvdGhmLWxpc3Qtdmlldy1saXRlcmFscy5pbnRlcmZhY2UnO1xuXG5leHBvcnQgY29uc3QgdGhmTGlzdFZpZXdMaXRlcmFsc0RlZmF1bHQgPSB7XG4gIGVuOiA8VGhmTGlzdFZpZXdMaXRlcmFscz4ge1xuICAgIGhpZGVEZXRhaWxzOiAnSGlkZSBkZXRhaWxzJyxcbiAgICBsb2FkTW9yZURhdGE6ICdMb2FkIG1vcmUgZGF0YScsXG4gICAgbm9EYXRhOiAnTm8gZGF0YSBmb3VuZCcsXG4gICAgc2VsZWN0QWxsOiAnU2VsZWN0IGFsbCcsXG4gICAgc2hvd0RldGFpbHM6ICdTaG93IGRldGFpbHMnXG4gIH0sXG4gIGVzOiA8VGhmTGlzdFZpZXdMaXRlcmFscz4ge1xuICAgIGhpZGVEZXRhaWxzOiAnT2N1bHRhciBkZXRhbGxlcycsXG4gICAgbG9hZE1vcmVEYXRhOiAnQ2FyZ2FyIG3DoXMgcmVzdWx0YWRvcycsXG4gICAgbm9EYXRhOiAnRGF0b3Mgbm8gZW5jb250cmFkb3MnLFxuICAgIHNlbGVjdEFsbDogJ1NlbGVjY2lvbmFyIHRvZG9zJyxcbiAgICBzaG93RGV0YWlsczogJ01vc3RyYXIgZGV0YWxsZXMnXG4gIH0sXG4gIHB0OiA8VGhmTGlzdFZpZXdMaXRlcmFscz4ge1xuICAgIGhpZGVEZXRhaWxzOiAnT2N1bHRhciBkZXRhbGhlcycsXG4gICAgbG9hZE1vcmVEYXRhOiAnQ2FycmVnYXIgbWFpcyByZXN1bHRhZG9zJyxcbiAgICBub0RhdGE6ICdOZW5odW0gZGFkbyBlbmNvbnRyYWRvJyxcbiAgICBzZWxlY3RBbGw6ICdTZWxlY2lvbmFyIHRvZG9zJyxcbiAgICBzaG93RGV0YWlsczogJ0V4aWJpciBkZXRhbGhlcydcbiAgfVxufTtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBDb21wb25lbnRlIGRlIGxpc3RhIHF1ZSByZWNlYmUgdW0gYXJyYXkgZGUgb2JqZXRvcyBlIHJlbmRlcml6YSBkZSBmb3JtYSBkaW7Dom1pY2Egb3MgZGFkb3MgZGVcbiAqIGFjb3JkbyBjb20gYSBuZWNlc3NpZGFkZSBkZSBjYWRhIHRlbGEgZSBkZXZlIHNlciB1dGlsaXphZG8gZW0gY29uanVudG8gY29tIGFzIGRpcmV0aXZhcyBkZSAqdGVtcGxhdGVzKlxuICogICoqW3QtbGlzdC12aWV3LWNvbnRlbnQtdGVtcGxhdGVdKC9kb2N1bWVudGF0aW9uL3RoZi1saXN0LXZpZXctY29udGVudC10ZW1wbGF0ZSkqKiBlXG4gKiAqKlt0LWxpc3Qtdmlldy1kZXRhaWwtdGVtcGxhdGVdKC9kb2N1bWVudGF0aW9uL3RoZi1saXN0LXZpZXctZGV0YWlsLXRlbXBsYXRlKSoqLlxuICpcbiAqIE8gY29tcG9uZW50ZSBkaXNwb25pYmlsaXphIHVtYSDDoXJlYSBlc3BlY8OtZmljYSBwYXJhIGV4aWJpw6fDo28gaW5mb3JtYcOnw7VlcyBhZGljaW9uYWlzLFxuICogYXRyYXbDqXMgZGEgZGlyZXRpdmEgKipbdC1saXN0LXZpZXctZGV0YWlsLXRlbXBsYXRlXSgvZG9jdW1lbnRhdGlvbi90aGYtbGlzdC12aWV3LWRldGFpbC10ZW1wbGF0ZSkqKi5cbiAqL1xuZXhwb3J0IGNsYXNzIFRoZkxpc3RWaWV3QmFzZUNvbXBvbmVudCB7XG5cbiAgcHJpdmF0ZSBfYWN0aW9uczogQXJyYXk8VGhmTGlzdFZpZXdBY3Rpb24+O1xuICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlcjtcbiAgcHJpdmF0ZSBfaGlkZVNlbGVjdEFsbDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfaXRlbXM6IEFycmF5PGFueT47XG4gIHByaXZhdGUgX2xpdGVyYWxzOiBUaGZMaXN0Vmlld0xpdGVyYWxzO1xuICBwcml2YXRlIF9zZWxlY3Q6IGJvb2xlYW47XG4gIHByaXZhdGUgX3Nob3dNb3JlRGlzYWJsZWQ6IGJvb2xlYW47XG5cbiAgcG9wdXBUYXJnZXQ6IGFueTtcbiAgc2VsZWN0QWxsOiBib29sZWFuID0gZmFsc2U7XG4gIHNob3dIZWFkZXI6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBMaXN0YSBkZSBhw6fDtWVzIHF1ZSBzZXLDo28gZXhpYmlkYXMgbm8gY29tcG9uZW50ZS5cbiAgICovXG4gIEBJbnB1dCgndC1hY3Rpb25zJykgc2V0IGFjdGlvbnModmFsdWU6IEFycmF5PFRoZkxpc3RWaWV3QWN0aW9uPikge1xuICAgIHRoaXMuX2FjdGlvbnMgPSBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW107XG4gIH1cblxuICBnZXQgYWN0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluZSBhIGFsdHVyYSBkbyBgdGhmLWxpc3Qtdmlld2AgZW0gKnBpeGVscyouXG4gICAqL1xuICBASW5wdXQoJ3QtaGVpZ2h0Jykgc2V0IGhlaWdodChoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgfVxuXG4gIGdldCBoZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRXNjb25kZSBvICpjaGVja2JveCogcGFyYSBzZWxlw6fDo28gZGUgdG9kb3Mgb3MgaXRlbnMuXG4gICAqXG4gICAqIEBkZWZhdWx0IGBmYWxzZWBcbiAgICovXG4gIEBJbnB1dCgndC1oaWRlLXNlbGVjdC1hbGwnKSBzZXQgaGlkZVNlbGVjdEFsbChoaWRlU2VsZWN0QWxsOiBib29sZWFuKSB7XG4gICAgdGhpcy5faGlkZVNlbGVjdEFsbCA9IGNvbnZlcnRUb0Jvb2xlYW4oaGlkZVNlbGVjdEFsbCk7XG4gICAgdGhpcy5zaG93TWFpbkhlYWRlcigpO1xuICB9XG5cbiAgZ2V0IGhpZGVTZWxlY3RBbGwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hpZGVTZWxlY3RBbGw7XG4gIH1cblxuICAvKiogTGlzdGEgZGUgaXRlbnMgcXVlIHNlcsOjbyBleGliaWRvcyBubyBjb21wb25lbnRlLiAqL1xuICBASW5wdXQoJ3QtaXRlbXMnKSBzZXQgaXRlbXModmFsdWU6IEFycmF5PGFueT4pIHtcbiAgICB0aGlzLl9pdGVtcyA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbXTtcbiAgfVxuXG4gIGdldCBpdGVtcygpIHtcbiAgICByZXR1cm4gdGhpcy5faXRlbXM7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBPYmpldG8gY29tIGFzIGxpdGVyYWlzIHVzYWRhcyBubyBgdGhmLWxpc3Qtdmlld2AuXG4gICAqXG4gICAqIEV4aXN0ZW0gZHVhcyBtYW5laXJhcyBkZSBjdXN0b21pemFyIG8gY29tcG9uZW50ZSwgcGFzc2FuZG8gdW0gb2JqZXRvIGNvbSB0b2RhcyBhcyBsaXRlcmFpcyBkaXNwb27DrXZlaXM6XG4gICAqXG4gICAqIGBgYFxuICAgKiAgY29uc3QgY3VzdG9tTGl0ZXJhbHM6IFRoZkxpc3RWaWV3TGl0ZXJhbHMgPSB7XG4gICAqICAgIGhpZGVEZXRhaWw6ICdPY3VsdGFyIGRldGFsaGVzIGNvbXBsZXRhbWVudGUnLFxuICAgKiAgICBsb2FkTW9yZURhdGE6ICdNYWlzIGRhZG9zJyxcbiAgICogICAgc2hvd0RldGFpbDogJ01vc3RyYXIgbWFpcyBkZXRhbGhlcycsXG4gICAqICAgIHNlbGVjdEFsbDogJ1NlbGVjaW9uYXIgdG9kb3Mgb3MgaXRlbnMnXG4gICAqICB9O1xuICAgKiBgYGBcbiAgICpcbiAgICogT3UgcGFzc2FuZG8gYXBlbmFzIGFzIGxpdGVyYWlzIHF1ZSBkZXNlamEgY3VzdG9taXphcjpcbiAgICpcbiAgICogYGBgXG4gICAqICBjb25zdCBjdXN0b21MaXRlcmFsczogVGhmTGlzdFZpZXdMaXRlcmFscyA9IHtcbiAgICogICAgc2hvd0RldGFpbDogJ01vc3RyYXIgbWFpcyBkZXRhbGhlcydcbiAgICogIH07XG4gICAqIGBgYFxuICAgKlxuICAgKiBFIHBhcmEgY2FycmVnYXIgYXMgbGl0ZXJhaXMgY3VzdG9taXphZGFzLCBiYXN0YSBhcGVuYXMgcGFzc2FyIG8gb2JqZXRvIHBhcmEgbyBjb21wb25lbnRlLlxuICAgKlxuICAgKiBgYGBcbiAgICogPHRoZi1saXN0LXZpZXdcbiAgICogICBbdC1saXRlcmFsc109XCJjdXN0b21MaXRlcmFsc1wiPlxuICAgKiA8L3RoZi1saXN0LXZpZXc+XG4gICAqIGBgYFxuICAgKlxuICAgKiA+IE8gb2JqZXRvIHBhZHLDo28gZGUgbGl0ZXJhaXMgc2Vyw6EgdHJhZHV6aWRvIGRlIGFjb3JkbyBjb20gbyBpZGlvbWEgZG8gYnJvd3NlciAocHQsIGVuLCBlcykuXG4gICAqL1xuICBASW5wdXQoJ3QtbGl0ZXJhbHMnKSBzZXQgbGl0ZXJhbHModmFsdWU6IFRoZkxpc3RWaWV3TGl0ZXJhbHMpIHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3QgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgdGhpcy5fbGl0ZXJhbHMgPSB7XG4gICAgICAgIC4uLnRoZkxpc3RWaWV3TGl0ZXJhbHNEZWZhdWx0W3RoZkxvY2FsZURlZmF1bHRdLFxuICAgICAgICAuLi50aGZMaXN0Vmlld0xpdGVyYWxzRGVmYXVsdFticm93c2VyTGFuZ3VhZ2UoKV0sXG4gICAgICAgIC4uLnZhbHVlXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saXRlcmFscyA9IHRoZkxpc3RWaWV3TGl0ZXJhbHNEZWZhdWx0W2Jyb3dzZXJMYW5ndWFnZSgpXTtcbiAgICB9XG4gIH1cblxuICBnZXQgbGl0ZXJhbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpdGVyYWxzIHx8IHRoZkxpc3RWaWV3TGl0ZXJhbHNEZWZhdWx0W2Jyb3dzZXJMYW5ndWFnZSgpXTtcbiAgfVxuXG4gIC8qKiBSZWNlYmUgdW1hIHByb3ByaWVkYWRlIHF1ZSBzZXLDoSB1dGlsaXphZGEgcGFyYSByZWN1cGVyYXIgbyB2YWxvciBkbyBvYmpldG8gcXVlIHNlcsOhIHVzYWRvIGNvbW8gbGluayBwYXJhIG8gdMOtdHVsby4gKi9cbiAgQElucHV0KCd0LXByb3BlcnR5LWxpbmsnKSBwcm9wZXJ0eUxpbms/OiBzdHJpbmc7XG5cbiAgLyoqIFJlY2ViZSB1bWEgcHJvcHJpZWRhZGUgcXVlIHNlcsOhIHV0aWxpemFkYSBwYXJhIHJlY3VwZXJhciBvIHZhbG9yIGRvIG9iamV0byBxdWUgc2Vyw6EgZXhpYmlkbyBjb21vIG8gdMOtdHVsbyBkZSBjYWRhIGl0ZW0uICovXG4gIEBJbnB1dCgndC1wcm9wZXJ0eS10aXRsZScpIHByb3BlcnR5VGl0bGU/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogSGFiaWxpdGEgdW0gKmNoZWNrYm94KiBwYXJhIGNhZGEgaXRlbSBkYSBsaXN0YS4gVG9kb3Mgb3MgaXRlbXMgcG9zc3VlbSBhIHByb3ByaWVkYWRlIGRpbsOibWljYSBgJHNlbGVjdGVkYCBwYXJhIGlkZW50aWZpY2FyIHNlIG9cbiAgICogaXRlbSBlc3TDoSBzZWxlY2lvbmFkbywgcG9yIGV4ZW1wbG86XG4gICAqXG4gICAqIGBgYFxuICAgKiAgaXRlbS4kc2VsZWN0ZWRcbiAgICpcbiAgICogIC8vIG91XG4gICAqXG4gICAqICBpdGVtWyckc2VsZWN0ZWQnXVxuICAgKiBgYGBcbiAgICpcbiAgICogQGRlZmF1bHQgYGZhbHNlYFxuICAgKi9cbiAgQElucHV0KCd0LXNlbGVjdCcpIHNldCBzZWxlY3Qoc2VsZWN0OiBib29sZWFuKSB7XG4gICAgdGhpcy5fc2VsZWN0ID0gY29udmVydFRvQm9vbGVhbihzZWxlY3QpO1xuICAgIHRoaXMuc2hvd01haW5IZWFkZXIoKTtcbiAgfVxuXG4gIGdldCBzZWxlY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEluZGljYSBxdWUgbyBib3TDo28gYENhcnJlZ2FyIE1haXMgUmVzdWx0YWRvc2Agc2Vyw6EgZGVzYWJpbGl0YWRvLlxuICAgKi9cbiAgQElucHV0KCd0LXNob3ctbW9yZS1kaXNhYmxlZCcpIHNldCBzaG93TW9yZURpc2FibGVkKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fc2hvd01vcmVEaXNhYmxlZCA9IGNvbnZlcnRUb0Jvb2xlYW4odmFsdWUpO1xuICB9XG5cbiAgZ2V0IHNob3dNb3JlRGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3Nob3dNb3JlRGlzYWJsZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVjZWJlIHVtYSBhw6fDo28sIHF1ZSBzZXLDoSBleGVjdXRhZGEgcXVhbmRvIGNsaWNhciBubyBib3TDo28gXCJDYXJyZWdhciBtYWlzIHJlc3VsdGFkb3NcIi5cbiAgICpcbiAgICogPiBDYXNvIG5lbmh1bWEgYcOnw6NvIGZvciBkZWZpbmlkYSBvIG1lc21vIG7Do28gZmljYXLDoSB2aXPDrXZlbC5cbiAgICovXG4gIEBPdXRwdXQoJ3Qtc2hvdy1tb3JlJykgc2hvd01vcmU/OiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBBw6fDo28gcXVlIHNlcsOhIGV4ZWN1dGFkYSBhbyBjbGljYXIgbm8gdMOtdHVsby5cbiAgICpcbiAgICogQW8gc2VyIGRpc3BhcmFkbywgbyBtw6l0b2RvIGluc2VyaWRvIG5hIGHDp8OjbyBpcsOhIHJlY2ViZXIgY29tbyBwYXLDom1ldHJvIG8gaXRlbSBkYSBsaXN0YSBjbGljYWRvLlxuICAgKi9cbiAgQE91dHB1dCgndC10aXRsZS1hY3Rpb24nKSB0aXRsZUFjdGlvbj86IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgb25DbGlja0FjdGlvbihsaXN0Vmlld0FjdGlvbjogVGhmTGlzdFZpZXdBY3Rpb24sIGl0ZW0pIHtcbiAgICBjb25zdCBjbGVhbkl0ZW0gPSB0aGlzLmRlbGV0ZUludGVybmFsQXR0cnMoaXRlbSk7XG4gICAgaWYgKGxpc3RWaWV3QWN0aW9uLmFjdGlvbikge1xuICAgICAgbGlzdFZpZXdBY3Rpb24uYWN0aW9uKGNsZWFuSXRlbSk7XG4gICAgfVxuICB9XG5cbiAgb25TaG93TW9yZSgpOiB2b2lkIHtcbiAgICB0aGlzLnNob3dNb3JlLmVtaXQoKTtcbiAgfVxuXG4gIHJ1blRpdGxlQWN0aW9uKGxpc3RJdGVtOiBhbnkpIHtcbiAgICBjb25zdCBpdGVtV2l0aFB1YmxpY1Byb3BlcnRpZXMgPSB0aGlzLmRlbGV0ZUludGVybmFsQXR0cnMobGlzdEl0ZW0pO1xuICAgIHRoaXMudGl0bGVBY3Rpb24uZW1pdChpdGVtV2l0aFB1YmxpY1Byb3BlcnRpZXMpO1xuICB9XG5cbiAgc2VsZWN0QWxsTGlzdEl0ZW1zKCkge1xuICAgIGlmICghdGhpcy5oaWRlU2VsZWN0QWxsKSB7XG4gICAgICB0aGlzLnNlbGVjdEFsbCA9ICF0aGlzLnNlbGVjdEFsbDtcblxuICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpdGVtLiRzZWxlY3RlZCA9IHRoaXMuc2VsZWN0QWxsO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc2VsZWN0TGlzdEl0ZW0ocm93OiBhbnkpIHtcbiAgICByb3cuJHNlbGVjdGVkID0gIXJvdy4kc2VsZWN0ZWQ7XG5cbiAgICB0aGlzLnNlbGVjdEFsbCA9IHRoaXMuY2hlY2tJZkl0ZW1zQXJlU2VsZWN0ZWQodGhpcy5pdGVtcyk7XG4gIH1cblxuICBwcml2YXRlIGRlbGV0ZUludGVybmFsQXR0cnMoaXRlbSkge1xuICAgIGNvbnN0IGl0ZW1Db3B5ID0gaXRlbSA/IHsgLi4uaXRlbSB9IDogdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gaXRlbUNvcHkpIHtcbiAgICAgIGlmIChpdGVtQ29weS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGtleS5zdGFydHNXaXRoKCckJykpIHtcbiAgICAgICAgZGVsZXRlIGl0ZW1Db3B5W2tleV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZW1Db3B5O1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja0lmSXRlbXNBcmVTZWxlY3RlZChpdGVtczogQXJyYXk8YW55Pik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHNvbWVDaGVja2VkT3JJbmRldGVybWluYXRlID0gaXRlbSA9PiBpdGVtLiRzZWxlY3RlZCB8fCBpdGVtLiRzZWxlY3RlZCA9PT0gbnVsbDtcbiAgICBjb25zdCBldmVyeUNoZWNrZWQgPSBpdGVtID0+IGl0ZW0uJHNlbGVjdGVkO1xuXG4gICAgaWYgKGl0ZW1zLmV2ZXJ5KGV2ZXJ5Q2hlY2tlZCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChpdGVtcy5zb21lKHNvbWVDaGVja2VkT3JJbmRldGVybWluYXRlKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93TWFpbkhlYWRlcigpIHtcbiAgICB0aGlzLnNob3dIZWFkZXIgPSAhISh0aGlzLnNlbGVjdCAmJiAhdGhpcy5oaWRlU2VsZWN0QWxsICYmIHRoaXMuaXRlbXMgJiYgdGhpcy5pdGVtcy5sZW5ndGgpO1xuICB9XG5cbn1cbiJdfQ==