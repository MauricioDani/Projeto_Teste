/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { HttpClient, HttpClientModule } from '@angular/common/http';
import { APP_INITIALIZER, NgModule } from '@angular/core';
import { ThfLanguageService } from './../thf-language/thf-language.service';
import { I18N_CONFIG } from './thf-i18n-config-injection-token';
import { returnThfI18nService, ThfI18nService } from './thf-i18n.service';
import { ThfLanguageModule } from '../thf-language/thf-language.module';
/**
 * \@description
 *
 * Módulo do serviço `ThfI18nService` para controle de idiomas com THF.
 *
 * Para utilização do serviço de idiomas `ThfI18nService`, deve-se importar este módulo mesmo já havendo importado
 * o módulo `ThfModule`. Na importação deve ser invocado o método `config`, informando um objeto que deve implementar
 * a interface [`ThfI18nConfig`](documentation/thf-i18n#thfI18nConfig) para configuração.
 *
 * <a id="i18n-config"></a>
 * **Exemplo de configuração do módulo do i18n:**
 * ```
 * import { ThfI18nConfig } from '\@totvs/thf-ui';
 *
 * import { generalEn } from './i18n/general-en';
 * import { generalPt } from './i18n/general-pt';
 *
 * const i18nConfig: ThfI18nConfig = {
 *   default: {
 *     language: 'pt-BR',
 *     context: 'general',
 *     cache: true
 *   },
 *   contexts: {
 *     general: {
 *       'pt-BR': generalPt,
 *       'en-US': generalEn
 *     },
 *     hcm: {
 *       url: 'http://10.1.1.1/api/translations/hcm/'
 *     }
 *   }
 * };
 *
 * \@NgModule({
 *   declarations: [],
 *   imports: [
 *     ThfModule,
 *     ThfI18nModule.config(i18nConfig)
 *   ],
 *   bootstrap: [AppComponent]
 * })
 * ```
 *
 * Para cada contexto é possível definir a origem das literais, que podem ser de um serviço REST ou
 * de um objeto. Exemplo:
 *
 * Arquivo general-pt.ts
 * ```
 * export const generalPt = {
 *  add: 'Adicionar',
 *  greeting: 'Prazer, {0} {1}',
 *  people: '{0} Pessoas,
 *  remove: 'Remover'
 * }
 * ```
 *
 * Arquivo general-en.ts
 * ```
 * export const generalEn = {
 *  add: 'Add',
 *  greeting: 'Nice to meet you, {0} {1}',
 *  people: '{0} People,
 *  remove: 'Remove'
 * }
 * ```
 *
 * **Exemplo de configuração de contextos usando constantes externas:**
 * ```
 * import { ThfI18nConfig } from '\@totvs/thf-ui';
 *
 * import { generalEn } from './i18n/general-en';
 * import { generalPt } from './i18n/general-pt';
 *
 * const i18nConfig: ThfI18nConfig = {
 *   contexts: {
 *     general: {
 *       'pt-BR': generalPt, // constantes em arquivos separados
 *       'en-US': generalEn // constantes em arquivos separados
 *     },
 *     crm: {
 *       url: 'http://10.0.0.1:3000/api/translations/crm'
 *     }
 *   },
 *   default: {}
 * }
 * ```
 *
 * **Exemplo de configuração de um contexto utilizando serviço:**
 *
 * Ao optar por utilizar um serviço para configuração de contexto, deverá ser definida a URL
 * específica do contexto, como nos exemplos abaixo:
 *
 *  - http://10.0.0.1:3000/api/translations/crm
 *  - http://10.0.0.1:3000/api/translations/general
 *
 * Os idiomas e literais serão automaticamente buscados com parâmetros na própria URL:
 * - **language**: o idioma será sempre passado por parâmetro e é recomendado utilizar uma das linguagens
 * suportadas pelo THF (`pt-br`, `en-us` ou `es-es`).
 * - **literals**: as literais serão separadas por vírgula. Caso esse parâmetro não seja informado, o
 * serviço deve retornar todas as literais do idioma.
 *
 * Exemplos de requisição:
 *
 *  - http://10.0.0.1:3000/api/translations/crm?language=pt-br
 *  - http://10.0.0.1:3000/api/translations/crm?language=pt-br&literals=add,remove,text
 *
 * > Sempre que o idioma solicitado não for encontrado, será buscado por `pt-br`.
 *
 * Além dos contextos, é possível definir as configurações *default* do sistema na configuração do
 * módulo utilizando a interface [`ThfI18nConfig`](documentation/thf-i18n#thfI18nConfig):
 *
 * **Exemplo de padrões definidos:**
 * ```
 * const i18nConfig: ThfI18nConfig = {
 *   contexts: {
 *     general: { }
 *   },
 *   default: {
 *    language: 'pt-BR',
 *    context: 'general',
 *    cache: true
 *   }
 * }
 * ```
 *
 * **Importante:**
 *
 * Recomenda-se que as definições *default* sejam realizadas apenas uma vez na aplicação,
 * preferencialmente no módulo `AppModule`.
 *
 * **i18n com *Lazy loading***
 *
 * Para aplicações que utilizem a abordagem de módulos com carregamento *lazy loading*, caso seja
 * definida outra configuração do `ThfI18nModule`, deve-se atentar os seguintes detalhes:
 *
 * - Caso existam literais comuns na aplicação, estas devem ser reimportadas;
 * - Não defina outra *default language* para este módulo. Caso for definida, será sobreposta para
 * toda a aplicação;
 * - Caso precise de módulos carregados via *lazy loading* com linguagens diferentes, utilize o
 * método [`setLanguage()`](documentation/thf-i18n#setLanguage) disponibilizado pelo `ThfI18nService`
 * para definir a linguagem da aplicação e dos módulos com as linguagens diferentes.
 */
export class ThfI18nModule {
    /**
     * @param {?} config
     * @return {?}
     */
    static config(config) {
        return {
            ngModule: ThfI18nModule,
            providers: [
                {
                    provide: I18N_CONFIG,
                    useValue: config
                },
                {
                    provide: APP_INITIALIZER,
                    useFactory: initializeLanguageDefault,
                    multi: true,
                    deps: [I18N_CONFIG, ThfLanguageService]
                },
                {
                    provide: ThfI18nService,
                    useFactory: returnThfI18nService,
                    deps: [I18N_CONFIG, HttpClient, ThfLanguageService]
                }
            ]
        };
    }
}
ThfI18nModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    HttpClientModule,
                    ThfLanguageModule
                ]
            },] }
];
/**
 * @param {?} config
 * @param {?} languageService
 * @return {?}
 */
export function initializeLanguageDefault(config, languageService) {
    // tslint:disable-next-line:prefer-immediate-return
    /** @type {?} */
    const setDefaultLanguage = (/**
     * @return {?}
     */
    () => {
        if (config.default.language) {
            languageService.setLanguageDefault(config.default.language);
        }
    });
    return setDefaultLanguage;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLWkxOG4ubW9kdWxlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRvdHZzL3RoZi11aS8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy90aGYtaTE4bi90aGYtaTE4bi5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsZUFBZSxFQUF1QixRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFL0UsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFFNUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQ2hFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUUxRSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0p4RSxNQUFNLE9BQU8sYUFBYTs7Ozs7SUFFeEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFxQjtRQUNqQyxPQUFPO1lBQ0wsUUFBUSxFQUFFLGFBQWE7WUFDdkIsU0FBUyxFQUFFO2dCQUNUO29CQUNFLE9BQU8sRUFBRSxXQUFXO29CQUNwQixRQUFRLEVBQUUsTUFBTTtpQkFDakI7Z0JBQ0Q7b0JBQ0UsT0FBTyxFQUFFLGVBQWU7b0JBQ3hCLFVBQVUsRUFBRSx5QkFBeUI7b0JBQ3JDLEtBQUssRUFBRSxJQUFJO29CQUNYLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxrQkFBa0IsQ0FBQztpQkFDeEM7Z0JBQ0Q7b0JBQ0UsT0FBTyxFQUFFLGNBQWM7b0JBQ3ZCLFVBQVUsRUFBRSxvQkFBb0I7b0JBQ2hDLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxVQUFVLEVBQUUsa0JBQWtCLENBQUM7aUJBQ3BEO2FBQ0Y7U0FDRixDQUFDO0lBQ0osQ0FBQzs7O1lBN0JGLFFBQVEsU0FBQztnQkFDUixPQUFPLEVBQUU7b0JBQ1AsZ0JBQWdCO29CQUNoQixpQkFBaUI7aUJBQ2xCO2FBQ0Y7Ozs7Ozs7QUE0QkQsTUFBTSxVQUFVLHlCQUF5QixDQUFDLE1BQXFCLEVBQUUsZUFBbUM7OztVQUU1RixrQkFBa0I7OztJQUFHLEdBQUcsRUFBRTtRQUM5QixJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFO1lBQzNCLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQzdEO0lBQ0gsQ0FBQyxDQUFBO0lBQ0QsT0FBTyxrQkFBa0IsQ0FBQztBQUM1QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cENsaWVudE1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IEFQUF9JTklUSUFMSVpFUiwgTW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgVGhmTGFuZ3VhZ2VTZXJ2aWNlIH0gZnJvbSAnLi8uLi90aGYtbGFuZ3VhZ2UvdGhmLWxhbmd1YWdlLnNlcnZpY2UnO1xuXG5pbXBvcnQgeyBJMThOX0NPTkZJRyB9IGZyb20gJy4vdGhmLWkxOG4tY29uZmlnLWluamVjdGlvbi10b2tlbic7XG5pbXBvcnQgeyByZXR1cm5UaGZJMThuU2VydmljZSwgVGhmSTE4blNlcnZpY2UgfSBmcm9tICcuL3RoZi1pMThuLnNlcnZpY2UnO1xuaW1wb3J0IHsgVGhmSTE4bkNvbmZpZyB9IGZyb20gJy4vaW50ZXJmYWNlcy90aGYtaTE4bi1jb25maWcuaW50ZXJmYWNlJztcbmltcG9ydCB7IFRoZkxhbmd1YWdlTW9kdWxlIH0gZnJvbSAnLi4vdGhmLWxhbmd1YWdlL3RoZi1sYW5ndWFnZS5tb2R1bGUnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIE3Ds2R1bG8gZG8gc2VydmnDp28gYFRoZkkxOG5TZXJ2aWNlYCBwYXJhIGNvbnRyb2xlIGRlIGlkaW9tYXMgY29tIFRIRi5cbiAqXG4gKiBQYXJhIHV0aWxpemHDp8OjbyBkbyBzZXJ2acOnbyBkZSBpZGlvbWFzIGBUaGZJMThuU2VydmljZWAsIGRldmUtc2UgaW1wb3J0YXIgZXN0ZSBtw7NkdWxvIG1lc21vIGrDoSBoYXZlbmRvIGltcG9ydGFkb1xuICogbyBtw7NkdWxvIGBUaGZNb2R1bGVgLiBOYSBpbXBvcnRhw6fDo28gZGV2ZSBzZXIgaW52b2NhZG8gbyBtw6l0b2RvIGBjb25maWdgLCBpbmZvcm1hbmRvIHVtIG9iamV0byBxdWUgZGV2ZSBpbXBsZW1lbnRhclxuICogYSBpbnRlcmZhY2UgW2BUaGZJMThuQ29uZmlnYF0oZG9jdW1lbnRhdGlvbi90aGYtaTE4biN0aGZJMThuQ29uZmlnKSBwYXJhIGNvbmZpZ3VyYcOnw6NvLlxuICpcbiAqIDxhIGlkPVwiaTE4bi1jb25maWdcIj48L2E+XG4gKiAqKkV4ZW1wbG8gZGUgY29uZmlndXJhw6fDo28gZG8gbcOzZHVsbyBkbyBpMThuOioqXG4gKiBgYGBcbiAqIGltcG9ydCB7IFRoZkkxOG5Db25maWcgfSBmcm9tICdAdG90dnMvdGhmLXVpJztcbiAqXG4gKiBpbXBvcnQgeyBnZW5lcmFsRW4gfSBmcm9tICcuL2kxOG4vZ2VuZXJhbC1lbic7XG4gKiBpbXBvcnQgeyBnZW5lcmFsUHQgfSBmcm9tICcuL2kxOG4vZ2VuZXJhbC1wdCc7XG4gKlxuICogY29uc3QgaTE4bkNvbmZpZzogVGhmSTE4bkNvbmZpZyA9IHtcbiAqICAgZGVmYXVsdDoge1xuICogICAgIGxhbmd1YWdlOiAncHQtQlInLFxuICogICAgIGNvbnRleHQ6ICdnZW5lcmFsJyxcbiAqICAgICBjYWNoZTogdHJ1ZVxuICogICB9LFxuICogICBjb250ZXh0czoge1xuICogICAgIGdlbmVyYWw6IHtcbiAqICAgICAgICdwdC1CUic6IGdlbmVyYWxQdCxcbiAqICAgICAgICdlbi1VUyc6IGdlbmVyYWxFblxuICogICAgIH0sXG4gKiAgICAgaGNtOiB7XG4gKiAgICAgICB1cmw6ICdodHRwOi8vMTAuMS4xLjEvYXBpL3RyYW5zbGF0aW9ucy9oY20vJ1xuICogICAgIH1cbiAqICAgfVxuICogfTtcbiAqXG4gKiBATmdNb2R1bGUoe1xuICogICBkZWNsYXJhdGlvbnM6IFtdLFxuICogICBpbXBvcnRzOiBbXG4gKiAgICAgVGhmTW9kdWxlLFxuICogICAgIFRoZkkxOG5Nb2R1bGUuY29uZmlnKGkxOG5Db25maWcpXG4gKiAgIF0sXG4gKiAgIGJvb3RzdHJhcDogW0FwcENvbXBvbmVudF1cbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBQYXJhIGNhZGEgY29udGV4dG8gw6kgcG9zc8OtdmVsIGRlZmluaXIgYSBvcmlnZW0gZGFzIGxpdGVyYWlzLCBxdWUgcG9kZW0gc2VyIGRlIHVtIHNlcnZpw6dvIFJFU1Qgb3VcbiAqIGRlIHVtIG9iamV0by4gRXhlbXBsbzpcbiAqXG4gKiBBcnF1aXZvIGdlbmVyYWwtcHQudHNcbiAqIGBgYFxuICogZXhwb3J0IGNvbnN0IGdlbmVyYWxQdCA9IHtcbiAqICBhZGQ6ICdBZGljaW9uYXInLFxuICogIGdyZWV0aW5nOiAnUHJhemVyLCB7MH0gezF9JyxcbiAqICBwZW9wbGU6ICd7MH0gUGVzc29hcyxcbiAqICByZW1vdmU6ICdSZW1vdmVyJ1xuICogfVxuICogYGBgXG4gKlxuICogQXJxdWl2byBnZW5lcmFsLWVuLnRzXG4gKiBgYGBcbiAqIGV4cG9ydCBjb25zdCBnZW5lcmFsRW4gPSB7XG4gKiAgYWRkOiAnQWRkJyxcbiAqICBncmVldGluZzogJ05pY2UgdG8gbWVldCB5b3UsIHswfSB7MX0nLFxuICogIHBlb3BsZTogJ3swfSBQZW9wbGUsXG4gKiAgcmVtb3ZlOiAnUmVtb3ZlJ1xuICogfVxuICogYGBgXG4gKlxuICogKipFeGVtcGxvIGRlIGNvbmZpZ3VyYcOnw6NvIGRlIGNvbnRleHRvcyB1c2FuZG8gY29uc3RhbnRlcyBleHRlcm5hczoqKlxuICogYGBgXG4gKiBpbXBvcnQgeyBUaGZJMThuQ29uZmlnIH0gZnJvbSAnQHRvdHZzL3RoZi11aSc7XG4gKlxuICogaW1wb3J0IHsgZ2VuZXJhbEVuIH0gZnJvbSAnLi9pMThuL2dlbmVyYWwtZW4nO1xuICogaW1wb3J0IHsgZ2VuZXJhbFB0IH0gZnJvbSAnLi9pMThuL2dlbmVyYWwtcHQnO1xuICpcbiAqIGNvbnN0IGkxOG5Db25maWc6IFRoZkkxOG5Db25maWcgPSB7XG4gKiAgIGNvbnRleHRzOiB7XG4gKiAgICAgZ2VuZXJhbDoge1xuICogICAgICAgJ3B0LUJSJzogZ2VuZXJhbFB0LCAvLyBjb25zdGFudGVzIGVtIGFycXVpdm9zIHNlcGFyYWRvc1xuICogICAgICAgJ2VuLVVTJzogZ2VuZXJhbEVuIC8vIGNvbnN0YW50ZXMgZW0gYXJxdWl2b3Mgc2VwYXJhZG9zXG4gKiAgICAgfSxcbiAqICAgICBjcm06IHtcbiAqICAgICAgIHVybDogJ2h0dHA6Ly8xMC4wLjAuMTozMDAwL2FwaS90cmFuc2xhdGlvbnMvY3JtJ1xuICogICAgIH1cbiAqICAgfSxcbiAqICAgZGVmYXVsdDoge31cbiAqIH1cbiAqIGBgYFxuICpcbiAqICoqRXhlbXBsbyBkZSBjb25maWd1cmHDp8OjbyBkZSB1bSBjb250ZXh0byB1dGlsaXphbmRvIHNlcnZpw6dvOioqXG4gKlxuICogQW8gb3B0YXIgcG9yIHV0aWxpemFyIHVtIHNlcnZpw6dvIHBhcmEgY29uZmlndXJhw6fDo28gZGUgY29udGV4dG8sIGRldmVyw6Egc2VyIGRlZmluaWRhIGEgVVJMXG4gKiBlc3BlY8OtZmljYSBkbyBjb250ZXh0bywgY29tbyBub3MgZXhlbXBsb3MgYWJhaXhvOlxuICpcbiAqICAtIGh0dHA6Ly8xMC4wLjAuMTozMDAwL2FwaS90cmFuc2xhdGlvbnMvY3JtXG4gKiAgLSBodHRwOi8vMTAuMC4wLjE6MzAwMC9hcGkvdHJhbnNsYXRpb25zL2dlbmVyYWxcbiAqXG4gKiBPcyBpZGlvbWFzIGUgbGl0ZXJhaXMgc2Vyw6NvIGF1dG9tYXRpY2FtZW50ZSBidXNjYWRvcyBjb20gcGFyw6JtZXRyb3MgbmEgcHLDs3ByaWEgVVJMOlxuICogLSAqKmxhbmd1YWdlKio6IG8gaWRpb21hIHNlcsOhIHNlbXByZSBwYXNzYWRvIHBvciBwYXLDom1ldHJvIGUgw6kgcmVjb21lbmRhZG8gdXRpbGl6YXIgdW1hIGRhcyBsaW5ndWFnZW5zXG4gKiBzdXBvcnRhZGFzIHBlbG8gVEhGIChgcHQtYnJgLCBgZW4tdXNgIG91IGBlcy1lc2ApLlxuICogLSAqKmxpdGVyYWxzKio6IGFzIGxpdGVyYWlzIHNlcsOjbyBzZXBhcmFkYXMgcG9yIHbDrXJndWxhLiBDYXNvIGVzc2UgcGFyw6JtZXRybyBuw6NvIHNlamEgaW5mb3JtYWRvLCBvXG4gKiBzZXJ2acOnbyBkZXZlIHJldG9ybmFyIHRvZGFzIGFzIGxpdGVyYWlzIGRvIGlkaW9tYS5cbiAqXG4gKiBFeGVtcGxvcyBkZSByZXF1aXNpw6fDo286XG4gKlxuICogIC0gaHR0cDovLzEwLjAuMC4xOjMwMDAvYXBpL3RyYW5zbGF0aW9ucy9jcm0/bGFuZ3VhZ2U9cHQtYnJcbiAqICAtIGh0dHA6Ly8xMC4wLjAuMTozMDAwL2FwaS90cmFuc2xhdGlvbnMvY3JtP2xhbmd1YWdlPXB0LWJyJmxpdGVyYWxzPWFkZCxyZW1vdmUsdGV4dFxuICpcbiAqID4gU2VtcHJlIHF1ZSBvIGlkaW9tYSBzb2xpY2l0YWRvIG7Do28gZm9yIGVuY29udHJhZG8sIHNlcsOhIGJ1c2NhZG8gcG9yIGBwdC1icmAuXG4gKlxuICogQWzDqW0gZG9zIGNvbnRleHRvcywgw6kgcG9zc8OtdmVsIGRlZmluaXIgYXMgY29uZmlndXJhw6fDtWVzICpkZWZhdWx0KiBkbyBzaXN0ZW1hIG5hIGNvbmZpZ3VyYcOnw6NvIGRvXG4gKiBtw7NkdWxvIHV0aWxpemFuZG8gYSBpbnRlcmZhY2UgW2BUaGZJMThuQ29uZmlnYF0oZG9jdW1lbnRhdGlvbi90aGYtaTE4biN0aGZJMThuQ29uZmlnKTpcbiAqXG4gKiAqKkV4ZW1wbG8gZGUgcGFkcsO1ZXMgZGVmaW5pZG9zOioqXG4gKiBgYGBcbiAqIGNvbnN0IGkxOG5Db25maWc6IFRoZkkxOG5Db25maWcgPSB7XG4gKiAgIGNvbnRleHRzOiB7XG4gKiAgICAgZ2VuZXJhbDogeyB9XG4gKiAgIH0sXG4gKiAgIGRlZmF1bHQ6IHtcbiAqICAgIGxhbmd1YWdlOiAncHQtQlInLFxuICogICAgY29udGV4dDogJ2dlbmVyYWwnLFxuICogICAgY2FjaGU6IHRydWVcbiAqICAgfVxuICogfVxuICogYGBgXG4gKlxuICogKipJbXBvcnRhbnRlOioqXG4gKlxuICogUmVjb21lbmRhLXNlIHF1ZSBhcyBkZWZpbmnDp8O1ZXMgKmRlZmF1bHQqIHNlamFtIHJlYWxpemFkYXMgYXBlbmFzIHVtYSB2ZXogbmEgYXBsaWNhw6fDo28sXG4gKiBwcmVmZXJlbmNpYWxtZW50ZSBubyBtw7NkdWxvIGBBcHBNb2R1bGVgLlxuICpcbiAqICoqaTE4biBjb20gKkxhenkgbG9hZGluZyoqKlxuICpcbiAqIFBhcmEgYXBsaWNhw6fDtWVzIHF1ZSB1dGlsaXplbSBhIGFib3JkYWdlbSBkZSBtw7NkdWxvcyBjb20gY2FycmVnYW1lbnRvICpsYXp5IGxvYWRpbmcqLCBjYXNvIHNlamFcbiAqIGRlZmluaWRhIG91dHJhIGNvbmZpZ3VyYcOnw6NvIGRvIGBUaGZJMThuTW9kdWxlYCwgZGV2ZS1zZSBhdGVudGFyIG9zIHNlZ3VpbnRlcyBkZXRhbGhlczpcbiAqXG4gKiAtIENhc28gZXhpc3RhbSBsaXRlcmFpcyBjb211bnMgbmEgYXBsaWNhw6fDo28sIGVzdGFzIGRldmVtIHNlciByZWltcG9ydGFkYXM7XG4gKiAtIE7Do28gZGVmaW5hIG91dHJhICpkZWZhdWx0IGxhbmd1YWdlKiBwYXJhIGVzdGUgbcOzZHVsby4gQ2FzbyBmb3IgZGVmaW5pZGEsIHNlcsOhIHNvYnJlcG9zdGEgcGFyYVxuICogdG9kYSBhIGFwbGljYcOnw6NvO1xuICogLSBDYXNvIHByZWNpc2UgZGUgbcOzZHVsb3MgY2FycmVnYWRvcyB2aWEgKmxhenkgbG9hZGluZyogY29tIGxpbmd1YWdlbnMgZGlmZXJlbnRlcywgdXRpbGl6ZSBvXG4gKiBtw6l0b2RvIFtgc2V0TGFuZ3VhZ2UoKWBdKGRvY3VtZW50YXRpb24vdGhmLWkxOG4jc2V0TGFuZ3VhZ2UpIGRpc3BvbmliaWxpemFkbyBwZWxvIGBUaGZJMThuU2VydmljZWBcbiAqIHBhcmEgZGVmaW5pciBhIGxpbmd1YWdlbSBkYSBhcGxpY2HDp8OjbyBlIGRvcyBtw7NkdWxvcyBjb20gYXMgbGluZ3VhZ2VucyBkaWZlcmVudGVzLlxuICovXG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBIdHRwQ2xpZW50TW9kdWxlLFxuICAgIFRoZkxhbmd1YWdlTW9kdWxlXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgVGhmSTE4bk1vZHVsZSB7XG5cbiAgc3RhdGljIGNvbmZpZyhjb25maWc6IFRoZkkxOG5Db25maWcpOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmdNb2R1bGU6IFRoZkkxOG5Nb2R1bGUsXG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IEkxOE5fQ09ORklHLFxuICAgICAgICAgIHVzZVZhbHVlOiBjb25maWdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IEFQUF9JTklUSUFMSVpFUixcbiAgICAgICAgICB1c2VGYWN0b3J5OiBpbml0aWFsaXplTGFuZ3VhZ2VEZWZhdWx0LFxuICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgIGRlcHM6IFtJMThOX0NPTkZJRywgVGhmTGFuZ3VhZ2VTZXJ2aWNlXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogVGhmSTE4blNlcnZpY2UsXG4gICAgICAgICAgdXNlRmFjdG9yeTogcmV0dXJuVGhmSTE4blNlcnZpY2UsXG4gICAgICAgICAgZGVwczogW0kxOE5fQ09ORklHLCBIdHRwQ2xpZW50LCBUaGZMYW5ndWFnZVNlcnZpY2VdXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuICB9XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVMYW5ndWFnZURlZmF1bHQoY29uZmlnOiBUaGZJMThuQ29uZmlnLCBsYW5ndWFnZVNlcnZpY2U6IFRoZkxhbmd1YWdlU2VydmljZSkge1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWltbWVkaWF0ZS1yZXR1cm5cbiAgY29uc3Qgc2V0RGVmYXVsdExhbmd1YWdlID0gKCkgPT4ge1xuICAgIGlmIChjb25maWcuZGVmYXVsdC5sYW5ndWFnZSkge1xuICAgICAgbGFuZ3VhZ2VTZXJ2aWNlLnNldExhbmd1YWdlRGVmYXVsdChjb25maWcuZGVmYXVsdC5sYW5ndWFnZSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gc2V0RGVmYXVsdExhbmd1YWdlO1xufVxuIl19