/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewChild } from '@angular/core';
import { browserLanguage, thfLocaleDefault } from '../../utils/util';
import { ThfDialogType } from './thf-dialog.enum';
import { ThfModalComponent } from '../../components/thf-modal/thf-modal.component';
/** @type {?} */
export var thfDialogAlertLiteralsDefault = {
    en: (/** @type {?} */ ({ ok: 'Ok' })),
    es: (/** @type {?} */ ({ ok: 'Ok' })),
    pt: (/** @type {?} */ ({ ok: 'Ok' }))
};
/** @type {?} */
export var thfDialogConfirmLiteralsDefault = {
    en: (/** @type {?} */ ({ cancel: 'Cancel', confirm: 'Confirm' })),
    es: (/** @type {?} */ ({ cancel: 'Cancelar', confirm: 'Confirmar' })),
    pt: (/** @type {?} */ ({ cancel: 'Cancelar', confirm: 'Confirmar' }))
};
/**
 * \@docsPrivate
 *
 * \@description
 *
 * Componente que serve como container do thf-dialog.service
 */
var ThfDialogComponent = /** @class */ (function () {
    function ThfDialogComponent() {
        // Objeto primary do thfModal
        this.primaryAction = { label: 'ok', action: (/**
             * @return {?}
             */
            function () { }) };
    }
    /**
     * @return {?}
     */
    ThfDialogComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.closeSubscription.unsubscribe();
    };
    /**
     * @return {?}
     */
    ThfDialogComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.closeSubscription = this.thfModal.onXClosed.subscribe((/**
         * @param {?} close
         * @return {?}
         */
        function (close) { return _this.destroy(); }));
    };
    // Fecha o thfModal
    // Fecha o thfModal
    /**
     * @return {?}
     */
    ThfDialogComponent.prototype.close = 
    // Fecha o thfModal
    /**
     * @return {?}
     */
    function () {
        this.thfModal.close();
        this.destroy();
    };
    /**
     * @return {?}
     */
    ThfDialogComponent.prototype.destroy = /**
     * @return {?}
     */
    function () {
        if (this.componentRef) {
            this.componentRef.destroy();
        }
    };
    // Insere os valores recebidos de this.open para o thfModal
    // Insere os valores recebidos de this.open para o thfModal
    /**
     * @param {?=} primaryLabel
     * @param {?=} primaryAction
     * @param {?=} secondaryLabel
     * @param {?=} secondaryAction
     * @return {?}
     */
    ThfDialogComponent.prototype.configDialog = 
    // Insere os valores recebidos de this.open para o thfModal
    /**
     * @param {?=} primaryLabel
     * @param {?=} primaryAction
     * @param {?=} secondaryLabel
     * @param {?=} secondaryAction
     * @return {?}
     */
    function (primaryLabel, primaryAction, secondaryLabel, secondaryAction) {
        var _this = this;
        this.primaryAction = {
            label: primaryLabel,
            action: (/**
             * @return {?}
             */
            function () {
                if (primaryAction) {
                    primaryAction();
                }
                _this.close();
            })
        };
        if (secondaryLabel) {
            this.secondaryAction = {
                label: secondaryLabel,
                action: (/**
                 * @return {?}
                 */
                function () {
                    if (secondaryAction) {
                        secondaryAction();
                    }
                    _this.close();
                })
            };
        }
    };
    // Insere os valores recebidos de thf-dialog.service de acordo com o tipo de diálago solicitado
    // Insere os valores recebidos de thf-dialog.service de acordo com o tipo de diálago solicitado
    /**
     * @param {?} dialogOptions
     * @param {?} dialogType
     * @param {?=} componentRef
     * @return {?}
     */
    ThfDialogComponent.prototype.open = 
    // Insere os valores recebidos de thf-dialog.service de acordo com o tipo de diálago solicitado
    /**
     * @param {?} dialogOptions
     * @param {?} dialogType
     * @param {?=} componentRef
     * @return {?}
     */
    function (dialogOptions, dialogType, componentRef) {
        this.title = dialogOptions.title;
        this.message = dialogOptions.message;
        this.componentRef = componentRef;
        this.setDialogLiterals(dialogOptions, dialogType);
        switch (dialogType) {
            case ThfDialogType.Confirm: {
                this.configDialog(this.literalsConfirm.confirm, ((/** @type {?} */ (dialogOptions))).confirm, this.literalsConfirm.cancel, ((/** @type {?} */ (dialogOptions))).cancel);
                break;
            }
            case ThfDialogType.Alert: {
                this.configDialog(this.literalsAlert.ok, ((/** @type {?} */ (dialogOptions))).ok);
                break;
            }
        }
        this.thfModal.open();
    };
    /**
     * @private
     * @param {?} dialogOptions
     * @param {?} dialogType
     * @return {?}
     */
    ThfDialogComponent.prototype.setDialogLiterals = /**
     * @private
     * @param {?} dialogOptions
     * @param {?} dialogType
     * @return {?}
     */
    function (dialogOptions, dialogType) {
        /** @type {?} */
        var alertLiterals = thfDialogAlertLiteralsDefault;
        /** @type {?} */
        var confirmLiterals = thfDialogConfirmLiteralsDefault;
        /** @type {?} */
        var literals = dialogOptions.literals;
        if (dialogType === ThfDialogType.Alert) {
            this.literalsAlert = tslib_1.__assign({}, alertLiterals[thfLocaleDefault], alertLiterals[browserLanguage()], literals);
        }
        else {
            this.literalsConfirm = tslib_1.__assign({}, confirmLiterals[thfLocaleDefault], confirmLiterals[browserLanguage()], literals);
        }
    };
    ThfDialogComponent.decorators = [
        { type: Component, args: [{
                    template: "<thf-modal\n  [t-title]=\"title\"\n  [t-primary-action]=\"primaryAction\"\n  [t-secondary-action]=\"secondaryAction\">\n  {{ message }}\n</thf-modal>\n"
                }] }
    ];
    ThfDialogComponent.propDecorators = {
        thfModal: [{ type: ViewChild, args: [ThfModalComponent, { static: true },] }]
    };
    return ThfDialogComponent;
}());
export { ThfDialogComponent };
if (false) {
    /** @type {?} */
    ThfDialogComponent.prototype.thfModal;
    /** @type {?} */
    ThfDialogComponent.prototype.title;
    /** @type {?} */
    ThfDialogComponent.prototype.message;
    /** @type {?} */
    ThfDialogComponent.prototype.primaryAction;
    /** @type {?} */
    ThfDialogComponent.prototype.secondaryAction;
    /** @type {?} */
    ThfDialogComponent.prototype.literalsAlert;
    /** @type {?} */
    ThfDialogComponent.prototype.literalsConfirm;
    /**
     * @type {?}
     * @private
     */
    ThfDialogComponent.prototype.componentRef;
    /**
     * @type {?}
     * @private
     */
    ThfDialogComponent.prototype.closeSubscription;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLWRpYWxvZy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdG90dnMvdGhmLXVpLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2VzL3RoZi1kaWFsb2cvdGhmLWRpYWxvZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFtQyxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFJdEYsT0FBTyxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBS3JFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnREFBZ0QsQ0FBQzs7QUFFbkYsTUFBTSxLQUFPLDZCQUE2QixHQUFHO0lBQzNDLEVBQUUsRUFBRSxtQkFBeUIsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUE7SUFDekMsRUFBRSxFQUFFLG1CQUF5QixFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBQTtJQUN6QyxFQUFFLEVBQUUsbUJBQXlCLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFBO0NBQzFDOztBQUVELE1BQU0sS0FBTywrQkFBK0IsR0FBRztJQUM3QyxFQUFFLEVBQUUsbUJBQTJCLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLEVBQUE7SUFDdkUsRUFBRSxFQUFFLG1CQUEyQixFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxFQUFBO0lBQzNFLEVBQUUsRUFBRSxtQkFBMkIsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsRUFBQTtDQUM1RTs7Ozs7Ozs7QUFVRDtJQUFBOztRQWNFLGtCQUFhLEdBQW1CLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNOzs7WUFBRSxjQUFRLENBQUMsQ0FBQSxF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WUFDakQsUUFBUSxHQUFHLGFBQWEsQ0FBQyxRQUFRO1FBRXZDLElBQUksVUFBVSxLQUFLLGFBQWEsQ0FBQyxLQUFLLEVBQUU7WUFDdEMsSUFBSSxDQUFDLGFBQWEsd0JBQU8sYUFBYSxDQUFDLGdCQUFnQixDQUFDLEVBQUssYUFBYSxDQUFDLGVBQWUsRUFBRSxDQUFDLEVBQUssUUFBUSxDQUFDLENBQUM7U0FDN0c7YUFBTTtZQUNMLElBQUksQ0FBQyxlQUFlLHdCQUFPLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFLLGVBQWUsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxFQUFLLFFBQVEsQ0FBQyxDQUFDO1NBQ25IO0lBQ0gsQ0FBQzs7Z0JBakhGLFNBQVMsU0FBQztvQkFDVCxtS0FBMEM7aUJBQzNDOzs7MkJBR0UsU0FBUyxTQUFDLGlCQUFpQixFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTs7SUE2R2hELHlCQUFDO0NBQUEsQUFsSEQsSUFrSEM7U0EvR1ksa0JBQWtCOzs7SUFFN0Isc0NBQTRFOztJQUc1RSxtQ0FBYzs7SUFHZCxxQ0FBZ0I7O0lBR2hCLDJDQUFtRTs7SUFHbkUsNkNBQWdDOztJQUdoQywyQ0FBc0M7O0lBR3RDLDZDQUEwQzs7Ozs7SUFHMUMsMENBQXVEOzs7OztJQUN2RCwrQ0FBd0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudFJlZiwgT25EZXN0cm95LCBPbkluaXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgYnJvd3Nlckxhbmd1YWdlLCB0aGZMb2NhbGVEZWZhdWx0IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbCc7XG5cbmltcG9ydCB7IFRoZkRpYWxvZ0FsZXJ0TGl0ZXJhbHMgfSBmcm9tICcuL2ludGVyZmFjZXMvdGhmLWRpYWxvZy1hbGVydC1saXRlcmFscy5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVGhmRGlhbG9nQWxlcnRPcHRpb25zLCBUaGZEaWFsb2dDb25maXJtT3B0aW9ucyB9IGZyb20gJy4vaW50ZXJmYWNlcy90aGYtZGlhbG9nLmludGVyZmFjZSc7XG5pbXBvcnQgeyBUaGZEaWFsb2dDb25maXJtTGl0ZXJhbHMgfSBmcm9tICcuL2ludGVyZmFjZXMvdGhmLWRpYWxvZy1jb25maXJtLWxpdGVyYWxzLmludGVyZmFjZSc7XG5pbXBvcnQgeyBUaGZEaWFsb2dUeXBlIH0gZnJvbSAnLi90aGYtZGlhbG9nLmVudW0nO1xuaW1wb3J0IHsgVGhmTW9kYWxBY3Rpb24gfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL3RoZi1tb2RhbC90aGYtbW9kYWwtYWN0aW9uLmludGVyZmFjZSc7XG5pbXBvcnQgeyBUaGZNb2RhbENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvdGhmLW1vZGFsL3RoZi1tb2RhbC5jb21wb25lbnQnO1xuXG5leHBvcnQgY29uc3QgdGhmRGlhbG9nQWxlcnRMaXRlcmFsc0RlZmF1bHQgPSB7XG4gIGVuOiA8VGhmRGlhbG9nQWxlcnRMaXRlcmFscz4geyBvazogJ09rJyB9LFxuICBlczogPFRoZkRpYWxvZ0FsZXJ0TGl0ZXJhbHM+IHsgb2s6ICdPaycgfSxcbiAgcHQ6IDxUaGZEaWFsb2dBbGVydExpdGVyYWxzPiB7IG9rOiAnT2snIH1cbn07XG5cbmV4cG9ydCBjb25zdCB0aGZEaWFsb2dDb25maXJtTGl0ZXJhbHNEZWZhdWx0ID0ge1xuICBlbjogPFRoZkRpYWxvZ0NvbmZpcm1MaXRlcmFscz4geyBjYW5jZWw6ICdDYW5jZWwnLCBjb25maXJtOiAnQ29uZmlybScgfSxcbiAgZXM6IDxUaGZEaWFsb2dDb25maXJtTGl0ZXJhbHM+IHsgY2FuY2VsOiAnQ2FuY2VsYXInLCBjb25maXJtOiAnQ29uZmlybWFyJyB9LFxuICBwdDogPFRoZkRpYWxvZ0NvbmZpcm1MaXRlcmFscz4geyBjYW5jZWw6ICdDYW5jZWxhcicsIGNvbmZpcm06ICdDb25maXJtYXInIH1cbn07XG5cbi8qKlxuICogQGRvY3NQcml2YXRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogQ29tcG9uZW50ZSBxdWUgc2VydmUgY29tbyBjb250YWluZXIgZG8gdGhmLWRpYWxvZy5zZXJ2aWNlXG4gKi9cblxuQENvbXBvbmVudCh7XG4gIHRlbXBsYXRlVXJsOiAnLi90aGYtZGlhbG9nLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBUaGZEaWFsb2dDb21wb25lbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3ksIE9uSW5pdCB7XG4gIC8vIFZpZXdDaGlsZCBwYXJhIG8gdXNvIGRvIHRoZi1tb2RhbC5jb21wb25lbnRcbiAgQFZpZXdDaGlsZChUaGZNb2RhbENvbXBvbmVudCwgeyBzdGF0aWM6IHRydWUgfSkgdGhmTW9kYWw6IFRoZk1vZGFsQ29tcG9uZW50O1xuXG4gIC8vIFRpdGxlIGRvIHRoZk1vZGFsXG4gIHRpdGxlOiBzdHJpbmc7XG5cbiAgLy8gTWVzc2FnZSBkbyB0aGZNb2RhbFxuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgLy8gT2JqZXRvIHByaW1hcnkgZG8gdGhmTW9kYWxcbiAgcHJpbWFyeUFjdGlvbjogVGhmTW9kYWxBY3Rpb24gPSB7IGxhYmVsOiAnb2snLCBhY3Rpb246ICgpID0+IHsgfSB9O1xuXG4gIC8vIE9iamV0byBzZWNvbmRhcnkgZG8gdGhmTW9kYWxcbiAgc2Vjb25kYXJ5QWN0aW9uOiBUaGZNb2RhbEFjdGlvbjtcblxuICAvLyBMaXRlcmFpcyB1c2FkYXMgbm9zIGJvdMOjbyBkZSBhbGVydGEgZG8gdGhmTW9kYWxcbiAgbGl0ZXJhbHNBbGVydDogVGhmRGlhbG9nQWxlcnRMaXRlcmFscztcblxuICAvLyBMaXRlcmFpcyB1c2FkYXMgbm9zIGJvdMO1ZXMgZGUgY29uZmlybWHDp8OjbyBkbyB0aGZNb2RhbFxuICBsaXRlcmFsc0NvbmZpcm06IFRoZkRpYWxvZ0NvbmZpcm1MaXRlcmFscztcblxuICAvLyBBdHJpYnV0byBwYXJhIGFybWF6ZW5hciBhIHJlZmVyZW5jaWEgZG8gY29tcG9uZW50ZSBjcmlhZG8gdmlhIHNlcnZpw6dvLlxuICBwcml2YXRlIGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPFRoZkRpYWxvZ0NvbXBvbmVudD47XG4gIHByaXZhdGUgY2xvc2VTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLmNsb3NlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmNsb3NlU3Vic2NyaXB0aW9uID0gdGhpcy50aGZNb2RhbC5vblhDbG9zZWQuc3Vic2NyaWJlKGNsb3NlID0+IHRoaXMuZGVzdHJveSgpKTtcbiAgfVxuXG4gICAgLy8gRmVjaGEgbyB0aGZNb2RhbFxuICBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLnRoZk1vZGFsLmNsb3NlKCk7XG4gICAgdGhpcy5kZXN0cm95KCk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIGlmICh0aGlzLmNvbXBvbmVudFJlZikge1xuICAgICAgdGhpcy5jb21wb25lbnRSZWYuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEluc2VyZSBvcyB2YWxvcmVzIHJlY2ViaWRvcyBkZSB0aGlzLm9wZW4gcGFyYSBvIHRoZk1vZGFsXG4gIGNvbmZpZ0RpYWxvZyhwcmltYXJ5TGFiZWw/LCBwcmltYXJ5QWN0aW9uPywgc2Vjb25kYXJ5TGFiZWw/LCBzZWNvbmRhcnlBY3Rpb24/KSB7XG5cbiAgICB0aGlzLnByaW1hcnlBY3Rpb24gPSB7XG4gICAgICBsYWJlbDogcHJpbWFyeUxhYmVsLFxuICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgaWYgKHByaW1hcnlBY3Rpb24pIHtcbiAgICAgICAgICAgIHByaW1hcnlBY3Rpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoc2Vjb25kYXJ5TGFiZWwpIHtcbiAgICAgIHRoaXMuc2Vjb25kYXJ5QWN0aW9uID0ge1xuICAgICAgICBsYWJlbDogc2Vjb25kYXJ5TGFiZWwsXG4gICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgIGlmIChzZWNvbmRhcnlBY3Rpb24pIHtcbiAgICAgICAgICAgIHNlY29uZGFyeUFjdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gSW5zZXJlIG9zIHZhbG9yZXMgcmVjZWJpZG9zIGRlIHRoZi1kaWFsb2cuc2VydmljZSBkZSBhY29yZG8gY29tIG8gdGlwbyBkZSBkacOhbGFnbyBzb2xpY2l0YWRvXG4gIG9wZW4oZGlhbG9nT3B0aW9uczogKFRoZkRpYWxvZ0NvbmZpcm1PcHRpb25zIHwgVGhmRGlhbG9nQWxlcnRPcHRpb25zKSxcbiAgICAgICBkaWFsb2dUeXBlOiBUaGZEaWFsb2dUeXBlLFxuICAgICAgIGNvbXBvbmVudFJlZj86IENvbXBvbmVudFJlZjxUaGZEaWFsb2dDb21wb25lbnQ+KTogdm9pZCB7XG5cbiAgICB0aGlzLnRpdGxlID0gZGlhbG9nT3B0aW9ucy50aXRsZTtcbiAgICB0aGlzLm1lc3NhZ2UgPSBkaWFsb2dPcHRpb25zLm1lc3NhZ2U7XG5cbiAgICB0aGlzLmNvbXBvbmVudFJlZiA9IGNvbXBvbmVudFJlZjtcblxuICAgIHRoaXMuc2V0RGlhbG9nTGl0ZXJhbHMoZGlhbG9nT3B0aW9ucywgZGlhbG9nVHlwZSk7XG5cbiAgICBzd2l0Y2ggKGRpYWxvZ1R5cGUpIHtcbiAgICAgIGNhc2UgVGhmRGlhbG9nVHlwZS5Db25maXJtOiB7XG4gICAgICAgIHRoaXMuY29uZmlnRGlhbG9nKFxuICAgICAgICAgIHRoaXMubGl0ZXJhbHNDb25maXJtLmNvbmZpcm0sICg8VGhmRGlhbG9nQ29uZmlybU9wdGlvbnM+ZGlhbG9nT3B0aW9ucykuY29uZmlybSxcbiAgICAgICAgICB0aGlzLmxpdGVyYWxzQ29uZmlybS5jYW5jZWwsICg8VGhmRGlhbG9nQ29uZmlybU9wdGlvbnM+ZGlhbG9nT3B0aW9ucykuY2FuY2VsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFRoZkRpYWxvZ1R5cGUuQWxlcnQ6IHtcbiAgICAgICAgdGhpcy5jb25maWdEaWFsb2codGhpcy5saXRlcmFsc0FsZXJ0Lm9rLCAoPFRoZkRpYWxvZ0FsZXJ0T3B0aW9ucz5kaWFsb2dPcHRpb25zKS5vayk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudGhmTW9kYWwub3BlbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXREaWFsb2dMaXRlcmFscyhkaWFsb2dPcHRpb25zOiBUaGZEaWFsb2dDb25maXJtT3B0aW9ucyB8IFRoZkRpYWxvZ0FsZXJ0T3B0aW9ucywgZGlhbG9nVHlwZTogVGhmRGlhbG9nVHlwZSkge1xuICAgIGNvbnN0IGFsZXJ0TGl0ZXJhbHMgPSB0aGZEaWFsb2dBbGVydExpdGVyYWxzRGVmYXVsdDtcbiAgICBjb25zdCBjb25maXJtTGl0ZXJhbHMgPSB0aGZEaWFsb2dDb25maXJtTGl0ZXJhbHNEZWZhdWx0O1xuICAgIGNvbnN0IGxpdGVyYWxzID0gZGlhbG9nT3B0aW9ucy5saXRlcmFscztcblxuICAgIGlmIChkaWFsb2dUeXBlID09PSBUaGZEaWFsb2dUeXBlLkFsZXJ0KSB7XG4gICAgICB0aGlzLmxpdGVyYWxzQWxlcnQgPSB7Li4uYWxlcnRMaXRlcmFsc1t0aGZMb2NhbGVEZWZhdWx0XSwgLi4uYWxlcnRMaXRlcmFsc1ticm93c2VyTGFuZ3VhZ2UoKV0sIC4uLmxpdGVyYWxzfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5saXRlcmFsc0NvbmZpcm0gPSB7Li4uY29uZmlybUxpdGVyYWxzW3RoZkxvY2FsZURlZmF1bHRdLCAuLi5jb25maXJtTGl0ZXJhbHNbYnJvd3Nlckxhbmd1YWdlKCldLCAuLi5saXRlcmFsc307XG4gICAgfVxuICB9XG59XG4iXX0=