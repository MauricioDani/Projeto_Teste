/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { HttpClient, HttpClientModule } from '@angular/common/http';
import { APP_INITIALIZER, NgModule } from '@angular/core';
import { ThfLanguageService } from './../thf-language/thf-language.service';
import { I18N_CONFIG } from './thf-i18n-config-injection-token';
import { returnThfI18nService, ThfI18nService } from './thf-i18n.service';
import { ThfLanguageModule } from '../thf-language/thf-language.module';
/**
 * \@description
 *
 * Módulo do serviço `ThfI18nService` para controle de idiomas com THF.
 *
 * Para utilização do serviço de idiomas `ThfI18nService`, deve-se importar este módulo mesmo já havendo importado
 * o módulo `ThfModule`. Na importação deve ser invocado o método `config`, informando um objeto que deve implementar
 * a interface [`ThfI18nConfig`](documentation/thf-i18n#thfI18nConfig) para configuração.
 *
 * <a id="i18n-config"></a>
 * **Exemplo de configuração do módulo do i18n:**
 * ```
 * import { ThfI18nConfig } from '\@totvs/thf-ui';
 *
 * import { generalEn } from './i18n/general-en';
 * import { generalPt } from './i18n/general-pt';
 *
 * const i18nConfig: ThfI18nConfig = {
 *   default: {
 *     language: 'pt-BR',
 *     context: 'general',
 *     cache: true
 *   },
 *   contexts: {
 *     general: {
 *       'pt-BR': generalPt,
 *       'en-US': generalEn
 *     },
 *     hcm: {
 *       url: 'http://10.1.1.1/api/translations/hcm/'
 *     }
 *   }
 * };
 *
 * \@NgModule({
 *   declarations: [],
 *   imports: [
 *     ThfModule,
 *     ThfI18nModule.config(i18nConfig)
 *   ],
 *   bootstrap: [AppComponent]
 * })
 * ```
 *
 * Para cada contexto é possível definir a origem das literais, que podem ser de um serviço REST ou
 * de um objeto. Exemplo:
 *
 * Arquivo general-pt.ts
 * ```
 * export const generalPt = {
 *  add: 'Adicionar',
 *  greeting: 'Prazer, {0} {1}',
 *  people: '{0} Pessoas,
 *  remove: 'Remover'
 * }
 * ```
 *
 * Arquivo general-en.ts
 * ```
 * export const generalEn = {
 *  add: 'Add',
 *  greeting: 'Nice to meet you, {0} {1}',
 *  people: '{0} People,
 *  remove: 'Remove'
 * }
 * ```
 *
 * **Exemplo de configuração de contextos usando constantes externas:**
 * ```
 * import { ThfI18nConfig } from '\@totvs/thf-ui';
 *
 * import { generalEn } from './i18n/general-en';
 * import { generalPt } from './i18n/general-pt';
 *
 * const i18nConfig: ThfI18nConfig = {
 *   contexts: {
 *     general: {
 *       'pt-BR': generalPt, // constantes em arquivos separados
 *       'en-US': generalEn // constantes em arquivos separados
 *     },
 *     crm: {
 *       url: 'http://10.0.0.1:3000/api/translations/crm'
 *     }
 *   },
 *   default: {}
 * }
 * ```
 *
 * **Exemplo de configuração de um contexto utilizando serviço:**
 *
 * Ao optar por utilizar um serviço para configuração de contexto, deverá ser definida a URL
 * específica do contexto, como nos exemplos abaixo:
 *
 *  - http://10.0.0.1:3000/api/translations/crm
 *  - http://10.0.0.1:3000/api/translations/general
 *
 * Os idiomas e literais serão automaticamente buscados com parâmetros na própria URL:
 * - **language**: o idioma será sempre passado por parâmetro e é recomendado utilizar uma das linguagens
 * suportadas pelo THF (`pt-br`, `en-us` ou `es-es`).
 * - **literals**: as literais serão separadas por vírgula. Caso esse parâmetro não seja informado, o
 * serviço deve retornar todas as literais do idioma.
 *
 * Exemplos de requisição:
 *
 *  - http://10.0.0.1:3000/api/translations/crm?language=pt-br
 *  - http://10.0.0.1:3000/api/translations/crm?language=pt-br&literals=add,remove,text
 *
 * > Sempre que o idioma solicitado não for encontrado, será buscado por `pt-br`.
 *
 * Além dos contextos, é possível definir as configurações *default* do sistema na configuração do
 * módulo utilizando a interface [`ThfI18nConfig`](documentation/thf-i18n#thfI18nConfig):
 *
 * **Exemplo de padrões definidos:**
 * ```
 * const i18nConfig: ThfI18nConfig = {
 *   contexts: {
 *     general: { }
 *   },
 *   default: {
 *    language: 'pt-BR',
 *    context: 'general',
 *    cache: true
 *   }
 * }
 * ```
 *
 * **Importante:**
 *
 * Recomenda-se que as definições *default* sejam realizadas apenas uma vez na aplicação,
 * preferencialmente no módulo `AppModule`.
 *
 * **i18n com *Lazy loading***
 *
 * Para aplicações que utilizem a abordagem de módulos com carregamento *lazy loading*, caso seja
 * definida outra configuração do `ThfI18nModule`, deve-se atentar os seguintes detalhes:
 *
 * - Caso existam literais comuns na aplicação, estas devem ser reimportadas;
 * - Não defina outra *default language* para este módulo. Caso for definida, será sobreposta para
 * toda a aplicação;
 * - Caso precise de módulos carregados via *lazy loading* com linguagens diferentes, utilize o
 * método [`setLanguage()`](documentation/thf-i18n#setLanguage) disponibilizado pelo `ThfI18nService`
 * para definir a linguagem da aplicação e dos módulos com as linguagens diferentes.
 */
var ThfI18nModule = /** @class */ (function () {
    function ThfI18nModule() {
    }
    /**
     * @param {?} config
     * @return {?}
     */
    ThfI18nModule.config = /**
     * @param {?} config
     * @return {?}
     */
    function (config) {
        return {
            ngModule: ThfI18nModule,
            providers: [
                {
                    provide: I18N_CONFIG,
                    useValue: config
                },
                {
                    provide: APP_INITIALIZER,
                    useFactory: initializeLanguageDefault,
                    multi: true,
                    deps: [I18N_CONFIG, ThfLanguageService]
                },
                {
                    provide: ThfI18nService,
                    useFactory: returnThfI18nService,
                    deps: [I18N_CONFIG, HttpClient, ThfLanguageService]
                }
            ]
        };
    };
    ThfI18nModule.decorators = [
        { type: NgModule, args: [{
                    imports: [
                        HttpClientModule,
                        ThfLanguageModule
                    ]
                },] }
    ];
    return ThfI18nModule;
}());
export { ThfI18nModule };
/**
 * @param {?} config
 * @param {?} languageService
 * @return {?}
 */
export function initializeLanguageDefault(config, languageService) {
    // tslint:disable-next-line:prefer-immediate-return
    /** @type {?} */
    var setDefaultLanguage = (/**
     * @return {?}
     */
    function () {
        if (config.default.language) {
            languageService.setLanguageDefault(config.default.language);
        }
    });
    return setDefaultLanguage;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLWkxOG4ubW9kdWxlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRvdHZzL3RoZi11aS8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy90aGYtaTE4bi90aGYtaTE4bi5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsZUFBZSxFQUF1QixRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFL0UsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFFNUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQ2hFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUUxRSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0p4RTtJQUFBO0lBK0JBLENBQUM7Ozs7O0lBdkJRLG9CQUFNOzs7O0lBQWIsVUFBYyxNQUFxQjtRQUNqQyxPQUFPO1lBQ0wsUUFBUSxFQUFFLGFBQWE7WUFDdkIsU0FBUyxFQUFFO2dCQUNUO29CQUNFLE9BQU8sRUFBRSxXQUFXO29CQUNwQixRQUFRLEVBQUUsTUFBTTtpQkFDakI7Z0JBQ0Q7b0JBQ0UsT0FBTyxFQUFFLGVBQWU7b0JBQ3hCLFVBQVUsRUFBRSx5QkFBeUI7b0JBQ3JDLEtBQUssRUFBRSxJQUFJO29CQUNYLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxrQkFBa0IsQ0FBQztpQkFDeEM7Z0JBQ0Q7b0JBQ0UsT0FBTyxFQUFFLGNBQWM7b0JBQ3ZCLFVBQVUsRUFBRSxvQkFBb0I7b0JBQ2hDLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxVQUFVLEVBQUUsa0JBQWtCLENBQUM7aUJBQ3BEO2FBQ0Y7U0FDRixDQUFDO0lBQ0osQ0FBQzs7Z0JBN0JGLFFBQVEsU0FBQztvQkFDUixPQUFPLEVBQUU7d0JBQ1AsZ0JBQWdCO3dCQUNoQixpQkFBaUI7cUJBQ2xCO2lCQUNGOztJQTBCRCxvQkFBQztDQUFBLEFBL0JELElBK0JDO1NBekJZLGFBQWE7Ozs7OztBQTJCMUIsTUFBTSxVQUFVLHlCQUF5QixDQUFDLE1BQXFCLEVBQUUsZUFBbUM7OztRQUU1RixrQkFBa0I7OztJQUFHO1FBQ3pCLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUU7WUFDM0IsZUFBZSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDN0Q7SUFDSCxDQUFDLENBQUE7SUFDRCxPQUFPLGtCQUFrQixDQUFDO0FBQzVCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwQ2xpZW50TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQVBQX0lOSVRJQUxJWkVSLCBNb2R1bGVXaXRoUHJvdmlkZXJzLCBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBUaGZMYW5ndWFnZVNlcnZpY2UgfSBmcm9tICcuLy4uL3RoZi1sYW5ndWFnZS90aGYtbGFuZ3VhZ2Uuc2VydmljZSc7XG5cbmltcG9ydCB7IEkxOE5fQ09ORklHIH0gZnJvbSAnLi90aGYtaTE4bi1jb25maWctaW5qZWN0aW9uLXRva2VuJztcbmltcG9ydCB7IHJldHVyblRoZkkxOG5TZXJ2aWNlLCBUaGZJMThuU2VydmljZSB9IGZyb20gJy4vdGhmLWkxOG4uc2VydmljZSc7XG5pbXBvcnQgeyBUaGZJMThuQ29uZmlnIH0gZnJvbSAnLi9pbnRlcmZhY2VzL3RoZi1pMThuLWNvbmZpZy5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVGhmTGFuZ3VhZ2VNb2R1bGUgfSBmcm9tICcuLi90aGYtbGFuZ3VhZ2UvdGhmLWxhbmd1YWdlLm1vZHVsZSc7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogTcOzZHVsbyBkbyBzZXJ2acOnbyBgVGhmSTE4blNlcnZpY2VgIHBhcmEgY29udHJvbGUgZGUgaWRpb21hcyBjb20gVEhGLlxuICpcbiAqIFBhcmEgdXRpbGl6YcOnw6NvIGRvIHNlcnZpw6dvIGRlIGlkaW9tYXMgYFRoZkkxOG5TZXJ2aWNlYCwgZGV2ZS1zZSBpbXBvcnRhciBlc3RlIG3Ds2R1bG8gbWVzbW8gasOhIGhhdmVuZG8gaW1wb3J0YWRvXG4gKiBvIG3Ds2R1bG8gYFRoZk1vZHVsZWAuIE5hIGltcG9ydGHDp8OjbyBkZXZlIHNlciBpbnZvY2FkbyBvIG3DqXRvZG8gYGNvbmZpZ2AsIGluZm9ybWFuZG8gdW0gb2JqZXRvIHF1ZSBkZXZlIGltcGxlbWVudGFyXG4gKiBhIGludGVyZmFjZSBbYFRoZkkxOG5Db25maWdgXShkb2N1bWVudGF0aW9uL3RoZi1pMThuI3RoZkkxOG5Db25maWcpIHBhcmEgY29uZmlndXJhw6fDo28uXG4gKlxuICogPGEgaWQ9XCJpMThuLWNvbmZpZ1wiPjwvYT5cbiAqICoqRXhlbXBsbyBkZSBjb25maWd1cmHDp8OjbyBkbyBtw7NkdWxvIGRvIGkxOG46KipcbiAqIGBgYFxuICogaW1wb3J0IHsgVGhmSTE4bkNvbmZpZyB9IGZyb20gJ0B0b3R2cy90aGYtdWknO1xuICpcbiAqIGltcG9ydCB7IGdlbmVyYWxFbiB9IGZyb20gJy4vaTE4bi9nZW5lcmFsLWVuJztcbiAqIGltcG9ydCB7IGdlbmVyYWxQdCB9IGZyb20gJy4vaTE4bi9nZW5lcmFsLXB0JztcbiAqXG4gKiBjb25zdCBpMThuQ29uZmlnOiBUaGZJMThuQ29uZmlnID0ge1xuICogICBkZWZhdWx0OiB7XG4gKiAgICAgbGFuZ3VhZ2U6ICdwdC1CUicsXG4gKiAgICAgY29udGV4dDogJ2dlbmVyYWwnLFxuICogICAgIGNhY2hlOiB0cnVlXG4gKiAgIH0sXG4gKiAgIGNvbnRleHRzOiB7XG4gKiAgICAgZ2VuZXJhbDoge1xuICogICAgICAgJ3B0LUJSJzogZ2VuZXJhbFB0LFxuICogICAgICAgJ2VuLVVTJzogZ2VuZXJhbEVuXG4gKiAgICAgfSxcbiAqICAgICBoY206IHtcbiAqICAgICAgIHVybDogJ2h0dHA6Ly8xMC4xLjEuMS9hcGkvdHJhbnNsYXRpb25zL2hjbS8nXG4gKiAgICAgfVxuICogICB9XG4gKiB9O1xuICpcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGRlY2xhcmF0aW9uczogW10sXG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICBUaGZNb2R1bGUsXG4gKiAgICAgVGhmSTE4bk1vZHVsZS5jb25maWcoaTE4bkNvbmZpZylcbiAqICAgXSxcbiAqICAgYm9vdHN0cmFwOiBbQXBwQ29tcG9uZW50XVxuICogfSlcbiAqIGBgYFxuICpcbiAqIFBhcmEgY2FkYSBjb250ZXh0byDDqSBwb3Nzw612ZWwgZGVmaW5pciBhIG9yaWdlbSBkYXMgbGl0ZXJhaXMsIHF1ZSBwb2RlbSBzZXIgZGUgdW0gc2VydmnDp28gUkVTVCBvdVxuICogZGUgdW0gb2JqZXRvLiBFeGVtcGxvOlxuICpcbiAqIEFycXVpdm8gZ2VuZXJhbC1wdC50c1xuICogYGBgXG4gKiBleHBvcnQgY29uc3QgZ2VuZXJhbFB0ID0ge1xuICogIGFkZDogJ0FkaWNpb25hcicsXG4gKiAgZ3JlZXRpbmc6ICdQcmF6ZXIsIHswfSB7MX0nLFxuICogIHBlb3BsZTogJ3swfSBQZXNzb2FzLFxuICogIHJlbW92ZTogJ1JlbW92ZXInXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBBcnF1aXZvIGdlbmVyYWwtZW4udHNcbiAqIGBgYFxuICogZXhwb3J0IGNvbnN0IGdlbmVyYWxFbiA9IHtcbiAqICBhZGQ6ICdBZGQnLFxuICogIGdyZWV0aW5nOiAnTmljZSB0byBtZWV0IHlvdSwgezB9IHsxfScsXG4gKiAgcGVvcGxlOiAnezB9IFBlb3BsZSxcbiAqICByZW1vdmU6ICdSZW1vdmUnXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiAqKkV4ZW1wbG8gZGUgY29uZmlndXJhw6fDo28gZGUgY29udGV4dG9zIHVzYW5kbyBjb25zdGFudGVzIGV4dGVybmFzOioqXG4gKiBgYGBcbiAqIGltcG9ydCB7IFRoZkkxOG5Db25maWcgfSBmcm9tICdAdG90dnMvdGhmLXVpJztcbiAqXG4gKiBpbXBvcnQgeyBnZW5lcmFsRW4gfSBmcm9tICcuL2kxOG4vZ2VuZXJhbC1lbic7XG4gKiBpbXBvcnQgeyBnZW5lcmFsUHQgfSBmcm9tICcuL2kxOG4vZ2VuZXJhbC1wdCc7XG4gKlxuICogY29uc3QgaTE4bkNvbmZpZzogVGhmSTE4bkNvbmZpZyA9IHtcbiAqICAgY29udGV4dHM6IHtcbiAqICAgICBnZW5lcmFsOiB7XG4gKiAgICAgICAncHQtQlInOiBnZW5lcmFsUHQsIC8vIGNvbnN0YW50ZXMgZW0gYXJxdWl2b3Mgc2VwYXJhZG9zXG4gKiAgICAgICAnZW4tVVMnOiBnZW5lcmFsRW4gLy8gY29uc3RhbnRlcyBlbSBhcnF1aXZvcyBzZXBhcmFkb3NcbiAqICAgICB9LFxuICogICAgIGNybToge1xuICogICAgICAgdXJsOiAnaHR0cDovLzEwLjAuMC4xOjMwMDAvYXBpL3RyYW5zbGF0aW9ucy9jcm0nXG4gKiAgICAgfVxuICogICB9LFxuICogICBkZWZhdWx0OiB7fVxuICogfVxuICogYGBgXG4gKlxuICogKipFeGVtcGxvIGRlIGNvbmZpZ3VyYcOnw6NvIGRlIHVtIGNvbnRleHRvIHV0aWxpemFuZG8gc2VydmnDp286KipcbiAqXG4gKiBBbyBvcHRhciBwb3IgdXRpbGl6YXIgdW0gc2VydmnDp28gcGFyYSBjb25maWd1cmHDp8OjbyBkZSBjb250ZXh0bywgZGV2ZXLDoSBzZXIgZGVmaW5pZGEgYSBVUkxcbiAqIGVzcGVjw61maWNhIGRvIGNvbnRleHRvLCBjb21vIG5vcyBleGVtcGxvcyBhYmFpeG86XG4gKlxuICogIC0gaHR0cDovLzEwLjAuMC4xOjMwMDAvYXBpL3RyYW5zbGF0aW9ucy9jcm1cbiAqICAtIGh0dHA6Ly8xMC4wLjAuMTozMDAwL2FwaS90cmFuc2xhdGlvbnMvZ2VuZXJhbFxuICpcbiAqIE9zIGlkaW9tYXMgZSBsaXRlcmFpcyBzZXLDo28gYXV0b21hdGljYW1lbnRlIGJ1c2NhZG9zIGNvbSBwYXLDom1ldHJvcyBuYSBwcsOzcHJpYSBVUkw6XG4gKiAtICoqbGFuZ3VhZ2UqKjogbyBpZGlvbWEgc2Vyw6Egc2VtcHJlIHBhc3NhZG8gcG9yIHBhcsOibWV0cm8gZSDDqSByZWNvbWVuZGFkbyB1dGlsaXphciB1bWEgZGFzIGxpbmd1YWdlbnNcbiAqIHN1cG9ydGFkYXMgcGVsbyBUSEYgKGBwdC1icmAsIGBlbi11c2Agb3UgYGVzLWVzYCkuXG4gKiAtICoqbGl0ZXJhbHMqKjogYXMgbGl0ZXJhaXMgc2Vyw6NvIHNlcGFyYWRhcyBwb3IgdsOtcmd1bGEuIENhc28gZXNzZSBwYXLDom1ldHJvIG7Do28gc2VqYSBpbmZvcm1hZG8sIG9cbiAqIHNlcnZpw6dvIGRldmUgcmV0b3JuYXIgdG9kYXMgYXMgbGl0ZXJhaXMgZG8gaWRpb21hLlxuICpcbiAqIEV4ZW1wbG9zIGRlIHJlcXVpc2nDp8OjbzpcbiAqXG4gKiAgLSBodHRwOi8vMTAuMC4wLjE6MzAwMC9hcGkvdHJhbnNsYXRpb25zL2NybT9sYW5ndWFnZT1wdC1iclxuICogIC0gaHR0cDovLzEwLjAuMC4xOjMwMDAvYXBpL3RyYW5zbGF0aW9ucy9jcm0/bGFuZ3VhZ2U9cHQtYnImbGl0ZXJhbHM9YWRkLHJlbW92ZSx0ZXh0XG4gKlxuICogPiBTZW1wcmUgcXVlIG8gaWRpb21hIHNvbGljaXRhZG8gbsOjbyBmb3IgZW5jb250cmFkbywgc2Vyw6EgYnVzY2FkbyBwb3IgYHB0LWJyYC5cbiAqXG4gKiBBbMOpbSBkb3MgY29udGV4dG9zLCDDqSBwb3Nzw612ZWwgZGVmaW5pciBhcyBjb25maWd1cmHDp8O1ZXMgKmRlZmF1bHQqIGRvIHNpc3RlbWEgbmEgY29uZmlndXJhw6fDo28gZG9cbiAqIG3Ds2R1bG8gdXRpbGl6YW5kbyBhIGludGVyZmFjZSBbYFRoZkkxOG5Db25maWdgXShkb2N1bWVudGF0aW9uL3RoZi1pMThuI3RoZkkxOG5Db25maWcpOlxuICpcbiAqICoqRXhlbXBsbyBkZSBwYWRyw7VlcyBkZWZpbmlkb3M6KipcbiAqIGBgYFxuICogY29uc3QgaTE4bkNvbmZpZzogVGhmSTE4bkNvbmZpZyA9IHtcbiAqICAgY29udGV4dHM6IHtcbiAqICAgICBnZW5lcmFsOiB7IH1cbiAqICAgfSxcbiAqICAgZGVmYXVsdDoge1xuICogICAgbGFuZ3VhZ2U6ICdwdC1CUicsXG4gKiAgICBjb250ZXh0OiAnZ2VuZXJhbCcsXG4gKiAgICBjYWNoZTogdHJ1ZVxuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiAqKkltcG9ydGFudGU6KipcbiAqXG4gKiBSZWNvbWVuZGEtc2UgcXVlIGFzIGRlZmluacOnw7VlcyAqZGVmYXVsdCogc2VqYW0gcmVhbGl6YWRhcyBhcGVuYXMgdW1hIHZleiBuYSBhcGxpY2HDp8OjbyxcbiAqIHByZWZlcmVuY2lhbG1lbnRlIG5vIG3Ds2R1bG8gYEFwcE1vZHVsZWAuXG4gKlxuICogKippMThuIGNvbSAqTGF6eSBsb2FkaW5nKioqXG4gKlxuICogUGFyYSBhcGxpY2HDp8O1ZXMgcXVlIHV0aWxpemVtIGEgYWJvcmRhZ2VtIGRlIG3Ds2R1bG9zIGNvbSBjYXJyZWdhbWVudG8gKmxhenkgbG9hZGluZyosIGNhc28gc2VqYVxuICogZGVmaW5pZGEgb3V0cmEgY29uZmlndXJhw6fDo28gZG8gYFRoZkkxOG5Nb2R1bGVgLCBkZXZlLXNlIGF0ZW50YXIgb3Mgc2VndWludGVzIGRldGFsaGVzOlxuICpcbiAqIC0gQ2FzbyBleGlzdGFtIGxpdGVyYWlzIGNvbXVucyBuYSBhcGxpY2HDp8OjbywgZXN0YXMgZGV2ZW0gc2VyIHJlaW1wb3J0YWRhcztcbiAqIC0gTsOjbyBkZWZpbmEgb3V0cmEgKmRlZmF1bHQgbGFuZ3VhZ2UqIHBhcmEgZXN0ZSBtw7NkdWxvLiBDYXNvIGZvciBkZWZpbmlkYSwgc2Vyw6Egc29icmVwb3N0YSBwYXJhXG4gKiB0b2RhIGEgYXBsaWNhw6fDo287XG4gKiAtIENhc28gcHJlY2lzZSBkZSBtw7NkdWxvcyBjYXJyZWdhZG9zIHZpYSAqbGF6eSBsb2FkaW5nKiBjb20gbGluZ3VhZ2VucyBkaWZlcmVudGVzLCB1dGlsaXplIG9cbiAqIG3DqXRvZG8gW2BzZXRMYW5ndWFnZSgpYF0oZG9jdW1lbnRhdGlvbi90aGYtaTE4biNzZXRMYW5ndWFnZSkgZGlzcG9uaWJpbGl6YWRvIHBlbG8gYFRoZkkxOG5TZXJ2aWNlYFxuICogcGFyYSBkZWZpbmlyIGEgbGluZ3VhZ2VtIGRhIGFwbGljYcOnw6NvIGUgZG9zIG3Ds2R1bG9zIGNvbSBhcyBsaW5ndWFnZW5zIGRpZmVyZW50ZXMuXG4gKi9cblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIEh0dHBDbGllbnRNb2R1bGUsXG4gICAgVGhmTGFuZ3VhZ2VNb2R1bGVcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBUaGZJMThuTW9kdWxlIHtcblxuICBzdGF0aWMgY29uZmlnKGNvbmZpZzogVGhmSTE4bkNvbmZpZyk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogVGhmSTE4bk1vZHVsZSxcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogSTE4Tl9DT05GSUcsXG4gICAgICAgICAgdXNlVmFsdWU6IGNvbmZpZ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogQVBQX0lOSVRJQUxJWkVSLFxuICAgICAgICAgIHVzZUZhY3Rvcnk6IGluaXRpYWxpemVMYW5ndWFnZURlZmF1bHQsXG4gICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgZGVwczogW0kxOE5fQ09ORklHLCBUaGZMYW5ndWFnZVNlcnZpY2VdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBUaGZJMThuU2VydmljZSxcbiAgICAgICAgICB1c2VGYWN0b3J5OiByZXR1cm5UaGZJMThuU2VydmljZSxcbiAgICAgICAgICBkZXBzOiBbSTE4Tl9DT05GSUcsIEh0dHBDbGllbnQsIFRoZkxhbmd1YWdlU2VydmljZV1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG4gIH1cblxufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUxhbmd1YWdlRGVmYXVsdChjb25maWc6IFRoZkkxOG5Db25maWcsIGxhbmd1YWdlU2VydmljZTogVGhmTGFuZ3VhZ2VTZXJ2aWNlKSB7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItaW1tZWRpYXRlLXJldHVyblxuICBjb25zdCBzZXREZWZhdWx0TGFuZ3VhZ2UgPSAoKSA9PiB7XG4gICAgaWYgKGNvbmZpZy5kZWZhdWx0Lmxhbmd1YWdlKSB7XG4gICAgICBsYW5ndWFnZVNlcnZpY2Uuc2V0TGFuZ3VhZ2VEZWZhdWx0KGNvbmZpZy5kZWZhdWx0Lmxhbmd1YWdlKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBzZXREZWZhdWx0TGFuZ3VhZ2U7XG59XG4iXX0=