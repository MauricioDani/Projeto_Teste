/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ElementRef, Renderer2, ViewChild } from '@angular/core';
import { isKeyCodeEnter } from './../../utils/util';
import { ThfDropdownBaseComponent } from './thf-dropdown-base.component';
/**
 * \@docsExtends ThfDropdownBaseComponent
 *
 * \@example
 *
 * <example name="thf-dropdown-basic" title="Totvs Dropdown Basic" >
 *  <file name="sample-thf-dropdown-basic/sample-thf-dropdown-basic.component.html"> </file>
 *  <file name="sample-thf-dropdown-basic/sample-thf-dropdown-basic.component.ts"> </file>
 *  <file name="sample-thf-dropdown-basic/sample-thf-dropdown-basic.component.e2e-spec.ts"> </file>
 *  <file name="sample-thf-dropdown-basic/sample-thf-dropdown-basic.component.po.ts"> </file>
 * </example>
 *
 * <example name="thf-dropdown-labs" title="Totvs Dropdown Labs" >
 *  <file name="sample-thf-dropdown-labs/sample-thf-dropdown-labs.component.html"> </file>
 *  <file name="sample-thf-dropdown-labs/sample-thf-dropdown-labs.component.ts"> </file>
 * </example>
 *
 * <example name="thf-dropdown-social-network" title="Totvs Dropdown - Social Network" >
 *  <file name="sample-thf-dropdown-social-network/sample-thf-dropdown-social-network.component.html"> </file>
 *  <file name="sample-thf-dropdown-social-network/sample-thf-dropdown-social-network.component.ts"> </file>
 * </example>
 */
var ThfDropdownComponent = /** @class */ (function (_super) {
    tslib_1.__extends(ThfDropdownComponent, _super);
    function ThfDropdownComponent(renderer) {
        var _this = _super.call(this) || this;
        _this.renderer = renderer;
        _this.onScroll = (/**
         * @return {?}
         */
        function () {
            if (_this.open) {
                _this.hideDropdown();
            }
        });
        return _this;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    ThfDropdownComponent.prototype.onKeyDown = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (isKeyCodeEnter(event)) {
            this.toggleDropdown();
        }
    };
    /**
     * @return {?}
     */
    ThfDropdownComponent.prototype.toggleDropdown = /**
     * @return {?}
     */
    function () {
        this.dropdownRef && !this.open && !this.disabled ? this.showDropdown() : this.hideDropdown();
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    ThfDropdownComponent.prototype.checkClickArea = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        return this.dropdownRef && this.dropdownRef.nativeElement.contains(event.target);
    };
    /**
     * @private
     * @return {?}
     */
    ThfDropdownComponent.prototype.hideDropdown = /**
     * @private
     * @return {?}
     */
    function () {
        this.icon = 'thf-icon-arrow-down';
        this.removeListeners();
        this.popupRef.close();
        this.open = false;
    };
    /**
     * @private
     * @return {?}
     */
    ThfDropdownComponent.prototype.initializeListeners = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.clickoutListener = this.renderer.listen('document', 'click', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            _this.wasClickedOnDropdown(event);
        }));
        this.resizeListener = this.renderer.listen('window', 'resize', (/**
         * @return {?}
         */
        function () {
            _this.hideDropdown();
        }));
        window.addEventListener('scroll', this.onScroll, true);
    };
    /**
     * @private
     * @return {?}
     */
    ThfDropdownComponent.prototype.removeListeners = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.clickoutListener) {
            this.clickoutListener();
        }
        if (this.resizeListener) {
            this.resizeListener();
        }
        window.removeEventListener('scroll', this.onScroll, true);
    };
    /**
     * @private
     * @return {?}
     */
    ThfDropdownComponent.prototype.showDropdown = /**
     * @private
     * @return {?}
     */
    function () {
        this.icon = 'thf-icon-arrow-up';
        this.initializeListeners();
        this.popupRef.open();
        this.open = true;
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    ThfDropdownComponent.prototype.wasClickedOnDropdown = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var clickedOnDropdown = this.checkClickArea(event);
        if (!clickedOnDropdown) {
            this.hideDropdown();
        }
    };
    ThfDropdownComponent.decorators = [
        { type: Component, args: [{
                    selector: 'thf-dropdown',
                    template: "<div #dropdownRef\n  class=\"thf-dropdown\"\n  tabindex=\"{{ disabled ? -1 : 0 }}\"\n  (click)=\"toggleDropdown()\"\n  (keydown)=\"onKeyDown($event)\">\n\n  <div class=\"thf-dropdown-button\" [ngClass]=\"{'thf-dropdown-button-disabled' : disabled}\">\n    {{ label }}\n    <div class=\"thf-dropdown-icon thf-icon {{icon}}\"></div>\n  </div>\n\n  <thf-popup #popupRef\n    t-hide-arrow\n    t-is-corner-align\n    t-position=\"bottom-left\"\n    [t-actions]=\"actions\"\n    [t-custom-positions]=\"['bottom-left', 'top-left']\"\n    [t-target]=\"dropdownRef\">\n  </thf-popup>\n\n</div>\n"
                }] }
    ];
    /** @nocollapse */
    ThfDropdownComponent.ctorParameters = function () { return [
        { type: Renderer2 }
    ]; };
    ThfDropdownComponent.propDecorators = {
        dropdownRef: [{ type: ViewChild, args: ['dropdownRef', { read: ElementRef, static: true },] }],
        popupRef: [{ type: ViewChild, args: ['popupRef', { static: false },] }]
    };
    return ThfDropdownComponent;
}(ThfDropdownBaseComponent));
export { ThfDropdownComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    ThfDropdownComponent.prototype.clickoutListener;
    /**
     * @type {?}
     * @private
     */
    ThfDropdownComponent.prototype.resizeListener;
    /** @type {?} */
    ThfDropdownComponent.prototype.dropdownRef;
    /** @type {?} */
    ThfDropdownComponent.prototype.popupRef;
    /**
     * @type {?}
     * @private
     */
    ThfDropdownComponent.prototype.onScroll;
    /**
     * @type {?}
     * @private
     */
    ThfDropdownComponent.prototype.renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLWRyb3Bkb3duLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0b3R2cy90aGYtdWkvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy90aGYtZHJvcGRvd24vdGhmLWRyb3Bkb3duLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFNUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRXBELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLCtCQUErQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXdCekU7SUFJMEMsZ0RBQXdCO0lBUWhFLDhCQUFvQixRQUFtQjtRQUF2QyxZQUNFLGlCQUFPLFNBQ1I7UUFGbUIsY0FBUSxHQUFSLFFBQVEsQ0FBVztRQXFDL0IsY0FBUTs7O1FBQUc7WUFDakIsSUFBSSxLQUFJLENBQUMsSUFBSSxFQUFFO2dCQUNiLEtBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQzthQUNyQjtRQUNILENBQUMsRUFBQTs7SUF2Q0QsQ0FBQzs7Ozs7SUFFRCx3Q0FBUzs7OztJQUFULFVBQVUsS0FBVTtRQUNsQixJQUFJLGNBQWMsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUN6QixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7U0FDdkI7SUFDSCxDQUFDOzs7O0lBRUQsNkNBQWM7OztJQUFkO1FBQ0UsSUFBSSxDQUFDLFdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUMvRixDQUFDOzs7Ozs7SUFFTyw2Q0FBYzs7Ozs7SUFBdEIsVUFBdUIsS0FBaUI7UUFDdEMsT0FBTyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbkYsQ0FBQzs7Ozs7SUFFTywyQ0FBWTs7OztJQUFwQjtRQUNFLElBQUksQ0FBQyxJQUFJLEdBQUcscUJBQXFCLENBQUM7UUFDbEMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDdEIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7SUFDcEIsQ0FBQzs7Ozs7SUFFTyxrREFBbUI7Ozs7SUFBM0I7UUFBQSxpQkFVQztRQVRDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsT0FBTzs7OztRQUFFLFVBQUMsS0FBaUI7WUFDbEYsS0FBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25DLENBQUMsRUFBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsUUFBUTs7O1FBQUU7WUFDN0QsS0FBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3RCLENBQUMsRUFBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3pELENBQUM7Ozs7O0lBUU8sOENBQWU7Ozs7SUFBdkI7UUFDRSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUN6QixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztTQUN6QjtRQUVELElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUN2QixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7U0FDdkI7UUFFRCxNQUFNLENBQUMsbUJBQW1CLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDNUQsQ0FBQzs7Ozs7SUFFTywyQ0FBWTs7OztJQUFwQjtRQUNFLElBQUksQ0FBQyxJQUFJLEdBQUcsbUJBQW1CLENBQUM7UUFDaEMsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDM0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNuQixDQUFDOzs7Ozs7SUFFTyxtREFBb0I7Ozs7O0lBQTVCLFVBQTZCLEtBQWlCOztZQUN0QyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQztRQUVwRCxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDdEIsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1NBQ3JCO0lBQ0gsQ0FBQzs7Z0JBaEZGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsY0FBYztvQkFDeEIsdWxCQUE0QztpQkFDN0M7Ozs7Z0JBL0IrQixTQUFTOzs7OEJBcUN0QyxTQUFTLFNBQUMsYUFBYSxFQUFFLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFOzJCQUMzRCxTQUFTLFNBQUMsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTs7SUF3RTFDLDJCQUFDO0NBQUEsQUFsRkQsQ0FJMEMsd0JBQXdCLEdBOEVqRTtTQTlFWSxvQkFBb0I7Ozs7OztJQUUvQixnREFBcUM7Ozs7O0lBQ3JDLDhDQUFtQzs7SUFFbkMsMkNBQXNGOztJQUN0Rix3Q0FBd0Q7Ozs7O0lBdUN4RCx3Q0FJQzs7Ozs7SUF6Q1csd0NBQTJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBpc0tleUNvZGVFbnRlciB9IGZyb20gJy4vLi4vLi4vdXRpbHMvdXRpbCc7XG5cbmltcG9ydCB7IFRoZkRyb3Bkb3duQmFzZUNvbXBvbmVudCB9IGZyb20gJy4vdGhmLWRyb3Bkb3duLWJhc2UuY29tcG9uZW50JztcblxuLyoqXG4gKiBAZG9jc0V4dGVuZHMgVGhmRHJvcGRvd25CYXNlQ29tcG9uZW50XG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwidGhmLWRyb3Bkb3duLWJhc2ljXCIgdGl0bGU9XCJUb3R2cyBEcm9wZG93biBCYXNpY1wiID5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXRoZi1kcm9wZG93bi1iYXNpYy9zYW1wbGUtdGhmLWRyb3Bkb3duLWJhc2ljLmNvbXBvbmVudC5odG1sXCI+IDwvZmlsZT5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXRoZi1kcm9wZG93bi1iYXNpYy9zYW1wbGUtdGhmLWRyb3Bkb3duLWJhc2ljLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS10aGYtZHJvcGRvd24tYmFzaWMvc2FtcGxlLXRoZi1kcm9wZG93bi1iYXNpYy5jb21wb25lbnQuZTJlLXNwZWMudHNcIj4gPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtdGhmLWRyb3Bkb3duLWJhc2ljL3NhbXBsZS10aGYtZHJvcGRvd24tYmFzaWMuY29tcG9uZW50LnBvLnRzXCI+IDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwidGhmLWRyb3Bkb3duLWxhYnNcIiB0aXRsZT1cIlRvdHZzIERyb3Bkb3duIExhYnNcIiA+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS10aGYtZHJvcGRvd24tbGFicy9zYW1wbGUtdGhmLWRyb3Bkb3duLWxhYnMuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtdGhmLWRyb3Bkb3duLWxhYnMvc2FtcGxlLXRoZi1kcm9wZG93bi1sYWJzLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInRoZi1kcm9wZG93bi1zb2NpYWwtbmV0d29ya1wiIHRpdGxlPVwiVG90dnMgRHJvcGRvd24gLSBTb2NpYWwgTmV0d29ya1wiID5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXRoZi1kcm9wZG93bi1zb2NpYWwtbmV0d29yay9zYW1wbGUtdGhmLWRyb3Bkb3duLXNvY2lhbC1uZXR3b3JrLmNvbXBvbmVudC5odG1sXCI+IDwvZmlsZT5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXRoZi1kcm9wZG93bi1zb2NpYWwtbmV0d29yay9zYW1wbGUtdGhmLWRyb3Bkb3duLXNvY2lhbC1uZXR3b3JrLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3RoZi1kcm9wZG93bicsXG4gIHRlbXBsYXRlVXJsOiAnLi90aGYtZHJvcGRvd24uY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIFRoZkRyb3Bkb3duQ29tcG9uZW50IGV4dGVuZHMgVGhmRHJvcGRvd25CYXNlQ29tcG9uZW50IHtcblxuICBwcml2YXRlIGNsaWNrb3V0TGlzdGVuZXI6ICgpID0+IHZvaWQ7XG4gIHByaXZhdGUgcmVzaXplTGlzdGVuZXI6ICgpID0+IHZvaWQ7XG5cbiAgQFZpZXdDaGlsZCgnZHJvcGRvd25SZWYnLCB7IHJlYWQ6IEVsZW1lbnRSZWYsIHN0YXRpYzogdHJ1ZSB9KSBkcm9wZG93blJlZjogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgncG9wdXBSZWYnLCB7IHN0YXRpYzogZmFsc2UgfSkgcG9wdXBSZWY6IGFueTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgb25LZXlEb3duKGV2ZW50OiBhbnkpIHtcbiAgICBpZiAoaXNLZXlDb2RlRW50ZXIoZXZlbnQpKSB7XG4gICAgICB0aGlzLnRvZ2dsZURyb3Bkb3duKCk7XG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlRHJvcGRvd24oKTogdm9pZCB7XG4gICAgdGhpcy5kcm9wZG93blJlZiAmJiAhdGhpcy5vcGVuICYmICF0aGlzLmRpc2FibGVkID8gdGhpcy5zaG93RHJvcGRvd24oKSA6IHRoaXMuaGlkZURyb3Bkb3duKCk7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrQ2xpY2tBcmVhKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuZHJvcGRvd25SZWYgJiYgdGhpcy5kcm9wZG93blJlZi5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCk7XG4gIH1cblxuICBwcml2YXRlIGhpZGVEcm9wZG93bigpIHtcbiAgICB0aGlzLmljb24gPSAndGhmLWljb24tYXJyb3ctZG93bic7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnBvcHVwUmVmLmNsb3NlKCk7XG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5jbGlja291dExpc3RlbmVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oJ2RvY3VtZW50JywgJ2NsaWNrJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICB0aGlzLndhc0NsaWNrZWRPbkRyb3Bkb3duKGV2ZW50KTtcbiAgICB9KTtcblxuICAgIHRoaXMucmVzaXplTGlzdGVuZXIgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbignd2luZG93JywgJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgIHRoaXMuaGlkZURyb3Bkb3duKCk7XG4gICAgfSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vblNjcm9sbCwgdHJ1ZSk7XG4gIH1cblxuICBwcml2YXRlIG9uU2Nyb2xsID0gKCk6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLm9wZW4pIHtcbiAgICAgIHRoaXMuaGlkZURyb3Bkb3duKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKHRoaXMuY2xpY2tvdXRMaXN0ZW5lcikge1xuICAgICAgdGhpcy5jbGlja291dExpc3RlbmVyKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVzaXplTGlzdGVuZXIpIHtcbiAgICAgIHRoaXMucmVzaXplTGlzdGVuZXIoKTtcbiAgICB9XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vblNjcm9sbCwgdHJ1ZSk7XG4gIH1cblxuICBwcml2YXRlIHNob3dEcm9wZG93bigpIHtcbiAgICB0aGlzLmljb24gPSAndGhmLWljb24tYXJyb3ctdXAnO1xuICAgIHRoaXMuaW5pdGlhbGl6ZUxpc3RlbmVycygpO1xuICAgIHRoaXMucG9wdXBSZWYub3BlbigpO1xuICAgIHRoaXMub3BlbiA9IHRydWU7XG4gIH1cblxuICBwcml2YXRlIHdhc0NsaWNrZWRPbkRyb3Bkb3duKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgY29uc3QgY2xpY2tlZE9uRHJvcGRvd24gPSB0aGlzLmNoZWNrQ2xpY2tBcmVhKGV2ZW50KTtcblxuICAgIGlmICghY2xpY2tlZE9uRHJvcGRvd24pIHtcbiAgICAgIHRoaXMuaGlkZURyb3Bkb3duKCk7XG4gICAgfVxuICB9XG5cbn1cbiJdfQ==