/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ElementRef, forwardRef, ViewChild } from '@angular/core';
import { NG_VALIDATORS, NG_VALUE_ACCESSOR } from '@angular/forms';
import { ThfUploadBaseComponent } from './thf-upload-base.component';
import { ThfUploadService } from './thf-upload.service';
import { ThfUploadStatus } from './thf-upload-status.enum';
/**
 * \@docsExtends ThfUploadBaseComponent
 *
 * \@example
 *
 * <example name="thf-upload-basic" title="Totvs Upload Basic">
 *   <file name="sample-thf-upload-basic/sample-thf-upload-basic.component.html"> </file>
 *   <file name="sample-thf-upload-basic/sample-thf-upload-basic.component.ts"> </file>
 * </example>
 *
 * <example name="thf-upload-labs" title="Totvs Upload Labs">
 *   <file name="sample-thf-upload-labs/sample-thf-upload-labs.component.html"> </file>
 *   <file name="sample-thf-upload-labs/sample-thf-upload-labs.component.ts"> </file>
 * </example>
 *
 * <example name="thf-upload-resume" title="Totvs Upload - Resume">
 *   <file name="sample-thf-upload-resume/sample-thf-upload-resume.component.html"> </file>
 *   <file name="sample-thf-upload-resume/sample-thf-upload-resume.component.ts"> </file>
 * </example>
 *
 * <example name="thf-upload-rs" title="Totvs Upload - Realize & Show">
 *   <file name="sample-thf-upload-rs/sample-thf-upload-rs.component.html"> </file>
 *   <file name="sample-thf-upload-rs/sample-thf-upload-rs.component.ts"> </file>
 * </example>
 */
var ThfUploadComponent = /** @class */ (function (_super) {
    tslib_1.__extends(ThfUploadComponent, _super);
    function ThfUploadComponent(elementRef, uploadService) {
        var _this = _super.call(this, uploadService) || this;
        _this.elementRef = elementRef;
        _this.calledByCleanInputValue = false;
        return _this;
    }
    Object.defineProperty(ThfUploadComponent.prototype, "displaySendButton", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var currentFiles = this.currentFiles || [];
            return !this.hideSendButton && !this.autoUpload && (currentFiles.length > 0 && this.hasFileNotUploaded);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ThfUploadComponent.prototype, "hasFileNotUploaded", {
        get: /**
         * @return {?}
         */
        function () {
            if (Array.isArray(this.currentFiles)) {
                return this.currentFiles.some((/**
                 * @param {?} file
                 * @return {?}
                 */
                function (file) { return file.status !== ThfUploadStatus.Uploaded; }));
            }
            return false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ThfUploadComponent.prototype, "isDisabled", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var currentFiles = this.currentFiles || [];
            return this.hasAnyFileUploading(this.currentFiles) ||
                !this.url ||
                this.disabled ||
                this.isExceededFileLimit(currentFiles.length);
        },
        enumerable: true,
        configurable: true
    });
    /** Método responsável por **limpar** o(s) arquivo(s) selecionado(s). */
    /**
     * Método responsável por **limpar** o(s) arquivo(s) selecionado(s).
     * @return {?}
     */
    ThfUploadComponent.prototype.clear = /**
     * Método responsável por **limpar** o(s) arquivo(s) selecionado(s).
     * @return {?}
     */
    function () {
        this.currentFiles = undefined;
        this.updateModel([]);
        this.cleanInputValue();
    };
    // Função disparada ao selecionar algum arquivo.
    // Função disparada ao selecionar algum arquivo.
    /**
     * @param {?} event
     * @return {?}
     */
    ThfUploadComponent.prototype.onFileChange = 
    // Função disparada ao selecionar algum arquivo.
    /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        // necessario este tratamento quando para IE, pois nele o change é disparado quando o campo é limpado também
        if (this.calledByCleanInputValue) {
            this.calledByCleanInputValue = false;
            return event.preventDefault();
        }
        /** @type {?} */
        var files = event.target.files;
        this.currentFiles = this.currentFiles || [];
        this.currentFiles = this.parseFiles(files);
        this.updateModel(tslib_1.__spread(this.currentFiles));
        if (this.autoUpload) {
            this.uploadFiles(this.currentFiles);
        }
        this.cleanInputValue();
    };
    // Remove o arquivo passado por parametro da lista dos arquivos correntes.
    // Remove o arquivo passado por parametro da lista dos arquivos correntes.
    /**
     * @param {?} file
     * @return {?}
     */
    ThfUploadComponent.prototype.removeFile = 
    // Remove o arquivo passado por parametro da lista dos arquivos correntes.
    /**
     * @param {?} file
     * @return {?}
     */
    function (file) {
        /** @type {?} */
        var index = this.currentFiles.indexOf(file);
        this.currentFiles.splice(index, 1);
        this.updateModel(tslib_1.__spread(this.currentFiles));
    };
    /** Método responsável por **abrir** a janela para seleção de arquivo(s). */
    /**
     * Método responsável por **abrir** a janela para seleção de arquivo(s).
     * @return {?}
     */
    ThfUploadComponent.prototype.selectFiles = /**
     * Método responsável por **abrir** a janela para seleção de arquivo(s).
     * @return {?}
     */
    function () {
        this.calledByCleanInputValue = false;
        this.inputFile.nativeElement.click();
    };
    /** Método responsável por **enviar** o(s) arquivo(s) selecionado(s). */
    /**
     * Método responsável por **enviar** o(s) arquivo(s) selecionado(s).
     * @return {?}
     */
    ThfUploadComponent.prototype.sendFiles = /**
     * Método responsável por **enviar** o(s) arquivo(s) selecionado(s).
     * @return {?}
     */
    function () {
        if (this.currentFiles && this.currentFiles.length) {
            this.uploadFiles(this.currentFiles);
        }
    };
    // Retorna o tamanho do arquivo em KBytes.
    // Retorna o tamanho do arquivo em KBytes.
    /**
     * @protected
     * @param {?} size
     * @return {?}
     */
    ThfUploadComponent.prototype.getFileSize = 
    // Retorna o tamanho do arquivo em KBytes.
    /**
     * @protected
     * @param {?} size
     * @return {?}
     */
    function (size) {
        /** @type {?} */
        var kbSize = 0;
        if (size) {
            kbSize = Math.ceil(size / 1024);
        }
        return kbSize + " KB";
    };
    // Retorna o thf-icon de acordo com o status do arquivo.
    // Retorna o thf-icon de acordo com o status do arquivo.
    /**
     * @protected
     * @param {?} file
     * @return {?}
     */
    ThfUploadComponent.prototype.getThfIcon = 
    // Retorna o thf-icon de acordo com o status do arquivo.
    /**
     * @protected
     * @param {?} file
     * @return {?}
     */
    function (file) {
        switch (file.status) {
            case ThfUploadStatus.Uploaded:
                return 'thf-icon-ok';
            case ThfUploadStatus.Error:
                return 'thf-icon-close';
            case ThfUploadStatus.None:
                return 'thf-icon-info';
            case ThfUploadStatus.Uploading:
            default:
                return '';
        }
    };
    // Verifica se existe algum arquivo sendo enviado ao serviço.
    // Verifica se existe algum arquivo sendo enviado ao serviço.
    /**
     * @protected
     * @param {?} files
     * @return {?}
     */
    ThfUploadComponent.prototype.hasAnyFileUploading = 
    // Verifica se existe algum arquivo sendo enviado ao serviço.
    /**
     * @protected
     * @param {?} files
     * @return {?}
     */
    function (files) {
        if (files && files.length) {
            return files.some((/**
             * @param {?} file
             * @return {?}
             */
            function (file) { return file.status === ThfUploadStatus.Uploading; }));
        }
        return false;
    };
    // Valida se o status passado por parâmetro é igual ao status do arquivo.
    // Valida se o status passado por parâmetro é igual ao status do arquivo.
    /**
     * @protected
     * @param {?} status
     * @param {?} file
     * @return {?}
     */
    ThfUploadComponent.prototype.isStatusFile = 
    // Valida se o status passado por parâmetro é igual ao status do arquivo.
    /**
     * @protected
     * @param {?} status
     * @param {?} file
     * @return {?}
     */
    function (status, file) {
        return file.status === ThfUploadStatus[status];
    };
    // Caso o componente estiver no modo AutoUpload, o arquivo também será removido da lista.
    // Caso o componente estiver no modo AutoUpload, o arquivo também será removido da lista.
    /**
     * @protected
     * @param {?} file
     * @return {?}
     */
    ThfUploadComponent.prototype.stopUpload = 
    // Caso o componente estiver no modo AutoUpload, o arquivo também será removido da lista.
    /**
     * @protected
     * @param {?} file
     * @return {?}
     */
    function (file) {
        var _this = this;
        this.uploadService.stopRequestByFile(file, (/**
         * @return {?}
         */
        function () {
            if (_this.autoUpload) {
                _this.removeFile(file);
            }
            else {
                _this.stopUploadHandler(file);
            }
        }));
    };
    // Envia os arquivos passados por parâmetro, exceto os que já foram enviados ao serviço.
    // Envia os arquivos passados por parâmetro, exceto os que já foram enviados ao serviço.
    /**
     * @protected
     * @param {?} files
     * @return {?}
     */
    ThfUploadComponent.prototype.uploadFiles = 
    // Envia os arquivos passados por parâmetro, exceto os que já foram enviados ao serviço.
    /**
     * @protected
     * @param {?} files
     * @return {?}
     */
    function (files) {
        var _this = this;
        /** @type {?} */
        var filesFiltered = files.filter((/**
         * @param {?} file
         * @return {?}
         */
        function (file) {
            return file.status !== ThfUploadStatus.Uploaded;
        }));
        this.uploadService.upload(this.url, filesFiltered, this.onUpload, (/**
         * @param {?} file
         * @param {?} percent
         * @return {?}
         */
        function (file, percent) {
            // UPLOADING
            _this.uploadingHandler(file, percent);
        }), (/**
         * @param {?} file
         * @param {?} eventResponse
         * @return {?}
         */
        function (file, eventResponse) {
            // SUCCESS
            _this.successHandler(file);
            _this.onSuccess.emit(eventResponse);
        }), (/**
         * @param {?} file
         * @param {?} eventError
         * @return {?}
         */
        function (file, eventError) {
            // Error
            _this.errorHandler(file);
            _this.onError.emit(eventError);
        }));
    };
    // Atualiza a classe da div, que conter a classe 'thf-upload-filename', para 'thf-upload-filename-loading'.
    // Atualiza a classe da div, que conter a classe 'thf-upload-filename', para 'thf-upload-filename-loading'.
    /**
     * @private
     * @param {?} uid
     * @return {?}
     */
    ThfUploadComponent.prototype.addFileNameClass = 
    // Atualiza a classe da div, que conter a classe 'thf-upload-filename', para 'thf-upload-filename-loading'.
    /**
     * @private
     * @param {?} uid
     * @return {?}
     */
    function (uid) {
        /** @type {?} */
        var divStatus = this.elementRef.nativeElement.querySelector("div[id='" + uid + "'].thf-upload-progress");
        /** @type {?} */
        var fileNameDiv = divStatus.querySelector('.thf-upload-filename');
        fileNameDiv.classList.add('thf-upload-filename-loading');
    };
    /**
     * @private
     * @return {?}
     */
    ThfUploadComponent.prototype.cleanInputValue = /**
     * @private
     * @return {?}
     */
    function () {
        this.calledByCleanInputValue = true;
        this.inputFile.nativeElement.value = '';
    };
    // Função disparada quando é retornado um erro no envio do arquivo.
    // Função disparada quando é retornado um erro no envio do arquivo.
    /**
     * @private
     * @param {?} file
     * @return {?}
     */
    ThfUploadComponent.prototype.errorHandler = 
    // Função disparada quando é retornado um erro no envio do arquivo.
    /**
     * @private
     * @param {?} file
     * @return {?}
     */
    function (file) {
        file.status = ThfUploadStatus.Error;
        this.setProgressStatus(file.uid, 0, false);
        this.setUploadStatus(file, 'thf-upload-progress-error', 100);
    };
    // Remove a classe 'thf-upload-filename-loading' da div que conter a classe 'thf-upload-filename'.
    // Remove a classe 'thf-upload-filename-loading' da div que conter a classe 'thf-upload-filename'.
    /**
     * @private
     * @param {?} uid
     * @return {?}
     */
    ThfUploadComponent.prototype.removeFileNameClass = 
    // Remove a classe 'thf-upload-filename-loading' da div que conter a classe 'thf-upload-filename'.
    /**
     * @private
     * @param {?} uid
     * @return {?}
     */
    function (uid) {
        /** @type {?} */
        var divStatus = this.elementRef.nativeElement.querySelector("div[id='" + uid + "'].thf-upload-progress");
        /** @type {?} */
        var fileNameDiv = divStatus.querySelector('.thf-upload-filename');
        fileNameDiv.classList.remove('thf-upload-filename-loading');
    };
    // Atualiza o status do progresso do envio do arquivo.
    // Atualiza o status do progresso do envio do arquivo.
    /**
     * @private
     * @param {?} uid
     * @param {?} percent
     * @param {?} isShow
     * @return {?}
     */
    ThfUploadComponent.prototype.setProgressStatus = 
    // Atualiza o status do progresso do envio do arquivo.
    /**
     * @private
     * @param {?} uid
     * @param {?} percent
     * @param {?} isShow
     * @return {?}
     */
    function (uid, percent, isShow) {
        /** @type {?} */
        var divStatus = this.elementRef.nativeElement.querySelector("div[id='" + uid + "'].thf-upload-progress");
        /** @type {?} */
        var divProgress = divStatus.querySelector('.thf-upload-progress-status');
        /** @type {?} */
        var isDisplay = isShow ? 'block' : 'none';
        divProgress.setAttribute('style', "display: " + isDisplay + ";");
        divProgress.setAttribute('style', "width: " + percent + "%;");
    };
    // Atualiza o status do envio de arquivos.
    // Atualiza o status do envio de arquivos.
    /**
     * @private
     * @param {?} file
     * @param {?} className
     * @param {?} percent
     * @return {?}
     */
    ThfUploadComponent.prototype.setUploadStatus = 
    // Atualiza o status do envio de arquivos.
    /**
     * @private
     * @param {?} file
     * @param {?} className
     * @param {?} percent
     * @return {?}
     */
    function (file, className, percent) {
        /** @type {?} */
        var uid = file.uid;
        /** @type {?} */
        var divStatus = this.elementRef.nativeElement.querySelector("div[id='" + uid + "'].thf-upload-progress");
        divStatus.classList.remove('thf-upload-progress-error', 'thf-upload-progress-success');
        divStatus.classList.add(className);
        if (percent > 5 && file.status !== ThfUploadStatus.None) {
            this.addFileNameClass(uid);
        }
    };
    // Função disparada ao parar um envio de arquivo.
    // Função disparada ao parar um envio de arquivo.
    /**
     * @private
     * @param {?} file
     * @return {?}
     */
    ThfUploadComponent.prototype.stopUploadHandler = 
    // Função disparada ao parar um envio de arquivo.
    /**
     * @private
     * @param {?} file
     * @return {?}
     */
    function (file) {
        file.status = ThfUploadStatus.None;
        this.removeFileNameClass(file.uid);
        this.setProgressStatus(file.uid, 0, false);
        this.setUploadStatus(file, 'thf-upload-progress', 100);
    };
    // Função disparada quando o envio é realizado com sucesso.
    // Função disparada quando o envio é realizado com sucesso.
    /**
     * @private
     * @param {?} file
     * @return {?}
     */
    ThfUploadComponent.prototype.successHandler = 
    // Função disparada quando o envio é realizado com sucesso.
    /**
     * @private
     * @param {?} file
     * @return {?}
     */
    function (file) {
        file.status = ThfUploadStatus.Uploaded;
        this.setProgressStatus(file.uid, 0, false);
        this.setUploadStatus(file, 'thf-upload-progress-success', 100);
    };
    // Atualiza o ngModel para os arquivos passados por parâmetro.
    // Atualiza o ngModel para os arquivos passados por parâmetro.
    /**
     * @private
     * @param {?} files
     * @return {?}
     */
    ThfUploadComponent.prototype.updateModel = 
    // Atualiza o ngModel para os arquivos passados por parâmetro.
    /**
     * @private
     * @param {?} files
     * @return {?}
     */
    function (files) {
        this.onModelChange ? this.onModelChange(files) : this.ngModelChange.emit(files);
    };
    // Função disparada enquanto o arquivo está sendo enviado ao serviço.
    // Função disparada enquanto o arquivo está sendo enviado ao serviço.
    /**
     * @private
     * @param {?} file
     * @param {?} percent
     * @return {?}
     */
    ThfUploadComponent.prototype.uploadingHandler = 
    // Função disparada enquanto o arquivo está sendo enviado ao serviço.
    /**
     * @private
     * @param {?} file
     * @param {?} percent
     * @return {?}
     */
    function (file, percent) {
        file.status = ThfUploadStatus.Uploading;
        this.setProgressStatus(file.uid, percent, true);
        this.setUploadStatus(file, 'thf-upload-progress', percent);
    };
    ThfUploadComponent.decorators = [
        { type: Component, args: [{
                    selector: 'thf-upload',
                    template: "<thf-field-container\n  [t-label]=\"label\"\n  [t-help]=\"help\"\n  [t-optional]=\"!required && optional\">\n\n  <div class=\"thf-upload\">\n    <input\n      #inputFile\n      class=\"thf-upload-input\"\n      type=\"file\"\n      [accept]=\"allowedExtensions\"\n      [attr.name]=\"name\"\n      [disabled]=\"isDisabled\"\n      [multiple]=\"isMultiple\"\n      [required]=\"required\"\n      (change)=\"onFileChange($event)\">\n\n    <thf-button\n      *ngIf=\"!hideSelectButton\"\n      class=\"thf-upload-button\"\n      for=\"file\"\n      [t-disabled]=\"isDisabled\"\n      [t-label]=\"literals.selectFile\"\n      (t-click)=\"selectFiles()\">\n    </thf-button>\n\n    <div class=\"thf-upload-progress\" *ngFor=\"let file of currentFiles\" [id]=\"file.uid\">\n      <div class=\"thf-upload-progress-status\"></div>\n      <div class=\"thf-upload-filename-foreground\">\n\n        <div class=\"thf-upload-filename\">\n          <span class=\"thf-icon {{ getThfIcon(file) }}\"></span> {{ file.name }} - {{ getFileSize(file.size) }}\n        </div>\n\n        <div class=\"thf-upload-group-actions\">\n          <span\n            *ngIf=\"isStatusFile('None', file) || isStatusFile('Error', file)\"\n            class=\"thf-upload-action\"\n            (click)=\"removeFile(file)\">\n            {{ literals.deleteFile }}\n          </span>\n\n          <span\n            *ngIf=\"isStatusFile('Uploading', file)\"\n            class=\"thf-upload-action\"\n            (click)=\"stopUpload(file)\">\n            {{ literals.cancel }}\n          </span>\n\n          <span\n            *ngIf=\"isStatusFile('Error', file)\"\n            class=\"thf-upload-action\"\n            (click)=\"uploadFiles([file])\">\n\n            {{ literals.tryAgain }}\n          </span>\n        </div>\n\n      </div>\n    </div>\n\n    <thf-button\n      *ngIf=\"displaySendButton\"\n      t-type=\"primary\"\n      [t-disabled]=\"hasAnyFileUploading(currentFiles)\"\n      [t-label]=\"literals.startSending\"\n      (t-click)=\"uploadFiles(currentFiles)\">\n    </thf-button>\n\n  </div>\n\n</thf-field-container>\n",
                    providers: [
                        ThfUploadService,
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return ThfUploadComponent; })),
                            multi: true,
                        },
                        {
                            provide: NG_VALIDATORS,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return ThfUploadComponent; })),
                            multi: true,
                        }
                    ]
                }] }
    ];
    /** @nocollapse */
    ThfUploadComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: ThfUploadService }
    ]; };
    ThfUploadComponent.propDecorators = {
        inputFile: [{ type: ViewChild, args: ['inputFile', { read: ElementRef, static: true },] }]
    };
    return ThfUploadComponent;
}(ThfUploadBaseComponent));
export { ThfUploadComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    ThfUploadComponent.prototype.calledByCleanInputValue;
    /**
     * @type {?}
     * @private
     */
    ThfUploadComponent.prototype.inputFile;
    /**
     * @type {?}
     * @private
     */
    ThfUploadComponent.prototype.elementRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLXVwbG9hZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdG90dnMvdGhmLXVpLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvdGhmLWZpZWxkL3RoZi11cGxvYWQvdGhmLXVwbG9hZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzdFLE9BQU8sRUFBRSxhQUFhLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVsRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUVyRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUN4RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMkIzRDtJQWlCd0MsOENBQXNCO0lBTTVELDRCQUFvQixVQUFzQixFQUFFLGFBQStCO1FBQTNFLFlBQ0Usa0JBQU0sYUFBYSxDQUFDLFNBQ3JCO1FBRm1CLGdCQUFVLEdBQVYsVUFBVSxDQUFZO1FBSmxDLDZCQUF1QixHQUFZLEtBQUssQ0FBQzs7SUFNakQsQ0FBQztJQUVELHNCQUFJLGlEQUFpQjs7OztRQUFyQjs7Z0JBQ1EsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLElBQUksRUFBRTtZQUM1QyxPQUFPLENBQUMsSUFBSSxDQUFDLGNBQWMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUMxRyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLGtEQUFrQjs7OztRQUF0QjtZQUNFLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsWUFBWSxD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QWxCLENBQWtCLEVBQUM7NEJBQ2pELEtBQUssRUFBRSxJQUFJO3lCQUNaO3dCQUNEOzRCQUNFLE9BQU8sRUFBRSxhQUFhOzRCQUN0QixXQUFXLEVBQUUsVUFBVTs7OzRCQUFDLGNBQU0sT0FBQSxrQkFBa0IsRUFBbEIsQ0FBa0IsRUFBQzs0QkFDakQsS0FBSyxFQUFFLElBQUk7eUJBQ1o7cUJBQ0Y7aUJBQ0Y7Ozs7Z0JBakRtQixVQUFVO2dCQUtyQixnQkFBZ0I7Ozs0QkFpRHRCLFNBQVMsU0FBQyxXQUFXLEVBQUUsRUFBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7O0lBdU8zRCx5QkFBQztDQUFBLEFBNVBELENBaUJ3QyxzQkFBc0IsR0EyTzdEO1NBM09ZLGtCQUFrQjs7Ozs7O0lBRTdCLHFEQUFpRDs7Ozs7SUFFakQsdUNBQXlGOzs7OztJQUU3RSx3Q0FBOEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIGZvcndhcmRSZWYsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTkdfVkFMSURBVE9SUywgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmltcG9ydCB7IFRoZlVwbG9hZEJhc2VDb21wb25lbnQgfSBmcm9tICcuL3RoZi11cGxvYWQtYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgVGhmVXBsb2FkRmlsZSB9IGZyb20gJy4vdGhmLXVwbG9hZC1maWxlJztcbmltcG9ydCB7IFRoZlVwbG9hZFNlcnZpY2UgfSBmcm9tICcuL3RoZi11cGxvYWQuc2VydmljZSc7XG5pbXBvcnQgeyBUaGZVcGxvYWRTdGF0dXMgfSBmcm9tICcuL3RoZi11cGxvYWQtc3RhdHVzLmVudW0nO1xuXG4vKipcbiAqIEBkb2NzRXh0ZW5kcyBUaGZVcGxvYWRCYXNlQ29tcG9uZW50XG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwidGhmLXVwbG9hZC1iYXNpY1wiIHRpdGxlPVwiVG90dnMgVXBsb2FkIEJhc2ljXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJzYW1wbGUtdGhmLXVwbG9hZC1iYXNpYy9zYW1wbGUtdGhmLXVwbG9hZC1iYXNpYy5jb21wb25lbnQuaHRtbFwiPiA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJzYW1wbGUtdGhmLXVwbG9hZC1iYXNpYy9zYW1wbGUtdGhmLXVwbG9hZC1iYXNpYy5jb21wb25lbnQudHNcIj4gPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJ0aGYtdXBsb2FkLWxhYnNcIiB0aXRsZT1cIlRvdHZzIFVwbG9hZCBMYWJzXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJzYW1wbGUtdGhmLXVwbG9hZC1sYWJzL3NhbXBsZS10aGYtdXBsb2FkLWxhYnMuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwic2FtcGxlLXRoZi11cGxvYWQtbGFicy9zYW1wbGUtdGhmLXVwbG9hZC1sYWJzLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInRoZi11cGxvYWQtcmVzdW1lXCIgdGl0bGU9XCJUb3R2cyBVcGxvYWQgLSBSZXN1bWVcIj5cbiAqICAgPGZpbGUgbmFtZT1cInNhbXBsZS10aGYtdXBsb2FkLXJlc3VtZS9zYW1wbGUtdGhmLXVwbG9hZC1yZXN1bWUuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwic2FtcGxlLXRoZi11cGxvYWQtcmVzdW1lL3NhbXBsZS10aGYtdXBsb2FkLXJlc3VtZS5jb21wb25lbnQudHNcIj4gPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJ0aGYtdXBsb2FkLXJzXCIgdGl0bGU9XCJUb3R2cyBVcGxvYWQgLSBSZWFsaXplICYgU2hvd1wiPlxuICogICA8ZmlsZSBuYW1lPVwic2FtcGxlLXRoZi11cGxvYWQtcnMvc2FtcGxlLXRoZi11cGxvYWQtcnMuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwic2FtcGxlLXRoZi11cGxvYWQtcnMvc2FtcGxlLXRoZi11cGxvYWQtcnMuY29tcG9uZW50LnRzXCI+IDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGhmLXVwbG9hZCcsXG4gIHRlbXBsYXRlVXJsOiAnLi90aGYtdXBsb2FkLmNvbXBvbmVudC5odG1sJyxcbiAgcHJvdmlkZXJzOiBbXG4gICAgVGhmVXBsb2FkU2VydmljZSxcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFRoZlVwbG9hZENvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTElEQVRPUlMsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBUaGZVcGxvYWRDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWUsXG4gICAgfVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIFRoZlVwbG9hZENvbXBvbmVudCBleHRlbmRzIFRoZlVwbG9hZEJhc2VDb21wb25lbnQge1xuXG4gIHByaXZhdGUgY2FsbGVkQnlDbGVhbklucHV0VmFsdWU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBAVmlld0NoaWxkKCdpbnB1dEZpbGUnLCB7cmVhZDogRWxlbWVudFJlZiwgc3RhdGljOiB0cnVlIH0pIHByaXZhdGUgaW5wdXRGaWxlOiBFbGVtZW50UmVmO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgdXBsb2FkU2VydmljZTogVGhmVXBsb2FkU2VydmljZSkge1xuICAgIHN1cGVyKHVwbG9hZFNlcnZpY2UpO1xuICB9XG5cbiAgZ2V0IGRpc3BsYXlTZW5kQnV0dG9uKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGN1cnJlbnRGaWxlcyA9IHRoaXMuY3VycmVudEZpbGVzIHx8IFtdO1xuICAgIHJldHVybiAhdGhpcy5oaWRlU2VuZEJ1dHRvbiAmJiAhdGhpcy5hdXRvVXBsb2FkICYmIChjdXJyZW50RmlsZXMubGVuZ3RoID4gMCAmJiB0aGlzLmhhc0ZpbGVOb3RVcGxvYWRlZCk7XG4gIH1cblxuICBnZXQgaGFzRmlsZU5vdFVwbG9hZGVkKCk6IGJvb2xlYW4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuY3VycmVudEZpbGVzKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEZpbGVzLnNvbWUoZmlsZSA9PiBmaWxlLnN0YXR1cyAhPT0gVGhmVXBsb2FkU3RhdHVzLlVwbG9hZGVkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXQgaXNEaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICBjb25zdCBjdXJyZW50RmlsZXMgPSB0aGlzLmN1cnJlbnRGaWxlcyB8fCBbXTtcblxuICAgIHJldHVybiB0aGlzLmhhc0FueUZpbGVVcGxvYWRpbmcodGhpcy5jdXJyZW50RmlsZXMpIHx8XG4gICAgIXRoaXMudXJsIHx8XG4gICAgdGhpcy5kaXNhYmxlZCB8fFxuICAgIHRoaXMuaXNFeGNlZWRlZEZpbGVMaW1pdChjdXJyZW50RmlsZXMubGVuZ3RoKTtcbiAgfVxuXG4gIC8qKiBNw6l0b2RvIHJlc3BvbnPDoXZlbCBwb3IgKipsaW1wYXIqKiBvKHMpIGFycXVpdm8ocykgc2VsZWNpb25hZG8ocykuICovXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuY3VycmVudEZpbGVzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudXBkYXRlTW9kZWwoW10pO1xuICAgIHRoaXMuY2xlYW5JbnB1dFZhbHVlKCk7XG4gIH1cblxuICAvLyBGdW7Dp8OjbyBkaXNwYXJhZGEgYW8gc2VsZWNpb25hciBhbGd1bSBhcnF1aXZvLlxuICBvbkZpbGVDaGFuZ2UoZXZlbnQpOiB2b2lkIHtcbiAgICAvLyBuZWNlc3NhcmlvIGVzdGUgdHJhdGFtZW50byBxdWFuZG8gcGFyYSBJRSwgcG9pcyBuZWxlIG8gY2hhbmdlIMOpIGRpc3BhcmFkbyBxdWFuZG8gbyBjYW1wbyDDqSBsaW1wYWRvIHRhbWLDqW1cbiAgICBpZiAodGhpcy5jYWxsZWRCeUNsZWFuSW5wdXRWYWx1ZSkge1xuICAgICAgdGhpcy5jYWxsZWRCeUNsZWFuSW5wdXRWYWx1ZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsZXMgPSBldmVudC50YXJnZXQuZmlsZXM7XG4gICAgdGhpcy5jdXJyZW50RmlsZXMgPSB0aGlzLmN1cnJlbnRGaWxlcyB8fCBbXTtcblxuICAgIHRoaXMuY3VycmVudEZpbGVzID0gdGhpcy5wYXJzZUZpbGVzKGZpbGVzKTtcblxuICAgIHRoaXMudXBkYXRlTW9kZWwoWy4uLnRoaXMuY3VycmVudEZpbGVzXSk7XG5cbiAgICBpZiAodGhpcy5hdXRvVXBsb2FkKSB7XG4gICAgICB0aGlzLnVwbG9hZEZpbGVzKHRoaXMuY3VycmVudEZpbGVzKTtcbiAgICB9XG5cbiAgICB0aGlzLmNsZWFuSW5wdXRWYWx1ZSgpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIG8gYXJxdWl2byBwYXNzYWRvIHBvciBwYXJhbWV0cm8gZGEgbGlzdGEgZG9zIGFycXVpdm9zIGNvcnJlbnRlcy5cbiAgcmVtb3ZlRmlsZShmaWxlKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmN1cnJlbnRGaWxlcy5pbmRleE9mKGZpbGUpO1xuICAgIHRoaXMuY3VycmVudEZpbGVzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICB0aGlzLnVwZGF0ZU1vZGVsKFsuLi50aGlzLmN1cnJlbnRGaWxlc10pO1xuICB9XG5cbiAgLyoqIE3DqXRvZG8gcmVzcG9uc8OhdmVsIHBvciAqKmFicmlyKiogYSBqYW5lbGEgcGFyYSBzZWxlw6fDo28gZGUgYXJxdWl2byhzKS4gKi9cbiAgc2VsZWN0RmlsZXMoKTogdm9pZCB7XG4gICAgdGhpcy5jYWxsZWRCeUNsZWFuSW5wdXRWYWx1ZSA9IGZhbHNlO1xuICAgIHRoaXMuaW5wdXRGaWxlLm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcbiAgfVxuXG4gIC8qKiBNw6l0b2RvIHJlc3BvbnPDoXZlbCBwb3IgKiplbnZpYXIqKiBvKHMpIGFycXVpdm8ocykgc2VsZWNpb25hZG8ocykuICovXG4gIHNlbmRGaWxlcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jdXJyZW50RmlsZXMgJiYgdGhpcy5jdXJyZW50RmlsZXMubGVuZ3RoKSB7XG5cbiAgICAgIHRoaXMudXBsb2FkRmlsZXModGhpcy5jdXJyZW50RmlsZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJldG9ybmEgbyB0YW1hbmhvIGRvIGFycXVpdm8gZW0gS0J5dGVzLlxuICBwcm90ZWN0ZWQgZ2V0RmlsZVNpemUoc2l6ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBsZXQga2JTaXplID0gMDtcblxuICAgIGlmIChzaXplKSB7XG4gICAgICAgIGtiU2l6ZSA9IE1hdGguY2VpbChzaXplIC8gMTAyNCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAke2tiU2l6ZX0gS0JgO1xuICB9XG5cbiAgLy8gUmV0b3JuYSBvIHRoZi1pY29uIGRlIGFjb3JkbyBjb20gbyBzdGF0dXMgZG8gYXJxdWl2by5cbiAgcHJvdGVjdGVkIGdldFRoZkljb24oZmlsZTogVGhmVXBsb2FkRmlsZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChmaWxlLnN0YXR1cykge1xuICAgICAgY2FzZSBUaGZVcGxvYWRTdGF0dXMuVXBsb2FkZWQ6XG4gICAgICAgIHJldHVybiAndGhmLWljb24tb2snO1xuXG4gICAgICBjYXNlIFRoZlVwbG9hZFN0YXR1cy5FcnJvcjpcbiAgICAgICAgcmV0dXJuICd0aGYtaWNvbi1jbG9zZSc7XG5cbiAgICAgIGNhc2UgVGhmVXBsb2FkU3RhdHVzLk5vbmU6XG4gICAgICAgIHJldHVybiAndGhmLWljb24taW5mbyc7XG5cbiAgICAgIGNhc2UgVGhmVXBsb2FkU3RhdHVzLlVwbG9hZGluZzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cblxuICAvLyBWZXJpZmljYSBzZSBleGlzdGUgYWxndW0gYXJxdWl2byBzZW5kbyBlbnZpYWRvIGFvIHNlcnZpw6dvLlxuICBwcm90ZWN0ZWQgaGFzQW55RmlsZVVwbG9hZGluZyhmaWxlczogQXJyYXk8VGhmVXBsb2FkRmlsZT4pIHtcbiAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmlsZXMuc29tZShmaWxlID0+IGZpbGUuc3RhdHVzID09PSBUaGZVcGxvYWRTdGF0dXMuVXBsb2FkaW5nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBWYWxpZGEgc2UgbyBzdGF0dXMgcGFzc2FkbyBwb3IgcGFyw6JtZXRybyDDqSBpZ3VhbCBhbyBzdGF0dXMgZG8gYXJxdWl2by5cbiAgcHJvdGVjdGVkIGlzU3RhdHVzRmlsZShzdGF0dXM6IHN0cmluZywgZmlsZTogVGhmVXBsb2FkRmlsZSkge1xuICAgIHJldHVybiBmaWxlLnN0YXR1cyA9PT0gVGhmVXBsb2FkU3RhdHVzW3N0YXR1c107XG4gIH1cblxuICAvLyBDYXNvIG8gY29tcG9uZW50ZSBlc3RpdmVyIG5vIG1vZG8gQXV0b1VwbG9hZCwgbyBhcnF1aXZvIHRhbWLDqW0gc2Vyw6EgcmVtb3ZpZG8gZGEgbGlzdGEuXG4gIHByb3RlY3RlZCBzdG9wVXBsb2FkKGZpbGU6IFRoZlVwbG9hZEZpbGUpIHtcbiAgICB0aGlzLnVwbG9hZFNlcnZpY2Uuc3RvcFJlcXVlc3RCeUZpbGUoZmlsZSwgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuYXV0b1VwbG9hZCkge1xuICAgICAgICB0aGlzLnJlbW92ZUZpbGUoZmlsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0b3BVcGxvYWRIYW5kbGVyKGZpbGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gRW52aWEgb3MgYXJxdWl2b3MgcGFzc2Fkb3MgcG9yIHBhcsOibWV0cm8sIGV4Y2V0byBvcyBxdWUgasOhIGZvcmFtIGVudmlhZG9zIGFvIHNlcnZpw6dvLlxuICBwcm90ZWN0ZWQgdXBsb2FkRmlsZXMoZmlsZXM6IEFycmF5PFRoZlVwbG9hZEZpbGU+KSB7XG4gICAgY29uc3QgZmlsZXNGaWx0ZXJlZCA9IGZpbGVzLmZpbHRlcihmaWxlID0+IHtcbiAgICAgIHJldHVybiBmaWxlLnN0YXR1cyAhPT0gVGhmVXBsb2FkU3RhdHVzLlVwbG9hZGVkO1xuICAgIH0pO1xuXG4gICAgdGhpcy51cGxvYWRTZXJ2aWNlLnVwbG9hZCh0aGlzLnVybCwgZmlsZXNGaWx0ZXJlZCwgdGhpcy5vblVwbG9hZCxcbiAgICAgIChmaWxlLCBwZXJjZW50KTogYW55ID0+IHtcbiAgICAgICAgLy8gVVBMT0FESU5HXG4gICAgICAgIHRoaXMudXBsb2FkaW5nSGFuZGxlcihmaWxlLCBwZXJjZW50KTtcblxuICAgICAgfSwgKGZpbGUsIGV2ZW50UmVzcG9uc2UpOiBhbnkgPT4ge1xuICAgICAgICAvLyBTVUNDRVNTXG4gICAgICAgIHRoaXMuc3VjY2Vzc0hhbmRsZXIoZmlsZSk7XG4gICAgICAgIHRoaXMub25TdWNjZXNzLmVtaXQoZXZlbnRSZXNwb25zZSk7XG5cbiAgICAgIH0sIChmaWxlLCBldmVudEVycm9yKTogYW55ID0+IHtcbiAgICAgICAgLy8gRXJyb3JcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXIoZmlsZSk7XG4gICAgICAgIHRoaXMub25FcnJvci5lbWl0KGV2ZW50RXJyb3IpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQXR1YWxpemEgYSBjbGFzc2UgZGEgZGl2LCBxdWUgY29udGVyIGEgY2xhc3NlICd0aGYtdXBsb2FkLWZpbGVuYW1lJywgcGFyYSAndGhmLXVwbG9hZC1maWxlbmFtZS1sb2FkaW5nJy5cbiAgcHJpdmF0ZSBhZGRGaWxlTmFtZUNsYXNzKHVpZDogc3RyaW5nKSB7XG4gICAgY29uc3QgZGl2U3RhdHVzID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihgZGl2W2lkPScke3VpZH0nXS50aGYtdXBsb2FkLXByb2dyZXNzYCk7XG4gICAgY29uc3QgZmlsZU5hbWVEaXYgPSBkaXZTdGF0dXMucXVlcnlTZWxlY3RvcignLnRoZi11cGxvYWQtZmlsZW5hbWUnKTtcbiAgICBmaWxlTmFtZURpdi5jbGFzc0xpc3QuYWRkKCd0aGYtdXBsb2FkLWZpbGVuYW1lLWxvYWRpbmcnKTtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYW5JbnB1dFZhbHVlKCkge1xuICAgIHRoaXMuY2FsbGVkQnlDbGVhbklucHV0VmFsdWUgPSB0cnVlO1xuICAgIHRoaXMuaW5wdXRGaWxlLm5hdGl2ZUVsZW1lbnQudmFsdWUgPSAnJztcbiAgfVxuXG4gIC8vIEZ1bsOnw6NvIGRpc3BhcmFkYSBxdWFuZG8gw6kgcmV0b3JuYWRvIHVtIGVycm8gbm8gZW52aW8gZG8gYXJxdWl2by5cbiAgcHJpdmF0ZSBlcnJvckhhbmRsZXIoZmlsZTogVGhmVXBsb2FkRmlsZSkge1xuICAgIGZpbGUuc3RhdHVzID0gVGhmVXBsb2FkU3RhdHVzLkVycm9yO1xuICAgIHRoaXMuc2V0UHJvZ3Jlc3NTdGF0dXMoZmlsZS51aWQsIDAsIGZhbHNlKTtcbiAgICB0aGlzLnNldFVwbG9hZFN0YXR1cyhmaWxlLCAndGhmLXVwbG9hZC1wcm9ncmVzcy1lcnJvcicsIDEwMCk7XG4gIH1cblxuICAvLyBSZW1vdmUgYSBjbGFzc2UgJ3RoZi11cGxvYWQtZmlsZW5hbWUtbG9hZGluZycgZGEgZGl2IHF1ZSBjb250ZXIgYSBjbGFzc2UgJ3RoZi11cGxvYWQtZmlsZW5hbWUnLlxuICBwcml2YXRlIHJlbW92ZUZpbGVOYW1lQ2xhc3ModWlkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBkaXZTdGF0dXMgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKGBkaXZbaWQ9JyR7dWlkfSddLnRoZi11cGxvYWQtcHJvZ3Jlc3NgKTtcbiAgICBjb25zdCBmaWxlTmFtZURpdiA9IGRpdlN0YXR1cy5xdWVyeVNlbGVjdG9yKCcudGhmLXVwbG9hZC1maWxlbmFtZScpO1xuICAgIGZpbGVOYW1lRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ3RoZi11cGxvYWQtZmlsZW5hbWUtbG9hZGluZycpO1xuICB9XG5cbiAgLy8gQXR1YWxpemEgbyBzdGF0dXMgZG8gcHJvZ3Jlc3NvIGRvIGVudmlvIGRvIGFycXVpdm8uXG4gIHByaXZhdGUgc2V0UHJvZ3Jlc3NTdGF0dXModWlkOiBzdHJpbmcsIHBlcmNlbnQ6IG51bWJlciwgaXNTaG93OiBib29sZWFuKSB7XG4gICAgY29uc3QgZGl2U3RhdHVzID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihgZGl2W2lkPScke3VpZH0nXS50aGYtdXBsb2FkLXByb2dyZXNzYCk7XG4gICAgY29uc3QgZGl2UHJvZ3Jlc3MgPSBkaXZTdGF0dXMucXVlcnlTZWxlY3RvcignLnRoZi11cGxvYWQtcHJvZ3Jlc3Mtc3RhdHVzJyk7XG4gICAgY29uc3QgaXNEaXNwbGF5ID0gaXNTaG93ID8gJ2Jsb2NrJyA6ICdub25lJztcblxuICAgIGRpdlByb2dyZXNzLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgZGlzcGxheTogJHtpc0Rpc3BsYXl9O2ApO1xuICAgIGRpdlByb2dyZXNzLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgd2lkdGg6ICR7cGVyY2VudH0lO2ApO1xuICB9XG5cbiAgLy8gQXR1YWxpemEgbyBzdGF0dXMgZG8gZW52aW8gZGUgYXJxdWl2b3MuXG4gIHByaXZhdGUgc2V0VXBsb2FkU3RhdHVzKGZpbGUsIGNsYXNzTmFtZTogc3RyaW5nLCBwZXJjZW50OiBudW1iZXIpIHtcbiAgICBjb25zdCB1aWQgPSBmaWxlLnVpZDtcbiAgICBjb25zdCBkaXZTdGF0dXMgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKGBkaXZbaWQ9JyR7dWlkfSddLnRoZi11cGxvYWQtcHJvZ3Jlc3NgKTtcbiAgICBkaXZTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZSgndGhmLXVwbG9hZC1wcm9ncmVzcy1lcnJvcicsICd0aGYtdXBsb2FkLXByb2dyZXNzLXN1Y2Nlc3MnKTtcbiAgICBkaXZTdGF0dXMuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXG4gICAgaWYgKHBlcmNlbnQgPiA1ICYmIGZpbGUuc3RhdHVzICE9PSBUaGZVcGxvYWRTdGF0dXMuTm9uZSkge1xuICAgICAgdGhpcy5hZGRGaWxlTmFtZUNsYXNzKHVpZCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRnVuw6fDo28gZGlzcGFyYWRhIGFvIHBhcmFyIHVtIGVudmlvIGRlIGFycXVpdm8uXG4gIHByaXZhdGUgc3RvcFVwbG9hZEhhbmRsZXIoZmlsZTogVGhmVXBsb2FkRmlsZSkge1xuICAgIGZpbGUuc3RhdHVzID0gVGhmVXBsb2FkU3RhdHVzLk5vbmU7XG4gICAgdGhpcy5yZW1vdmVGaWxlTmFtZUNsYXNzKGZpbGUudWlkKTtcbiAgICB0aGlzLnNldFByb2dyZXNzU3RhdHVzKGZpbGUudWlkLCAwLCBmYWxzZSk7XG4gICAgdGhpcy5zZXRVcGxvYWRTdGF0dXMoZmlsZSwgJ3RoZi11cGxvYWQtcHJvZ3Jlc3MnLCAxMDApO1xuICB9XG5cbiAgLy8gRnVuw6fDo28gZGlzcGFyYWRhIHF1YW5kbyBvIGVudmlvIMOpIHJlYWxpemFkbyBjb20gc3VjZXNzby5cbiAgcHJpdmF0ZSBzdWNjZXNzSGFuZGxlcihmaWxlOiBUaGZVcGxvYWRGaWxlKSB7XG4gICAgZmlsZS5zdGF0dXMgPSBUaGZVcGxvYWRTdGF0dXMuVXBsb2FkZWQ7XG4gICAgdGhpcy5zZXRQcm9ncmVzc1N0YXR1cyhmaWxlLnVpZCwgMCwgZmFsc2UpO1xuICAgIHRoaXMuc2V0VXBsb2FkU3RhdHVzKGZpbGUsICd0aGYtdXBsb2FkLXByb2dyZXNzLXN1Y2Nlc3MnLCAxMDApO1xuICB9XG5cbiAgLy8gQXR1YWxpemEgbyBuZ01vZGVsIHBhcmEgb3MgYXJxdWl2b3MgcGFzc2Fkb3MgcG9yIHBhcsOibWV0cm8uXG4gIHByaXZhdGUgdXBkYXRlTW9kZWwoZmlsZXM6IEFycmF5PFRoZlVwbG9hZEZpbGU+KSB7XG4gICAgdGhpcy5vbk1vZGVsQ2hhbmdlID8gdGhpcy5vbk1vZGVsQ2hhbmdlKGZpbGVzKSA6IHRoaXMubmdNb2RlbENoYW5nZS5lbWl0KGZpbGVzKTtcbiAgfVxuXG4gIC8vIEZ1bsOnw6NvIGRpc3BhcmFkYSBlbnF1YW50byBvIGFycXVpdm8gZXN0w6Egc2VuZG8gZW52aWFkbyBhbyBzZXJ2acOnby5cbiAgcHJpdmF0ZSB1cGxvYWRpbmdIYW5kbGVyKGZpbGU6IFRoZlVwbG9hZEZpbGUsIHBlcmNlbnQ6IG51bWJlcikge1xuICAgIGZpbGUuc3RhdHVzID0gVGhmVXBsb2FkU3RhdHVzLlVwbG9hZGluZztcbiAgICB0aGlzLnNldFByb2dyZXNzU3RhdHVzKGZpbGUudWlkLCBwZXJjZW50LCB0cnVlKTtcbiAgICB0aGlzLnNldFVwbG9hZFN0YXR1cyhmaWxlLCAndGhmLXVwbG9hZC1wcm9ncmVzcycsIHBlcmNlbnQpO1xuICB9XG5cbn1cbiJdfQ==