/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewChild } from '@angular/core';
import { NgForm } from '@angular/forms';
import { Router } from '@angular/router';
import { isExternalLink } from '../../utils/util';
import { ThfI18nPipe, ThfModalComponent } from '@totvs/thf-ui';
import { ThfModalPasswordRecoveryBaseComponent } from './thf-modal-password-recovery-base.component';
import { ThfModalPasswordRecoveryModalContent } from './enums/thf-modal-password-recovery-modal-content.enum';
import { ThfModalPasswordRecoveryService } from './thf-modal-password-recovery.service';
import { ThfModalPasswordRecoveryType } from './enums/thf-modal-password-recovery-type.enum';
/**
 * \@docsExtends ThfModalPasswordRecoveryBaseComponent
 *
 * \@example
 *
 * <example name="thf-modal-password-recovery-basic" title="Totvs Modal Password Recovery Basic">
 *  <file name="sample-thf-modal-password-recovery-basic/sample-thf-modal-password-recovery-basic.component.html"> </file>
 *  <file name="sample-thf-modal-password-recovery-basic/sample-thf-modal-password-recovery-basic.component.ts"> </file>
 * </example>
 *
 * <example name="thf-modal-password-recovery-labs" title="Totvs Modal Password Recovery Labs">
 *  <file name="sample-thf-modal-password-recovery-labs/sample-thf-modal-password-recovery-labs.component.html"> </file>
 *  <file name="sample-thf-modal-password-recovery-labs/sample-thf-modal-password-recovery-labs.component.ts"> </file>
 * </example>
 *
 * <example name="thf-modal-password-recovery-request" title="Totvs Modal Password Recovery Request">
 *  <file name="sample-thf-modal-password-recovery-request/sample-thf-modal-password-recovery-request.component.html"> </file>
 *  <file name="sample-thf-modal-password-recovery-request/sample-thf-modal-password-recovery-request.component.ts"> </file>
 * </example>
 */
var ThfModalPasswordRecoveryComponent = /** @class */ (function (_super) {
    tslib_1.__extends(ThfModalPasswordRecoveryComponent, _super);
    function ThfModalPasswordRecoveryComponent(router, thfI18nPipe, thfModalPasswordRecoveryService) {
        var _this = _super.call(this) || this;
        _this.router = router;
        _this.thfI18nPipe = thfI18nPipe;
        _this.thfModalPasswordRecoveryService = thfModalPasswordRecoveryService;
        _this.chosenTypeFormOption = ThfModalPasswordRecoveryType.Email;
        _this.codeMask = '9 9 9 9 9 9';
        _this.emailModal = true;
        _this.emailModalPhrases = {};
        _this.endpoint = '.';
        _this.invalidCode = false;
        _this.invalidEmail = false;
        _this.modalType = ThfModalPasswordRecoveryModalContent.Email;
        _this.submittedCodeValue = (/** @type {?} */ ({}));
        _this.submittedContactValue = (/** @type {?} */ ({}));
        _this.primaryAction = { label: undefined, action: (/**
             * @return {?}
             */
            function () { }) };
        _this.secondaryAction = { label: undefined, action: (/**
             * @return {?}
             */
            function () { }) };
        _this.typeFormOptions = [
            { label: 'e-mail', value: ThfModalPasswordRecoveryType.Email },
            { label: 'SMS', value: ThfModalPasswordRecoveryType.SMS }
        ];
        return _this;
    }
    /**
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.passwordRecoverySubscription) {
            this.passwordRecoverySubscription.unsubscribe();
        }
        if (this.smsCodeSubscription) {
            this.smsCodeSubscription.unsubscribe();
        }
    };
    /**
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.completed = /**
     * @return {?}
     */
    function () {
        this.cancelAction();
    };
    /**
     * @param {?} form
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.formModelChangesCheck = /**
     * @param {?} form
     * @return {?}
     */
    function (form) {
        /** @type {?} */
        var invalidForm = form.invalid;
        this.invalidEmail = invalidForm && form.dirty;
        this.primaryAction.disabled = invalidForm;
        if (this.modalType === ThfModalPasswordRecoveryModalContent.SMSCode) {
            /** @type {?} */
            var codeError = this.codeError !== undefined && this.codeError !== '';
            this.showCustomCodeError = codeError && form.pristine;
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.getInputType = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        var _this = this;
        this.type = type;
        this.pipeModalPhrases();
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.control = _this.emailForm.controls[type];
            _this.formModelChangesCheck(_this.emailForm);
            _this.resetFormFields(_this.control);
        }));
    };
    /**
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.open = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var control = this.checkFormType(this.type);
        this.control = this.emailForm.controls[control];
        this.setEmailModalPhrasesAndActions();
        this.formModelChangesCheck(this.emailForm);
        this.recoveryModalElement.open();
    };
    /**
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.openConfirmation = /**
     * @return {?}
     */
    function () {
        this.modalTitle = this.literals.emailSentTitle;
        this.modalType = ThfModalPasswordRecoveryModalContent.Confirmation;
        this.setActions(this.cancelAction, this.literals.closeButton, this.submitAction, this.literals.resendEmailButton, false);
    };
    /**
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.openSmsCode = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.modalTitle = this.literals.typeCodeTitle;
        this.modalType = ThfModalPasswordRecoveryModalContent.SMSCode;
        this.setActions(this.submitSmsCodeAction, this.literals.continueButton, this.cancelAction, this.literals.cancelButton, true);
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.control = _this.smsCodeForm.controls['sms'];
            _this.formModelChangesCheck(_this.smsCodeForm);
        }));
    };
    /**
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.resendSmsCode = /**
     * @return {?}
     */
    function () {
        this.incrementRetryAttempts();
        if (this.urlRecovery) {
            this.submitActionRequest(this.submittedContactValue, this.type);
        }
        else {
            this.submit.emit(this.submittedContactValue);
        }
    };
    /**
     * @private
     * @param {?} responseObj
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.assignSmsResponse = /**
     * @private
     * @param {?} responseObj
     * @return {?}
     */
    function (responseObj) {
        this.smsBodyResponse = Object.assign({}, { hash: responseObj.hash });
        if (responseObj.urlValidationCode) {
            this.smsBodyResponse = Object.assign(this.smsBodyResponse, { urlValidationCode: responseObj.urlValidationCode });
        }
    };
    /**
     * @private
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.cancelAction = /**
     * @private
     * @return {?}
     */
    function () {
        this.resetFormFields(this.control);
        this.submittedContactValue = {};
        this.chosenTypeFormOption = ThfModalPasswordRecoveryType.Email;
        this.modalType = ThfModalPasswordRecoveryModalContent.Email;
        this.type = this.modalPasswordRecoveryTypeAll ? ThfModalPasswordRecoveryType.All : this.type;
        this.recoveryModalElement.close();
    };
    /**
     * @private
     * @param {?} type
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.checkFormType = /**
     * @private
     * @param {?} type
     * @return {?}
     */
    function (type) {
        return type !== ThfModalPasswordRecoveryType.All ? type : ThfModalPasswordRecoveryType.Email;
    };
    /**
     * @private
     * @param {?} control
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.formReset = /**
     * @private
     * @param {?} control
     * @return {?}
     */
    function (control) {
        control.markAsPristine();
        control.markAsUntouched();
        control.updateValueAndValidity();
    };
    /**
     * @private
     * @param {?} type
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.getEmitValue = /**
     * @private
     * @param {?} type
     * @return {?}
     */
    function (type) {
        return type === ThfModalPasswordRecoveryType.SMS ? this.phone : this.email;
    };
    /**
     * @private
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.incrementRetryAttempts = /**
     * @private
     * @return {?}
     */
    function () {
        this.submittedContactValue.retry = (this.submittedContactValue.retry + 1 || 1);
    };
    /**
     * @private
     * @param {?} url
     * @param {?} queryParam
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.openExternalLink = /**
     * @private
     * @param {?} url
     * @param {?} queryParam
     * @return {?}
     */
    function (url, queryParam) {
        window.open(url + "?token=" + queryParam, '_self');
    };
    /**
     * @private
     * @param {?} url
     * @param {?} endpoint
     * @param {?} queryParam
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.openInternalLink = /**
     * @private
     * @param {?} url
     * @param {?} endpoint
     * @param {?} queryParam
     * @return {?}
     */
    function (url, endpoint, queryParam) {
        this.router.navigate([url + "/" + endpoint], { queryParams: { token: queryParam } });
    };
    /**
     * @private
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.pipeModalPhrases = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.type === ThfModalPasswordRecoveryType.SMS) {
            this.emailModalPhrases['firstPhrase'] = this.setPipeArguments(this.literals.recoveryPasswordPhrase, this.literals.sms);
            this.emailModalPhrases['secondPhrase'] = this.setPipeArguments(this.literals.supportContact, this.literals.telephone);
        }
        else {
            this.emailModalPhrases['firstPhrase'] = this.setPipeArguments(this.literals.recoveryPasswordPhrase, this.literals.email);
            this.emailModalPhrases['secondPhrase'] = this.setPipeArguments(this.literals.supportContact, this.literals.email);
        }
    };
    /**
     * @private
     * @param {?} recoveryToken
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.redirectToChangePassword = /**
     * @private
     * @param {?} recoveryToken
     * @return {?}
     */
    function (recoveryToken) {
        /** @type {?} */
        var urlChangePassword = recoveryToken.urlChangePassword;
        if (urlChangePassword) {
            isExternalLink(urlChangePassword) ?
                this.openExternalLink(urlChangePassword, recoveryToken.token) :
                this.openInternalLink(this.urlRecovery, urlChangePassword, recoveryToken.token);
        }
        else {
            /** @type {?} */
            var changePasswordEndpoint = 'changePassword';
            this.openInternalLink(this.urlRecovery, changePasswordEndpoint, recoveryToken.token);
        }
    };
    /**
     * @private
     * @param {?} control
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.resetFormFields = /**
     * @private
     * @param {?} control
     * @return {?}
     */
    function (control) {
        this.formReset(control);
        this.email = undefined;
        this.phone = undefined;
        this.smsCode = undefined;
    };
    /**
     * @private
     * @param {?} primaryAction
     * @param {?} primarylabel
     * @param {?} secondaryAction
     * @param {?} secondaryLabel
     * @param {?} disabled
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.setActions = /**
     * @private
     * @param {?} primaryAction
     * @param {?} primarylabel
     * @param {?} secondaryAction
     * @param {?} secondaryLabel
     * @param {?} disabled
     * @return {?}
     */
    function (primaryAction, primarylabel, secondaryAction, secondaryLabel, disabled) {
        var _this = this;
        this.primaryAction.action = (/**
         * @return {?}
         */
        function () { return primaryAction.call(_this); });
        this.primaryAction.label = primarylabel;
        this.secondaryAction.action = (/**
         * @return {?}
         */
        function () { return secondaryAction.call(_this); });
        this.secondaryAction.label = secondaryLabel;
        this.primaryAction.disabled = disabled;
    };
    /**
     * @private
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.setEmailModalPhrasesAndActions = /**
     * @private
     * @return {?}
     */
    function () {
        this.modalTitle = this.literals.forgotPasswordTitle;
        this.pipeModalPhrases();
        this.modalPasswordRecoveryTypeAll = this.type === ThfModalPasswordRecoveryType.All;
        this.setActions(this.submitAction, this.literals.sendButton, this.cancelAction, this.literals.cancelButton, true);
    };
    /**
     * @private
     * @param {?=} urlValidationCode
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.setRequestEndpoint = /**
     * @private
     * @param {?=} urlValidationCode
     * @return {?}
     */
    function (urlValidationCode) {
        /** @type {?} */
        var endpoint = urlValidationCode || 'validation';
        return this.urlRecovery + "/" + endpoint;
    };
    /**
     * @private
     * @param {?} literalAttr
     * @param {?} arg
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.setPipeArguments = /**
     * @private
     * @param {?} literalAttr
     * @param {?} arg
     * @return {?}
     */
    function (literalAttr, arg) {
        return this.thfI18nPipe.transform(literalAttr, arg);
    };
    /**
     * @private
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.submitAction = /**
     * @private
     * @return {?}
     */
    function () {
        this.modalType === ThfModalPasswordRecoveryModalContent.Confirmation ? this.incrementRetryAttempts() : this.formReset(this.control);
        this.submittedContactValue[this.checkFormType(this.type)] = this.getEmitValue(this.type);
        if (this.urlRecovery) {
            this.submitActionRequest(this.submittedContactValue, this.type);
        }
        else {
            this.submit.emit(this.submittedContactValue);
        }
    };
    /**
     * @private
     * @param {?} data
     * @param {?} modalType
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.submitActionRequest = /**
     * @private
     * @param {?} data
     * @param {?} modalType
     * @return {?}
     */
    function (data, modalType) {
        var _this = this;
        /** @type {?} */
        var params = modalType === ThfModalPasswordRecoveryType.SMS ? { type: 'sms' } : undefined;
        this.passwordRecoverySubscription =
            this.thfModalPasswordRecoveryService.post(this.urlRecovery, data, params)
                .subscribe((/**
             * @param {?} response
             * @return {?}
             */
            function (response) {
                if ((modalType === ThfModalPasswordRecoveryType.Email || modalType === ThfModalPasswordRecoveryType.All) && response.status === 204) {
                    _this.openConfirmation();
                }
                else if (modalType === ThfModalPasswordRecoveryType.SMS && response.status === 200) {
                    _this.assignSmsResponse(response.body);
                    _this.openSmsCode();
                }
            }));
    };
    /**
     * @private
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.submitSmsCodeAction = /**
     * @private
     * @return {?}
     */
    function () {
        this.submittedCodeValue.code = this.smsCode;
        if (this.urlRecovery) {
            this.submittedCodeValue = Object.assign(this.submittedCodeValue, { hash: this.smsBodyResponse.hash });
            this.submitSmsCodeRequest(this.submittedCodeValue);
        }
        else {
            this.codeSubmit.emit(this.submittedCodeValue);
        }
        this.resetFormFields(this.control);
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    ThfModalPasswordRecoveryComponent.prototype.submitSmsCodeRequest = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        this.smsCodeSubscription = this.thfModalPasswordRecoveryService
            .post(this.setRequestEndpoint(this.smsBodyResponse.urlValidationCode), data)
            .subscribe((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            /** @type {?} */
            var successStatus = response.status === 200;
            if (successStatus) {
                _this.completed();
                _this.redirectToChangePassword(response.body);
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.codeError = error.error.message;
            _this.openSmsCode();
        }));
    };
    ThfModalPasswordRecoveryComponent.decorators = [
        { type: Component, args: [{
                    selector: 'thf-modal-password-recovery',
                    template: "<thf-modal #recoveryModal\n  t-hide-close\n  t-size=\"auto\"\n  [ngSwitch]=\"modalType\"\n  [t-primary-action]=\"primaryAction\"\n  [t-secondary-action]=\"secondaryAction\"\n  [t-title]=\"modalTitle\"> \n  <div class=\"thf-modal-password-recovery-wrapper\">\n    <div *ngSwitchCase=\"'email'\" class=\"thf-modal-password-recovery-content thf-row\">\n      <div class=\"thf-modal-password-recovery-text thf-md-12 thf-mb-1\">\n        {{ emailModalPhrases.firstPhrase }}\n      </div>\n      <div class=\"thf-mb-2 thf-md-12\">\n        <form #emailForm=\"ngForm\">\n\n          <div *ngIf=\"modalPasswordRecoveryTypeAll\">\n            <thf-radio-group \n              name=\"type\"\n              [(ngModel)]=\"chosenTypeFormOption\"\n              [t-options]=\"typeFormOptions\"\n              (t-change)=\"getInputType($event)\">\n            </thf-radio-group>\n          </div>\n\n          <div class=\"thf-mt-1\">\n            <thf-email *ngIf=\"type === 'email' || type === 'all'\"\n              name=\"email\"\n              [(ngModel)]=\"email\"\n              t-required\n              [t-label]=\"literals.insertEmail\"\n              (t-change-model)=\"formModelChangesCheck(emailForm)\">\n            </thf-email>\n    \n            <thf-input *ngIf=\"type === 'sms'\"\n              name=\"sms\"\n              [(ngModel)]=\"phone\"\n              t-icon=\"thf-icon-telephone\"\n              t-required\n              [t-label]=\"literals.insertPhone\"\n              [t-mask]=\"phoneMask\"\n              [t-maxlength]=\"maxLength\"\n              [t-minlength]=\"minLength\"\n              (t-change-model)=\"formModelChangesCheck(emailForm)\">\n            </thf-input>\n          </div>\n          \n          <div class=\"thf-field-container-bottom thf-field-container-error-container\">\n            <thf-modal-password-recovery-error-message *ngIf=\"invalidEmail && control.dirty\" \n              [t-text]=\"type === 'sms' ? literals.phoneErrorMessagePhrase : literals.emailErrorMessagePhrase\">\n            </thf-modal-password-recovery-error-message>\n          </div>\n        </form>\n      </div>\n      <div class=\"thf-modal-password-recovery-text thf-md-12\">{{ emailModalPhrases.secondPhrase }}<span *ngIf=\"contactEmail\">\n        {{ literals.prepositionIn }} \n          <a class=\"thf-modal-password-recovery-link\" href=\"mailto:{{ contactEmail }}\" target=\"_self\">{{ contactEmail }}</a>\n        </span>{{ endpoint }}\n      </div>\n    </div>\n\n    <div #smsCodeModal *ngSwitchCase=\"'smsCode'\" class=\"thf-modal-password-recovery-content thf-row\">\n      <div class=\"thf-modal-password-recovery-text thf-md-12 thf-mb-1\">{{ literals.sentSmsCodePhrase }}</div>\n      <div class=\"thf-mb-2 thf-md-12\">\n        <form #smsCodeForm=\"ngForm\">\n          <thf-input\n            name=\"sms\"\n            [(ngModel)]=\"smsCode\"\n            t-maxlength=\"11\"\n            t-minlength=\"11\"\n            t-required\n            [t-label]=\"literals.insertCode\"\n            [t-mask]=\"codeMask\"\n            (t-change-model)=\"formModelChangesCheck(smsCodeForm)\">\n          </thf-input>\n          <div class=\"thf-field-container-bottom thf-field-container-error-container\">\n            <thf-modal-password-recovery-error-message *ngIf=\"invalidEmail\"\n              [t-text]=\"smsCodeErrorMessage || this.literals.smsCodeErrorMessagePhrase\">\n            </thf-modal-password-recovery-error-message>\n            <thf-modal-password-recovery-error-message *ngIf=\"showCustomCodeError\"\n              [t-text]=\"codeError\">\n            </thf-modal-password-recovery-error-message>\n          </div>\n        </form>\n      </div>\n      <div class=\"thf-modal-password-recovery-text thf-md-12\">\n        {{ literals.sendAgainPhrase }} \n        <span class=\"thf-modal-password-recovery-link\" (click)=\"resendSmsCode()\">{{ literals.sendAgain }}</span>\n      </div>\n    </div>\n    \n    <div #confirmationModal *ngSwitchCase=\"'confirmation'\" class=\"thf-modal-password-recovery-content thf-row\">\n      <img \n        class=\"thf-modal-password-recovery-user-image thf-mb-2\" \n        src=\"./assets/images/email-sent.svg\"> \n      <div class=\"thf-modal-password-recovery-text\">\n        {{ literals.emailSentConfirmationPhrase }}\n      </div>\n    </div>\n  </div>\n</thf-modal>\n"
                }] }
    ];
    /** @nocollapse */
    ThfModalPasswordRecoveryComponent.ctorParameters = function () { return [
        { type: Router },
        { type: ThfI18nPipe },
        { type: ThfModalPasswordRecoveryService }
    ]; };
    ThfModalPasswordRecoveryComponent.propDecorators = {
        emailForm: [{ type: ViewChild, args: ['emailForm', { static: false },] }],
        recoveryModalElement: [{ type: ViewChild, args: ['recoveryModal', { static: true },] }],
        smsCodeForm: [{ type: ViewChild, args: ['smsCodeForm', { static: false },] }]
    };
    return ThfModalPasswordRecoveryComponent;
}(ThfModalPasswordRecoveryBaseComponent));
export { ThfModalPasswordRecoveryComponent };
if (false) {
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.chosenTypeFormOption;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.codeMask;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.control;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.emailModal;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.emailModalPhrases;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.endpoint;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.invalidCode;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.invalidEmail;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.modalTitle;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.modalType;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.showCustomCodeError;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.smsCodeErrorMessagePhrase;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.submittedCodeValue;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.submittedContactValue;
    /**
     * @type {?}
     * @private
     */
    ThfModalPasswordRecoveryComponent.prototype.passwordRecoverySubscription;
    /**
     * @type {?}
     * @private
     */
    ThfModalPasswordRecoveryComponent.prototype.smsBodyResponse;
    /**
     * @type {?}
     * @private
     */
    ThfModalPasswordRecoveryComponent.prototype.smsCodeSubscription;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.emailForm;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.recoveryModalElement;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.smsCodeForm;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.primaryAction;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.secondaryAction;
    /** @type {?} */
    ThfModalPasswordRecoveryComponent.prototype.typeFormOptions;
    /**
     * @type {?}
     * @private
     */
    ThfModalPasswordRecoveryComponent.prototype.router;
    /**
     * @type {?}
     * @private
     */
    ThfModalPasswordRecoveryComponent.prototype.thfI18nPipe;
    /**
     * @type {?}
     * @private
     */
    ThfModalPasswordRecoveryComponent.prototype.thfModalPasswordRecoveryService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0b3R2cy90aGYtdGVtcGxhdGVzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvdGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5L3RoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFhLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNoRSxPQUFPLEVBQW1CLE1BQU0sRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUd6QyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFdBQVcsRUFBa0IsaUJBQWlCLEVBQXVCLE1BQU0sZUFBZSxDQUFDO0FBR3BHLE9BQU8sRUFBRSxxQ0FBcUMsRUFBRSxNQUFNLDhDQUE4QyxDQUFDO0FBQ3JHLE9BQU8sRUFBRSxvQ0FBb0MsRUFBRSxNQUFNLHdEQUF3RCxDQUFDO0FBQzlHLE9BQU8sRUFBRSwrQkFBK0IsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQ3hGLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLCtDQUErQyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QjdGO0lBS3VELDZEQUFxQztJQW9DMUYsMkNBQ1UsTUFBYyxFQUNkLFdBQXdCLEVBQ3hCLCtCQUFnRTtRQUgxRSxZQUtFLGlCQUFPLFNBQ1I7UUFMUyxZQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsaUJBQVcsR0FBWCxXQUFXLENBQWE7UUFDeEIscUNBQStCLEdBQS9CLCtCQUErQixDQUFpQztRQXJDMUUsMEJBQW9CLEdBQVcsNEJBQTRCLENBQUMsS0FBSyxDQUFDO1FBQ2xFLGNBQVEsR0FBVyxhQUFhLENBQUM7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RTs7SUFpUDdDLHdDQUFDO0NBQUEsQUEvUUQsQ0FLdUQscUNBQXFDLEdBMFEzRjtTQTFRWSxpQ0FBaUM7OztJQUU1QyxpRUFBa0U7O0lBQ2xFLHFEQUFpQzs7SUFDakMsb0RBQXlCOztJQUN6Qix1REFBMkI7O0lBQzNCLDhEQUF1Qjs7SUFDdkIscURBQXVCOztJQUN2Qix3REFBNkI7O0lBQzdCLHlEQUE4Qjs7SUFDOUIsdURBQW1COztJQUNuQixzREFBNkY7O0lBQzdGLGdFQUE2Qjs7SUFDN0Isc0VBQWtDOztJQUNsQywrREFBb0Q7O0lBQ3BELGtFQUF1RDs7Ozs7SUFFdkQseUVBQW1EOzs7OztJQUNuRCw0REFBd0I7Ozs7O0lBQ3hCLGdFQUEwQzs7SUFFMUMsc0RBQTZEOztJQUU3RCxpRUFBc0Y7O0lBRXRGLHdEQUFpRTs7SUFFakUsMERBQXdFOztJQUV4RSw0REFBMEU7O0lBRTFFLDREQUdFOzs7OztJQUdBLG1EQUFzQjs7Ozs7SUFDdEIsd0RBQWdDOzs7OztJQUNoQyw0RUFBd0UiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uRGVzdHJveSwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBYnN0cmFjdENvbnRyb2wsIE5nRm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgaXNFeHRlcm5hbExpbmsgfSBmcm9tICcuLi8uLi91dGlscy91dGlsJztcbmltcG9ydCB7IFRoZkkxOG5QaXBlLCBUaGZNb2RhbEFjdGlvbiwgVGhmTW9kYWxDb21wb25lbnQsIFRoZlJhZGlvR3JvdXBPcHRpb24gfSBmcm9tICdAdG90dnMvdGhmLXVpJztcblxuaW1wb3J0IHsgVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5IH0gZnJvbSAnLi9pbnRlcmZhY2VzL3RoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5QmFzZUNvbXBvbmVudCB9IGZyb20gJy4vdGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWJhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeU1vZGFsQ29udGVudCB9IGZyb20gJy4vZW51bXMvdGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LW1vZGFsLWNvbnRlbnQuZW51bSc7XG5pbXBvcnQgeyBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlTZXJ2aWNlIH0gZnJvbSAnLi90aGYtbW9kYWwtcGFzc3dvcmQtcmVjb3Zlcnkuc2VydmljZSc7XG5pbXBvcnQgeyBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlIH0gZnJvbSAnLi9lbnVtcy90aGYtbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktdHlwZS5lbnVtJztcblxuLyoqXG4gKiBAZG9jc0V4dGVuZHMgVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5QmFzZUNvbXBvbmVudFxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInRoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1iYXNpY1wiIHRpdGxlPVwiVG90dnMgTW9kYWwgUGFzc3dvcmQgUmVjb3ZlcnkgQmFzaWNcIj5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXRoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1iYXNpYy9zYW1wbGUtdGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWJhc2ljLmNvbXBvbmVudC5odG1sXCI+IDwvZmlsZT5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXRoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1iYXNpYy9zYW1wbGUtdGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWJhc2ljLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInRoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1sYWJzXCIgdGl0bGU9XCJUb3R2cyBNb2RhbCBQYXNzd29yZCBSZWNvdmVyeSBMYWJzXCI+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS10aGYtbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktbGFicy9zYW1wbGUtdGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWxhYnMuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtdGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWxhYnMvc2FtcGxlLXRoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1sYWJzLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInRoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1yZXF1ZXN0XCIgdGl0bGU9XCJUb3R2cyBNb2RhbCBQYXNzd29yZCBSZWNvdmVyeSBSZXF1ZXN0XCI+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS10aGYtbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktcmVxdWVzdC9zYW1wbGUtdGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LXJlcXVlc3QuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtdGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LXJlcXVlc3Qvc2FtcGxlLXRoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1yZXF1ZXN0LmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5JyxcbiAgdGVtcGxhdGVVcmw6ICcuL3RoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS5jb21wb25lbnQuaHRtbCdcbn0pXG5cbmV4cG9ydCBjbGFzcyBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlDb21wb25lbnQgZXh0ZW5kcyBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgT25EZXN0cm95IHtcblxuICBjaG9zZW5UeXBlRm9ybU9wdGlvbjogc3RyaW5nID0gVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5FbWFpbDtcbiAgY29kZU1hc2s6IHN0cmluZyA9ICc5IDkgOSA5IDkgOSc7XG4gIGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbDtcbiAgZW1haWxNb2RhbDogYm9vbGVhbiA9IHRydWU7XG4gIGVtYWlsTW9kYWxQaHJhc2VzID0ge307XG4gIGVuZHBvaW50OiBzdHJpbmcgPSAnLic7XG4gIGludmFsaWRDb2RlOiBib29sZWFuID0gZmFsc2U7XG4gIGludmFsaWRFbWFpbDogYm9vbGVhbiA9IGZhbHNlO1xuICBtb2RhbFRpdGxlOiBzdHJpbmc7XG4gIG1vZGFsVHlwZTogVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5TW9kYWxDb250ZW50ID0gVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5TW9kYWxDb250ZW50LkVtYWlsO1xuICBzaG93Q3VzdG9tQ29kZUVycm9yOiBib29sZWFuO1xuICBzbXNDb2RlRXJyb3JNZXNzYWdlUGhyYXNlOiBzdHJpbmc7XG4gIHN1Ym1pdHRlZENvZGVWYWx1ZSA9IHt9IGFzIFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeTtcbiAgc3VibWl0dGVkQ29udGFjdFZhbHVlID0ge30gYXMgVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5O1xuXG4gIHByaXZhdGUgcGFzc3dvcmRSZWNvdmVyeVN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBwcml2YXRlIHNtc0JvZHlSZXNwb25zZTtcbiAgcHJpdmF0ZSBzbXNDb2RlU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgQFZpZXdDaGlsZCgnZW1haWxGb3JtJywgeyBzdGF0aWM6IGZhbHNlIH0pIGVtYWlsRm9ybTogTmdGb3JtO1xuXG4gIEBWaWV3Q2hpbGQoJ3JlY292ZXJ5TW9kYWwnLCB7IHN0YXRpYzogdHJ1ZSB9KSByZWNvdmVyeU1vZGFsRWxlbWVudDogVGhmTW9kYWxDb21wb25lbnQ7XG5cbiAgQFZpZXdDaGlsZCgnc21zQ29kZUZvcm0nLCB7IHN0YXRpYzogZmFsc2UgfSkgc21zQ29kZUZvcm06IE5nRm9ybTtcblxuICBwcmltYXJ5QWN0aW9uOiBUaGZNb2RhbEFjdGlvbiA9IHsgbGFiZWw6IHVuZGVmaW5lZCwgYWN0aW9uOiAoKSA9PiB7IH0gfTtcblxuICBzZWNvbmRhcnlBY3Rpb246IFRoZk1vZGFsQWN0aW9uID0geyBsYWJlbDogdW5kZWZpbmVkLCBhY3Rpb246ICgpID0+IHsgfSB9O1xuXG4gIHR5cGVGb3JtT3B0aW9uczogQXJyYXk8VGhmUmFkaW9Hcm91cE9wdGlvbj4gPSBbXG4gICAgeyBsYWJlbDogJ2UtbWFpbCcsIHZhbHVlOiBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLkVtYWlsIH0sXG4gICAgeyBsYWJlbDogJ1NNUycsIHZhbHVlOiBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLlNNUyB9XG4gIF07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICBwcml2YXRlIHRoZkkxOG5QaXBlOiBUaGZJMThuUGlwZSxcbiAgICBwcml2YXRlIHRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVNlcnZpY2U6IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVNlcnZpY2VcbiAgICApIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMucGFzc3dvcmRSZWNvdmVyeVN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5wYXNzd29yZFJlY292ZXJ5U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc21zQ29kZVN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5zbXNDb2RlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG5cbiAgY29tcGxldGVkKCkge1xuICAgIHRoaXMuY2FuY2VsQWN0aW9uKCk7XG4gIH1cblxuICBmb3JtTW9kZWxDaGFuZ2VzQ2hlY2soZm9ybTogTmdGb3JtKSB7XG4gICAgY29uc3QgaW52YWxpZEZvcm0gPSBmb3JtLmludmFsaWQ7XG4gICAgdGhpcy5pbnZhbGlkRW1haWwgPSBpbnZhbGlkRm9ybSAmJiBmb3JtLmRpcnR5O1xuICAgIHRoaXMucHJpbWFyeUFjdGlvbi5kaXNhYmxlZCA9IGludmFsaWRGb3JtO1xuXG4gICAgaWYgKHRoaXMubW9kYWxUeXBlID09PSBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlNb2RhbENvbnRlbnQuU01TQ29kZSkge1xuICAgICAgY29uc3QgY29kZUVycm9yOiBib29sZWFuID0gdGhpcy5jb2RlRXJyb3IgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmNvZGVFcnJvciAhPT0gJyc7XG4gICAgICB0aGlzLnNob3dDdXN0b21Db2RlRXJyb3IgPSBjb2RlRXJyb3IgJiYgZm9ybS5wcmlzdGluZTtcbiAgICB9XG4gIH1cblxuICBnZXRJbnB1dFR5cGUodHlwZSkge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5waXBlTW9kYWxQaHJhc2VzKCk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRyb2wgPSB0aGlzLmVtYWlsRm9ybS5jb250cm9sc1t0eXBlXTtcbiAgICAgIHRoaXMuZm9ybU1vZGVsQ2hhbmdlc0NoZWNrKHRoaXMuZW1haWxGb3JtKTtcbiAgICAgIHRoaXMucmVzZXRGb3JtRmllbGRzKHRoaXMuY29udHJvbCk7XG4gICAgfSk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIGNvbnN0IGNvbnRyb2wgPSB0aGlzLmNoZWNrRm9ybVR5cGUodGhpcy50eXBlKTtcbiAgICB0aGlzLmNvbnRyb2wgPSB0aGlzLmVtYWlsRm9ybS5jb250cm9sc1tjb250cm9sXTtcbiAgICB0aGlzLnNldEVtYWlsTW9kYWxQaHJhc2VzQW5kQWN0aW9ucygpO1xuICAgIHRoaXMuZm9ybU1vZGVsQ2hhbmdlc0NoZWNrKHRoaXMuZW1haWxGb3JtKTtcbiAgICB0aGlzLnJlY292ZXJ5TW9kYWxFbGVtZW50Lm9wZW4oKTtcbiAgfVxuXG4gIG9wZW5Db25maXJtYXRpb24oKSB7XG4gICAgdGhpcy5tb2RhbFRpdGxlID0gdGhpcy5saXRlcmFscy5lbWFpbFNlbnRUaXRsZTtcbiAgICB0aGlzLm1vZGFsVHlwZSA9IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeU1vZGFsQ29udGVudC5Db25maXJtYXRpb247XG4gICAgdGhpcy5zZXRBY3Rpb25zKHRoaXMuY2FuY2VsQWN0aW9uLCB0aGlzLmxpdGVyYWxzLmNsb3NlQnV0dG9uLCB0aGlzLnN1Ym1pdEFjdGlvbiwgdGhpcy5saXRlcmFscy5yZXNlbmRFbWFpbEJ1dHRvbiwgZmFsc2UpO1xuICB9XG5cbiAgb3BlblNtc0NvZGUoKSB7XG4gICAgdGhpcy5tb2RhbFRpdGxlID0gdGhpcy5saXRlcmFscy50eXBlQ29kZVRpdGxlO1xuICAgIHRoaXMubW9kYWxUeXBlID0gVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5TW9kYWxDb250ZW50LlNNU0NvZGU7XG4gICAgdGhpcy5zZXRBY3Rpb25zKHRoaXMuc3VibWl0U21zQ29kZUFjdGlvbiwgdGhpcy5saXRlcmFscy5jb250aW51ZUJ1dHRvbiwgdGhpcy5jYW5jZWxBY3Rpb24sIHRoaXMubGl0ZXJhbHMuY2FuY2VsQnV0dG9uLCB0cnVlKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jb250cm9sID0gdGhpcy5zbXNDb2RlRm9ybS5jb250cm9sc1snc21zJ107XG4gICAgICB0aGlzLmZvcm1Nb2RlbENoYW5nZXNDaGVjayh0aGlzLnNtc0NvZGVGb3JtKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlc2VuZFNtc0NvZGUoKSB7XG4gICAgdGhpcy5pbmNyZW1lbnRSZXRyeUF0dGVtcHRzKCk7XG4gICAgaWYgKHRoaXMudXJsUmVjb3ZlcnkpIHtcbiAgICAgIHRoaXMuc3VibWl0QWN0aW9uUmVxdWVzdCh0aGlzLnN1Ym1pdHRlZENvbnRhY3RWYWx1ZSwgdGhpcy50eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdWJtaXQuZW1pdCh0aGlzLnN1Ym1pdHRlZENvbnRhY3RWYWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3NpZ25TbXNSZXNwb25zZShyZXNwb25zZU9iaikge1xuICAgIHRoaXMuc21zQm9keVJlc3BvbnNlID0gT2JqZWN0LmFzc2lnbih7fSwge2hhc2g6IHJlc3BvbnNlT2JqLmhhc2h9KTtcbiAgICBpZiAocmVzcG9uc2VPYmoudXJsVmFsaWRhdGlvbkNvZGUpIHtcbiAgICAgIHRoaXMuc21zQm9keVJlc3BvbnNlID0gT2JqZWN0LmFzc2lnbih0aGlzLnNtc0JvZHlSZXNwb25zZSwge3VybFZhbGlkYXRpb25Db2RlOiByZXNwb25zZU9iai51cmxWYWxpZGF0aW9uQ29kZX0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2FuY2VsQWN0aW9uKCkge1xuICAgIHRoaXMucmVzZXRGb3JtRmllbGRzKHRoaXMuY29udHJvbCk7XG4gICAgdGhpcy5zdWJtaXR0ZWRDb250YWN0VmFsdWUgPSB7fTtcblxuICAgIHRoaXMuY2hvc2VuVHlwZUZvcm1PcHRpb24gPSBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLkVtYWlsO1xuICAgIHRoaXMubW9kYWxUeXBlID0gVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5TW9kYWxDb250ZW50LkVtYWlsO1xuICAgIHRoaXMudHlwZSA9IHRoaXMubW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZUFsbCA/IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuQWxsIDogdGhpcy50eXBlO1xuICAgIHRoaXMucmVjb3ZlcnlNb2RhbEVsZW1lbnQuY2xvc2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tGb3JtVHlwZSh0eXBlOiBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlKSB7XG4gICAgcmV0dXJuIHR5cGUgIT09IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuQWxsID8gdHlwZSA6IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuRW1haWw7XG4gIH1cblxuICBwcml2YXRlIGZvcm1SZXNldChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpIHtcbiAgICBjb250cm9sLm1hcmtBc1ByaXN0aW5lKCk7XG4gICAgY29udHJvbC5tYXJrQXNVbnRvdWNoZWQoKTtcbiAgICBjb250cm9sLnVwZGF0ZVZhbHVlQW5kVmFsaWRpdHkoKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RW1pdFZhbHVlKHR5cGU6IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUpIHtcbiAgICByZXR1cm4gdHlwZSA9PT0gVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5TTVMgPyB0aGlzLnBob25lIDogdGhpcy5lbWFpbDtcbiAgfVxuXG4gIHByaXZhdGUgaW5jcmVtZW50UmV0cnlBdHRlbXB0cygpIHtcbiAgICB0aGlzLnN1Ym1pdHRlZENvbnRhY3RWYWx1ZS5yZXRyeSA9ICh0aGlzLnN1Ym1pdHRlZENvbnRhY3RWYWx1ZS5yZXRyeSArIDEgfHwgMSk7XG4gIH1cblxuICBwcml2YXRlIG9wZW5FeHRlcm5hbExpbmsodXJsLCBxdWVyeVBhcmFtKSB7XG4gICAgd2luZG93Lm9wZW4oYCR7dXJsfT90b2tlbj0ke3F1ZXJ5UGFyYW19YCwgJ19zZWxmJyk7XG4gIH1cblxuICBwcml2YXRlIG9wZW5JbnRlcm5hbExpbmsodXJsLCBlbmRwb2ludCwgcXVlcnlQYXJhbSkge1xuICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtgJHt1cmx9LyR7ZW5kcG9pbnR9YF0sIHsgcXVlcnlQYXJhbXM6IHsgdG9rZW46IHF1ZXJ5UGFyYW0gfSB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcGlwZU1vZGFsUGhyYXNlcygpIHtcbiAgICBpZiAodGhpcy50eXBlID09PSBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLlNNUykge1xuICAgICAgdGhpcy5lbWFpbE1vZGFsUGhyYXNlc1snZmlyc3RQaHJhc2UnXSA9IHRoaXMuc2V0UGlwZUFyZ3VtZW50cyh0aGlzLmxpdGVyYWxzLnJlY292ZXJ5UGFzc3dvcmRQaHJhc2UsIHRoaXMubGl0ZXJhbHMuc21zKTtcbiAgICAgIHRoaXMuZW1haWxNb2RhbFBocmFzZXNbJ3NlY29uZFBocmFzZSddID0gdGhpcy5zZXRQaXBlQXJndW1lbnRzKHRoaXMubGl0ZXJhbHMuc3VwcG9ydENvbnRhY3QsIHRoaXMubGl0ZXJhbHMudGVsZXBob25lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbWFpbE1vZGFsUGhyYXNlc1snZmlyc3RQaHJhc2UnXSA9IHRoaXMuc2V0UGlwZUFyZ3VtZW50cyh0aGlzLmxpdGVyYWxzLnJlY292ZXJ5UGFzc3dvcmRQaHJhc2UsIHRoaXMubGl0ZXJhbHMuZW1haWwpO1xuICAgICAgdGhpcy5lbWFpbE1vZGFsUGhyYXNlc1snc2Vjb25kUGhyYXNlJ10gPSB0aGlzLnNldFBpcGVBcmd1bWVudHModGhpcy5saXRlcmFscy5zdXBwb3J0Q29udGFjdCwgdGhpcy5saXRlcmFscy5lbWFpbCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZWRpcmVjdFRvQ2hhbmdlUGFzc3dvcmQocmVjb3ZlcnlUb2tlbjogVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5KSB7XG4gICAgY29uc3QgdXJsQ2hhbmdlUGFzc3dvcmQgPSByZWNvdmVyeVRva2VuLnVybENoYW5nZVBhc3N3b3JkO1xuICAgIGlmICh1cmxDaGFuZ2VQYXNzd29yZCkge1xuICAgICAgaXNFeHRlcm5hbExpbmsodXJsQ2hhbmdlUGFzc3dvcmQpID9cbiAgICAgIHRoaXMub3BlbkV4dGVybmFsTGluayh1cmxDaGFuZ2VQYXNzd29yZCwgcmVjb3ZlcnlUb2tlbi50b2tlbikgOlxuICAgICAgdGhpcy5vcGVuSW50ZXJuYWxMaW5rKHRoaXMudXJsUmVjb3ZlcnksIHVybENoYW5nZVBhc3N3b3JkLCByZWNvdmVyeVRva2VuLnRva2VuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY2hhbmdlUGFzc3dvcmRFbmRwb2ludCA9ICdjaGFuZ2VQYXNzd29yZCc7XG4gICAgICB0aGlzLm9wZW5JbnRlcm5hbExpbmsodGhpcy51cmxSZWNvdmVyeSwgY2hhbmdlUGFzc3dvcmRFbmRwb2ludCwgcmVjb3ZlcnlUb2tlbi50b2tlbik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZXNldEZvcm1GaWVsZHMoY29udHJvbCkge1xuICAgIHRoaXMuZm9ybVJlc2V0KGNvbnRyb2wpO1xuICAgIHRoaXMuZW1haWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5waG9uZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNtc0NvZGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBwcml2YXRlIHNldEFjdGlvbnMocHJpbWFyeUFjdGlvbiwgcHJpbWFyeWxhYmVsLCBzZWNvbmRhcnlBY3Rpb24sIHNlY29uZGFyeUxhYmVsLCBkaXNhYmxlZCkge1xuICAgIHRoaXMucHJpbWFyeUFjdGlvbi5hY3Rpb24gPSAoKSA9PiBwcmltYXJ5QWN0aW9uLmNhbGwodGhpcyk7XG4gICAgdGhpcy5wcmltYXJ5QWN0aW9uLmxhYmVsID0gcHJpbWFyeWxhYmVsO1xuICAgIHRoaXMuc2Vjb25kYXJ5QWN0aW9uLmFjdGlvbiA9ICgpID0+IHNlY29uZGFyeUFjdGlvbi5jYWxsKHRoaXMpO1xuICAgIHRoaXMuc2Vjb25kYXJ5QWN0aW9uLmxhYmVsID0gc2Vjb25kYXJ5TGFiZWw7XG4gICAgdGhpcy5wcmltYXJ5QWN0aW9uLmRpc2FibGVkID0gZGlzYWJsZWQ7XG4gIH1cblxuICBwcml2YXRlIHNldEVtYWlsTW9kYWxQaHJhc2VzQW5kQWN0aW9ucygpIHtcbiAgICB0aGlzLm1vZGFsVGl0bGUgPSB0aGlzLmxpdGVyYWxzLmZvcmdvdFBhc3N3b3JkVGl0bGU7XG4gICAgdGhpcy5waXBlTW9kYWxQaHJhc2VzKCk7XG4gICAgdGhpcy5tb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlQWxsID0gdGhpcy50eXBlID09PSBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLkFsbDtcbiAgICB0aGlzLnNldEFjdGlvbnModGhpcy5zdWJtaXRBY3Rpb24sIHRoaXMubGl0ZXJhbHMuc2VuZEJ1dHRvbiwgdGhpcy5jYW5jZWxBY3Rpb24sIHRoaXMubGl0ZXJhbHMuY2FuY2VsQnV0dG9uLCB0cnVlKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0UmVxdWVzdEVuZHBvaW50KHVybFZhbGlkYXRpb25Db2RlPzogc3RyaW5nKSB7XG4gICAgY29uc3QgZW5kcG9pbnQgPSB1cmxWYWxpZGF0aW9uQ29kZSB8fCAndmFsaWRhdGlvbic7XG5cbiAgICByZXR1cm4gYCR7dGhpcy51cmxSZWNvdmVyeX0vJHtlbmRwb2ludH1gO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRQaXBlQXJndW1lbnRzKGxpdGVyYWxBdHRyOiBzdHJpbmcsIGFyZzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMudGhmSTE4blBpcGUudHJhbnNmb3JtKGxpdGVyYWxBdHRyLCBhcmcpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJtaXRBY3Rpb24oKSB7XG4gICAgdGhpcy5tb2RhbFR5cGUgPT09IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeU1vZGFsQ29udGVudC5Db25maXJtYXRpb24gPyB0aGlzLmluY3JlbWVudFJldHJ5QXR0ZW1wdHMoKSA6IHRoaXMuZm9ybVJlc2V0KHRoaXMuY29udHJvbCk7XG4gICAgdGhpcy5zdWJtaXR0ZWRDb250YWN0VmFsdWVbdGhpcy5jaGVja0Zvcm1UeXBlKHRoaXMudHlwZSldID0gdGhpcy5nZXRFbWl0VmFsdWUodGhpcy50eXBlKTtcbiAgICBpZiAodGhpcy51cmxSZWNvdmVyeSkge1xuICAgICAgdGhpcy5zdWJtaXRBY3Rpb25SZXF1ZXN0KHRoaXMuc3VibWl0dGVkQ29udGFjdFZhbHVlLCB0aGlzLnR5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN1Ym1pdC5lbWl0KHRoaXMuc3VibWl0dGVkQ29udGFjdFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN1Ym1pdEFjdGlvblJlcXVlc3QoZGF0YTogVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5LCBtb2RhbFR5cGU6IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBtb2RhbFR5cGUgPT09IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuU01TID8geyB0eXBlOiAnc21zJyB9IDogdW5kZWZpbmVkO1xuXG4gICAgdGhpcy5wYXNzd29yZFJlY292ZXJ5U3Vic2NyaXB0aW9uID1cbiAgICB0aGlzLnRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVNlcnZpY2UucG9zdCh0aGlzLnVybFJlY292ZXJ5LCBkYXRhLCBwYXJhbXMpXG4gICAgLnN1YnNjcmliZShyZXNwb25zZSA9PiB7XG4gICAgICBpZiAoKG1vZGFsVHlwZSA9PT0gVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5FbWFpbCB8fCBtb2RhbFR5cGUgPT09IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuQWxsKSAmJiByZXNwb25zZS5zdGF0dXMgPT09IDIwNCkge1xuICAgICAgICB0aGlzLm9wZW5Db25maXJtYXRpb24oKTtcbiAgICAgIH0gZWxzZSBpZiAobW9kYWxUeXBlID09PSBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLlNNUyAmJiByZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICB0aGlzLmFzc2lnblNtc1Jlc3BvbnNlKHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICB0aGlzLm9wZW5TbXNDb2RlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN1Ym1pdFNtc0NvZGVBY3Rpb24oKSB7XG4gICAgdGhpcy5zdWJtaXR0ZWRDb2RlVmFsdWUuY29kZSA9IHRoaXMuc21zQ29kZTtcblxuICAgIGlmICh0aGlzLnVybFJlY292ZXJ5KSB7XG4gICAgICB0aGlzLnN1Ym1pdHRlZENvZGVWYWx1ZSA9IE9iamVjdC5hc3NpZ24odGhpcy5zdWJtaXR0ZWRDb2RlVmFsdWUsIHtoYXNoOiB0aGlzLnNtc0JvZHlSZXNwb25zZS5oYXNofSk7XG4gICAgICB0aGlzLnN1Ym1pdFNtc0NvZGVSZXF1ZXN0KHRoaXMuc3VibWl0dGVkQ29kZVZhbHVlKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvZGVTdWJtaXQuZW1pdCh0aGlzLnN1Ym1pdHRlZENvZGVWYWx1ZSk7XG4gICAgfVxuICAgIHRoaXMucmVzZXRGb3JtRmllbGRzKHRoaXMuY29udHJvbCk7XG4gIH1cblxuICBwcml2YXRlIHN1Ym1pdFNtc0NvZGVSZXF1ZXN0KGRhdGE6IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeSkge1xuICAgIHRoaXMuc21zQ29kZVN1YnNjcmlwdGlvbiA9IHRoaXMudGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5U2VydmljZVxuICAgIC5wb3N0KHRoaXMuc2V0UmVxdWVzdEVuZHBvaW50KHRoaXMuc21zQm9keVJlc3BvbnNlLnVybFZhbGlkYXRpb25Db2RlKSwgZGF0YSlcbiAgICAuc3Vic2NyaWJlKFxuICAgICAgcmVzcG9uc2UgPT4ge1xuICAgICAgICBjb25zdCBzdWNjZXNzU3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzID09PSAyMDA7XG4gICAgICAgIGlmIChzdWNjZXNzU3RhdHVzKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZWQoKTtcbiAgICAgICAgICB0aGlzLnJlZGlyZWN0VG9DaGFuZ2VQYXNzd29yZChyZXNwb25zZS5ib2R5KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGVycm9yID0+IHtcbiAgICAgICAgdGhpcy5jb2RlRXJyb3IgPSBlcnJvci5lcnJvci5tZXNzYWdlO1xuICAgICAgICB0aGlzLm9wZW5TbXNDb2RlKCk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG59XG4iXX0=