/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { NgForm } from '@angular/forms';
import { isTypeof } from '../../../utils/util';
import { ThfPageJobSchedulerLookupService } from '../thf-page-job-scheduler-lookup.service';
import { ThfPageJobSchedulerService } from '../thf-page-job-scheduler.service';
var ThfPageJobSchedulerExecutionComponent = /** @class */ (function () {
    function ThfPageJobSchedulerExecutionComponent(thfPageJobSchedulerService, thfPageJobSchedulerLookup) {
        this.thfPageJobSchedulerService = thfPageJobSchedulerService;
        this.thfPageJobSchedulerLookup = thfPageJobSchedulerLookup;
        this._value = {};
        this.dayPattern = '^(3[0-1]|[0-2][0-9]|[1-9]|0[1-9])$';
        this.existProcessAPI = true;
        this.minDateFirstExecution = new Date();
        this.periodicityOptions = [];
        this.timePattern = '^(2[0-3]|[01][0-9]):?([0-5][0-9])$';
        this.weekDays = [];
        this.isEdit = false;
        this.literals = (/** @type {?} */ ({}));
        this.changeProcess = new EventEmitter();
    }
    Object.defineProperty(ThfPageJobSchedulerExecutionComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._value = value && isTypeof(value, 'object') ? value : {};
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ThfPageJobSchedulerExecutionComponent.prototype, "startDateFirstExecution", {
        get: /**
         * @return {?}
         */
        function () {
            return this.isEdit ? undefined : this.minDateFirstExecution;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ThfPageJobSchedulerExecutionComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.subscribeProcessIdValueChanges();
        }));
    };
    /**
     * @return {?}
     */
    ThfPageJobSchedulerExecutionComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.periodicityTemplates = {
            daily: this.dailyTemplate,
            monthly: this.monthlyTemplate,
            weekly: this.weeklyTempalte
        };
        this.checkExistsProcessesAPI();
        this.periodicityOptions = this.getPeriodicityOptions();
        this.weekDays = this.getWeekDays();
    };
    /**
     * @private
     * @return {?}
     */
    ThfPageJobSchedulerExecutionComponent.prototype.checkExistsProcessesAPI = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.thfPageJobSchedulerService.getHeadProcesses().subscribe(undefined, (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.existProcessAPI = false;
        }));
    };
    /**
     * @private
     * @return {?}
     */
    ThfPageJobSchedulerExecutionComponent.prototype.getPeriodicityOptions = /**
     * @private
     * @return {?}
     */
    function () {
        return [
            { label: this.literals.single, value: 'single' },
            { label: this.literals.daily, value: 'daily' },
            { label: this.literals.weekly, value: 'weekly' },
            { label: this.literals.monthly, value: 'monthly' }
        ];
    };
    /**
     * @private
     * @return {?}
     */
    ThfPageJobSchedulerExecutionComponent.prototype.getWeekDays = /**
     * @private
     * @return {?}
     */
    function () {
        return [
            { label: this.literals.sunday, value: 'Sunday' },
            { label: this.literals.monday, value: 'Monday' },
            { label: this.literals.tuesday, value: 'Tuesday' },
            { label: this.literals.wednesday, value: 'Wednesday' },
            { label: this.literals.thursday, value: 'Thursday' },
            { label: this.literals.friday, value: 'Friday' },
            { label: this.literals.saturday, value: 'Saturday' }
        ];
    };
    /**
     * @private
     * @return {?}
     */
    ThfPageJobSchedulerExecutionComponent.prototype.subscribeProcessIdValueChanges = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.form.controls['processID'].valueChanges.subscribe((/**
         * @param {?} processId
         * @return {?}
         */
        function (processId) {
            _this.changeProcess.emit({ processId: processId, existAPI: _this.existProcessAPI });
        }));
    };
    ThfPageJobSchedulerExecutionComponent.decorators = [
        { type: Component, args: [{
                    selector: 'thf-page-job-scheduler-execution',
                    template: "<form #formExecution=\"ngForm\">\n  <div class=\"thf-row\">\n    <ng-container *ngIf=\"existProcessAPI; then lookupProcessesID; else inputProcessesID\"></ng-container>\n  </div>\n\n  <div class=\"thf-row\">\n    <thf-divider class=\"thf-md-12\" [t-label]=\"literals.firstExecution\"></thf-divider>\n\n    <thf-datepicker\n      class=\"thf-md-4\"\n      name=\"firstExecution\"\n      [(ngModel)]=\"value.firstExecution\"\n      t-placeholder=\"dd/mm/aaaa\"\n      t-required\n      [t-disabled]=\"isEdit\"\n      [t-label]=\"literals.day\"\n      [t-min-date]=\"startDateFirstExecution\">\n    </thf-datepicker>\n\n    <thf-input\n      class=\"thf-md-2\"\n      name=\"firstExecutionHour\"\n      [(ngModel)]=\"value.firstExecutionHour\"\n      t-mask=\"99:99\"\n      t-mask-format-model\n      t-placeholder=\"HH:mm\"\n      t-required\n      [t-disabled]=\"isEdit\"\n      [t-label]=\"literals.hour\"\n      [t-pattern]=\"timePattern\">\n    </thf-input>\n\n  </div>\n\n  <hr>\n\n  <div class=\"thf-row\">\n    <thf-radio-group\n      class=\"thf-sm-12\"\n      name=\"periodicity\"\n      [(ngModel)]=\"value.periodicity\"\n      t-columns=\"4\"\n      t-required\n      [t-label]=\"literals.periodicity\"\n      [t-options]=\"periodicityOptions\">\n    </thf-radio-group>\n\n    <ng-container *ngIf=\"value.periodicity !== 'single'\">\n      <thf-divider class=\"thf-md-12\" [t-label]=\"literals.periodicityData\">\n      </thf-divider>\n\n      <div class=\"thf-row\">\n        <ng-container *ngTemplateOutlet=\"periodicityTemplates[value.periodicity]\">\n        </ng-container>\n      </div>\n\n      <div class=\"thf-row\">\n        <thf-switch\n          class=\"thf-md-3\"\n          name=\"recurrent\"\n          [(ngModel)]=\"value.recurrent\"\n          [t-label]=\"literals.recurrent\"\n          [t-label-off]=\"literals.no\"\n          [t-label-on]=\"literals.yes\">\n        </thf-switch>\n      </div>\n    </ng-container>\n  </div>\n\n  <ng-template #lookupProcessesID>\n    <thf-lookup\n      class=\"thf-md-12\"\n      name=\"processID\"\n      [(ngModel)]=\"value.processID\"\n      t-field-label=\"description\"\n      t-field-value=\"processID\"\n      t-required\n      [t-disabled]=\"isEdit\"\n      [t-filter-service]=\"thfPageJobSchedulerLookup\"\n      [t-label]=\"literals.process\"\n      [t-placeholder]=\"literals.enterProcess\">\n    </thf-lookup>\n  </ng-template>\n\n  <ng-template #inputProcessesID>\n    <thf-input\n      class=\"thf-md-12\"\n      name=\"processID\"\n      [(ngModel)]=\"value.processID\"\n      t-required\n      [t-disabled]=\"isEdit\"\n      [t-label]=\"literals.process\"\n      [t-placeholder]=\"literals.enterProcess\">\n    </thf-input>\n  </ng-template>\n\n  <ng-template #dailyTemplate>\n    <ng-container *ngTemplateOutlet=\"inputHourTemplate\">\n    </ng-container>\n  </ng-template>\n\n  <ng-template #weeklyTemplate>\n    <div class=\"thf-row\">\n      <ng-container *ngTemplateOutlet=\"inputHourTemplate\">\n      </ng-container>\n    </div>\n\n    <thf-checkbox-group\n      class=\"thf-md-12\"\n      name=\"daysOfWeek\"\n      [(ngModel)]=\"value.daysOfWeek\"\n      t-columns=\"4\"\n      t-required\n      [t-label]=\"literals.weekDays\"\n      [t-options]=\"weekDays\">\n    </thf-checkbox-group>\n  </ng-template>\n\n  <ng-template #monthlyTemplate>\n    <thf-number\n      class=\"thf-md-3\"\n      name=\"dayOfMonth\"\n      [(ngModel)]=\"value.dayOfMonth\"\n      t-required\n      [t-error-pattern]=\"'Dia inv\u00E1lido'\"\n      [t-label]=\"literals.day\"\n      [t-max]=\"31\"\n      [t-pattern]=\"dayPattern\">\n    </thf-number>\n\n    <ng-container *ngTemplateOutlet=\"inputHourTemplate\">\n    </ng-container>\n  </ng-template>\n\n  <ng-template #inputHourTemplate>\n    <thf-input\n      class=\"thf-md-2\"\n      name=\"hour\"\n      [(ngModel)]=\"value.hour\"\n      t-mask=\"99:99\"\n      t-mask-format-model\n      t-placeholder=\"HH:mm\"\n      t-required\n      [t-label]=\"literals.hour\"\n      [t-pattern]=\"timePattern\">\n    </thf-input>\n  </ng-template>\n</form>\n"
                }] }
    ];
    /** @nocollapse */
    ThfPageJobSchedulerExecutionComponent.ctorParameters = function () { return [
        { type: ThfPageJobSchedulerService },
        { type: ThfPageJobSchedulerLookupService }
    ]; };
    ThfPageJobSchedulerExecutionComponent.propDecorators = {
        form: [{ type: ViewChild, args: ['formExecution', { static: true },] }],
        dailyTemplate: [{ type: ViewChild, args: ['dailyTemplate', { static: true },] }],
        monthlyTemplate: [{ type: ViewChild, args: ['monthlyTemplate', { static: true },] }],
        weeklyTempalte: [{ type: ViewChild, args: ['weeklyTemplate', { static: true },] }],
        isEdit: [{ type: Input, args: ['t-is-edit',] }],
        literals: [{ type: Input, args: ['t-literals',] }],
        value: [{ type: Input, args: ['t-value',] }],
        changeProcess: [{ type: Output, args: ['t-change-process',] }]
    };
    return ThfPageJobSchedulerExecutionComponent;
}());
export { ThfPageJobSchedulerExecutionComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    ThfPageJobSchedulerExecutionComponent.prototype._value;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.dayPattern;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.existProcessAPI;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.minDateFirstExecution;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.periodicityOptions;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.periodicityTemplates;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.timePattern;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.weekDays;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.form;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.dailyTemplate;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.monthlyTemplate;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.weeklyTempalte;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.isEdit;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.literals;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.changeProcess;
    /**
     * @type {?}
     * @private
     */
    ThfPageJobSchedulerExecutionComponent.prototype.thfPageJobSchedulerService;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.thfPageJobSchedulerLookup;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLXBhZ2Utam9iLXNjaGVkdWxlci1leGVjdXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRvdHZzL3RoZi10ZW1wbGF0ZXMvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy90aGYtcGFnZS1qb2Itc2NoZWR1bGVyL3RoZi1wYWdlLWpvYi1zY2hlZHVsZXItZXhlY3V0aW9uL3RoZi1wYWdlLWpvYi1zY2hlZHVsZXItZXhlY3V0aW9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFpQixTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQWUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3RILE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUl4QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFL0MsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDNUYsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFFL0U7SUFxQ0UsK0NBQ1UsMEJBQXNELEVBQ3ZELHlCQUEyRDtRQUQxRCwrQkFBMEIsR0FBMUIsMEJBQTBCLENBQTRCO1FBQ3ZELDhCQUF5QixHQUF6Qix5QkFBeUIsQ0FBa0M7UUFqQzVELFdBQU0sR0FBUSxFQUFFLENBQUM7UUFFekIsZUFBVSxHQUFHLG9DQUFvQyxDQUFDO1FBQ2xELG9CQUFlLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLDBCQUFxQixHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7UUFDbkMsdUJBQWtCLEdBQStCLEVBQUUsQ0FBQztRQUVwRCxnQkFBVyxHQUFHLG9DQUFvQyxDQUFDO1FBQ25ELGFBQVEsR0FBa0MsRUFBRSxDQUFDO1FBU3pCLFdBQU0sR0FBWSxLQUFLLENBQUM7UUFFdkIsYUFBUSxHQUFHLG1CQUFNLEVBQUUsRUFBQSxDQUFDO1FBVWIs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OztJQUM1RCxnRUFBZ0U7O0lBQ2hFLCtEQUE4RDs7SUFFOUQsdURBQTRDOztJQUU1Qyx5REFBeUM7O0lBVXpDLDhEQUF1Rjs7Ozs7SUFHckYsMkVBQThEOztJQUM5RCwwRUFBa0UiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZnRlclZpZXdJbml0LCBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOZ0Zvcm0gfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmltcG9ydCB7IFRoZkNoZWNrYm94R3JvdXBPcHRpb24sIFRoZlJhZGlvR3JvdXBPcHRpb24gfSBmcm9tICdAdG90dnMvdGhmLXVpJztcblxuaW1wb3J0IHsgaXNUeXBlb2YgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlsJztcblxuaW1wb3J0IHsgVGhmUGFnZUpvYlNjaGVkdWxlckxvb2t1cFNlcnZpY2UgfSBmcm9tICcuLi90aGYtcGFnZS1qb2Itc2NoZWR1bGVyLWxvb2t1cC5zZXJ2aWNlJztcbmltcG9ydCB7IFRoZlBhZ2VKb2JTY2hlZHVsZXJTZXJ2aWNlIH0gZnJvbSAnLi4vdGhmLXBhZ2Utam9iLXNjaGVkdWxlci5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGhmLXBhZ2Utam9iLXNjaGVkdWxlci1leGVjdXRpb24nLFxuICB0ZW1wbGF0ZVVybDogJ3RoZi1wYWdlLWpvYi1zY2hlZHVsZXItZXhlY3V0aW9uLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBUaGZQYWdlSm9iU2NoZWR1bGVyRXhlY3V0aW9uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcblxuICBwcml2YXRlIF92YWx1ZTogYW55ID0ge307XG5cbiAgZGF5UGF0dGVybiA9ICdeKDNbMC0xXXxbMC0yXVswLTldfFsxLTldfDBbMS05XSkkJztcbiAgZXhpc3RQcm9jZXNzQVBJID0gdHJ1ZTtcbiAgbWluRGF0ZUZpcnN0RXhlY3V0aW9uID0gbmV3IERhdGUoKTtcbiAgcGVyaW9kaWNpdHlPcHRpb25zOiBBcnJheTxUaGZSYWRpb0dyb3VwT3B0aW9uPiA9IFtdO1xuICBwZXJpb2RpY2l0eVRlbXBsYXRlczogeyBkYWlseTogVGVtcGxhdGVSZWY8YW55Piwgd2Vla2x5OiBUZW1wbGF0ZVJlZjxhbnk+LCBtb250aGx5OiBUZW1wbGF0ZVJlZjxhbnk+IH0gO1xuICB0aW1lUGF0dGVybiA9ICdeKDJbMC0zXXxbMDFdWzAtOV0pOj8oWzAtNV1bMC05XSkkJztcbiAgd2Vla0RheXM6IEFycmF5PFRoZkNoZWNrYm94R3JvdXBPcHRpb24+ID0gW107XG5cbiAgQFZpZXdDaGlsZCgnZm9ybUV4ZWN1dGlvbicsIHsgc3RhdGljOiB0cnVlIH0pIGZvcm06IE5nRm9ybTtcblxuICAvLyB0ZW1wbGF0ZXNcbiAgQFZpZXdDaGlsZCgnZGFpbHlUZW1wbGF0ZScsIHsgc3RhdGljOiB0cnVlIH0pIGRhaWx5VGVtcGxhdGU7XG4gIEBWaWV3Q2hpbGQoJ21vbnRobHlUZW1wbGF0ZScsIHsgc3RhdGljOiB0cnVlIH0pIG1vbnRobHlUZW1wbGF0ZTtcbiAgQFZpZXdDaGlsZCgnd2Vla2x5VGVtcGxhdGUnLCB7IHN0YXRpYzogdHJ1ZSB9KSB3ZWVrbHlUZW1wYWx0ZTtcblxuICBASW5wdXQoJ3QtaXMtZWRpdCcpIGlzRWRpdDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIEBJbnB1dCgndC1saXRlcmFscycpIGxpdGVyYWxzID0gPGFueT4ge307XG5cbiAgQElucHV0KCd0LXZhbHVlJykgc2V0IHZhbHVlKHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLl92YWx1ZSA9IHZhbHVlICYmIGlzVHlwZW9mKHZhbHVlLCAnb2JqZWN0JykgPyB2YWx1ZSA6IHt9O1xuICB9XG5cbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuXG4gIEBPdXRwdXQoJ3QtY2hhbmdlLXByb2Nlc3MnKSBjaGFuZ2VQcm9jZXNzOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgdGhmUGFnZUpvYlNjaGVkdWxlclNlcnZpY2U6IFRoZlBhZ2VKb2JTY2hlZHVsZXJTZXJ2aWNlLFxuICAgIHB1YmxpYyB0aGZQYWdlSm9iU2NoZWR1bGVyTG9va3VwOiBUaGZQYWdlSm9iU2NoZWR1bGVyTG9va3VwU2VydmljZSkgeyB9XG5cbiAgZ2V0IHN0YXJ0RGF0ZUZpcnN0RXhlY3V0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmlzRWRpdCA/IHVuZGVmaW5lZCA6IHRoaXMubWluRGF0ZUZpcnN0RXhlY3V0aW9uO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnN1YnNjcmliZVByb2Nlc3NJZFZhbHVlQ2hhbmdlcygpO1xuICAgIH0pO1xuXG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnBlcmlvZGljaXR5VGVtcGxhdGVzID0ge1xuICAgICAgZGFpbHk6IHRoaXMuZGFpbHlUZW1wbGF0ZSxcbiAgICAgIG1vbnRobHk6IHRoaXMubW9udGhseVRlbXBsYXRlLFxuICAgICAgd2Vla2x5OiB0aGlzLndlZWtseVRlbXBhbHRlXG4gICAgfTtcblxuICAgIHRoaXMuY2hlY2tFeGlzdHNQcm9jZXNzZXNBUEkoKTtcblxuICAgIHRoaXMucGVyaW9kaWNpdHlPcHRpb25zID0gdGhpcy5nZXRQZXJpb2RpY2l0eU9wdGlvbnMoKTtcbiAgICB0aGlzLndlZWtEYXlzID0gdGhpcy5nZXRXZWVrRGF5cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja0V4aXN0c1Byb2Nlc3Nlc0FQSSgpIHtcbiAgICB0aGlzLnRoZlBhZ2VKb2JTY2hlZHVsZXJTZXJ2aWNlLmdldEhlYWRQcm9jZXNzZXMoKS5zdWJzY3JpYmUodW5kZWZpbmVkLCBlcnJvciA9PiB7XG4gICAgICB0aGlzLmV4aXN0UHJvY2Vzc0FQSSA9IGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRQZXJpb2RpY2l0eU9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHsgbGFiZWw6IHRoaXMubGl0ZXJhbHMuc2luZ2xlLCB2YWx1ZTogJ3NpbmdsZScgfSxcbiAgICAgIHsgbGFiZWw6IHRoaXMubGl0ZXJhbHMuZGFpbHksIHZhbHVlOiAnZGFpbHknIH0sXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLndlZWtseSwgdmFsdWU6ICd3ZWVrbHknIH0sXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLm1vbnRobHksIHZhbHVlOiAnbW9udGhseScgfVxuICAgIF07XG4gIH1cblxuICBwcml2YXRlIGdldFdlZWtEYXlzKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLnN1bmRheSwgdmFsdWU6ICdTdW5kYXknIH0sXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLm1vbmRheSwgdmFsdWU6ICdNb25kYXknIH0sXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLnR1ZXNkYXksIHZhbHVlOiAnVHVlc2RheScgfSxcbiAgICAgIHsgbGFiZWw6IHRoaXMubGl0ZXJhbHMud2VkbmVzZGF5LCB2YWx1ZTogJ1dlZG5lc2RheScgfSxcbiAgICAgIHsgbGFiZWw6IHRoaXMubGl0ZXJhbHMudGh1cnNkYXksIHZhbHVlOiAnVGh1cnNkYXknIH0sXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLmZyaWRheSwgdmFsdWU6ICdGcmlkYXknIH0sXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLnNhdHVyZGF5LCB2YWx1ZTogJ1NhdHVyZGF5JyB9XG4gICAgXTtcbiAgfVxuXG4gIHByaXZhdGUgc3Vic2NyaWJlUHJvY2Vzc0lkVmFsdWVDaGFuZ2VzKCkge1xuICAgIHRoaXMuZm9ybS5jb250cm9sc1sncHJvY2Vzc0lEJ10udmFsdWVDaGFuZ2VzLnN1YnNjcmliZShwcm9jZXNzSWQgPT4ge1xuICAgICAgdGhpcy5jaGFuZ2VQcm9jZXNzLmVtaXQoeyBwcm9jZXNzSWQsIGV4aXN0QVBJOiB0aGlzLmV4aXN0UHJvY2Vzc0FQSSB9KTtcbiAgICB9KTtcbiAgfVxuXG59XG4iXX0=