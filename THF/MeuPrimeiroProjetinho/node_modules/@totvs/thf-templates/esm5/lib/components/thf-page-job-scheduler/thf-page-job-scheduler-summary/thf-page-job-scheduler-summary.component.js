/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { DatePipe } from '@angular/common';
import { ThfInfoOrientation } from '@totvs/thf-ui';
var ThfPageJobSchedulerSummaryComponent = /** @class */ (function () {
    function ThfPageJobSchedulerSummaryComponent(datePipe) {
        this.datePipe = datePipe;
        this.executionValue = '';
        this.firstExecutionValue = '';
        this.infoOrientation = ThfInfoOrientation.Horizontal;
        this.periodicityValue = '';
        this.recurrentValue = '';
        this.literals = (/** @type {?} */ ({}));
        this.parameters = [];
        this.value = (/** @type {?} */ ({}));
    }
    /**
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _a = this.value, periodicity = _a.periodicity, hour = _a.hour, dayOfMonth = _a.dayOfMonth, daysOfWeek = _a.daysOfWeek, recurrent = _a.recurrent, firstExecution = _a.firstExecution, firstExecutionHour = _a.firstExecutionHour;
        this.periodicityValue = this.getPeriodicityLabel(periodicity);
        this.executionValue = this.getExecutionValue(periodicity, hour, daysOfWeek, dayOfMonth);
        this.firstExecutionValue = this.getFirstExecutionLabel(firstExecution, firstExecutionHour);
        this.recurrentValue = this.getRecurrentValue(recurrent);
    };
    /**
     * @private
     * @param {?} periodicity
     * @param {?=} hour
     * @param {?=} daysOfWeek
     * @param {?=} dayOfMonth
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.getExecutionValue = /**
     * @private
     * @param {?} periodicity
     * @param {?=} hour
     * @param {?=} daysOfWeek
     * @param {?=} dayOfMonth
     * @return {?}
     */
    function (periodicity, hour, daysOfWeek, dayOfMonth) {
        switch (periodicity) {
            case 'daily':
                return this.getHourLabel(hour);
            case 'monthly':
                return this.getMonthlyLabelExecution(dayOfMonth, hour);
            case 'weekly':
                return this.getWeeklyLabelExecution(daysOfWeek, hour);
            default:
                return this.literals.notReported;
        }
    };
    /**
     * @private
     * @param {?} firstExecution
     * @param {?=} firstExecutionHour
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.getFirstExecutionLabel = /**
     * @private
     * @param {?} firstExecution
     * @param {?=} firstExecutionHour
     * @return {?}
     */
    function (firstExecution, firstExecutionHour) {
        if (firstExecution) {
            /** @type {?} */
            var date = this.datePipe.transform(firstExecution, 'dd/MM/yyyy', '-0200');
            return date + " " + this.getHourLabel(firstExecutionHour);
        }
        else {
            return this.literals.notReported;
        }
    };
    /**
     * @private
     * @param {?} hour
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.getHourLabel = /**
     * @private
     * @param {?} hour
     * @return {?}
     */
    function (hour) {
        return this.literals.at + " " + (hour || '00:00') + "h";
    };
    /**
     * @private
     * @param {?} dayOfMonth
     * @param {?} hour
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.getMonthlyLabelExecution = /**
     * @private
     * @param {?} dayOfMonth
     * @param {?} hour
     * @return {?}
     */
    function (dayOfMonth, hour) {
        /** @type {?} */
        var hourLabel = this.getHourLabel(hour);
        return this.literals.day + " " + dayOfMonth + " " + hourLabel;
    };
    /**
     * @private
     * @param {?} periodicity
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.getPeriodicityLabel = /**
     * @private
     * @param {?} periodicity
     * @return {?}
     */
    function (periodicity) {
        switch (periodicity) {
            case 'daily':
                return this.literals.daily;
            case 'monthly':
                return this.literals.monthly;
            case 'weekly':
                return this.literals.weekly;
            default:
                return this.literals.single;
        }
    };
    /**
     * @private
     * @param {?} recurrent
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.getRecurrentValue = /**
     * @private
     * @param {?} recurrent
     * @return {?}
     */
    function (recurrent) {
        return recurrent ? this.literals.yes : this.literals.no;
    };
    /**
     * @private
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.getSorterWeekDays = /**
     * @private
     * @return {?}
     */
    function () {
        return {
            'sunday': 0,
            'monday': 1,
            'tuesday': 2,
            'wednesday': 3,
            'thursday': 4,
            'friday': 5,
            'saturday': 6
        };
    };
    /**
     * @private
     * @param {?} day
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.getTranslateWeekDay = /**
     * @private
     * @param {?} day
     * @return {?}
     */
    function (day) {
        /** @type {?} */
        var days = {
            Sunday: this.literals.sunday,
            Monday: this.literals.monday,
            Tuesday: this.literals.tuesday,
            Wednesday: this.literals.wednesday,
            Thursday: this.literals.thursday,
            Friday: this.literals.friday,
            Saturday: this.literals.saturday,
        };
        return days[day] || '';
    };
    /**
     * @private
     * @param {?=} days
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.getWeekDaysLabel = /**
     * @private
     * @param {?=} days
     * @return {?}
     */
    function (days) {
        var _this = this;
        if (days === void 0) { days = []; }
        /** @type {?} */
        var weekDaysSorted = this.sortWeekDays(days);
        return weekDaysSorted.map((/**
         * @param {?} day
         * @return {?}
         */
        function (day) { return _this.getTranslateWeekDay(day); })).join(', ');
    };
    /**
     * @private
     * @param {?} daysOfWeek
     * @param {?} hour
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.getWeeklyLabelExecution = /**
     * @private
     * @param {?} daysOfWeek
     * @param {?} hour
     * @return {?}
     */
    function (daysOfWeek, hour) {
        if (daysOfWeek && Array.isArray(daysOfWeek)) {
            return this.getWeekDaysLabel(daysOfWeek) + " " + this.getHourLabel(hour);
        }
        else {
            return this.literals.notReported;
        }
    };
    /**
     * @private
     * @param {?=} days
     * @return {?}
     */
    ThfPageJobSchedulerSummaryComponent.prototype.sortWeekDays = /**
     * @private
     * @param {?=} days
     * @return {?}
     */
    function (days) {
        if (days === void 0) { days = []; }
        /** @type {?} */
        var sorterWeekDays = this.getSorterWeekDays();
        return days.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            /** @type {?} */
            var currDay = a.toLowerCase();
            /** @type {?} */
            var nextDay = b.toLowerCase();
            return sorterWeekDays[currDay] > sorterWeekDays[nextDay] ? 1 : -1;
        }));
    };
    ThfPageJobSchedulerSummaryComponent.decorators = [
        { type: Component, args: [{
                    selector: 'thf-page-job-scheduler-summary',
                    template: "<div class=\"thf-md-12\">\n  <thf-info\n    [t-label]=\"literals.process\"\n    [t-orientation]=\"infoOrientation\"\n    [t-value]=\"value.processID\">\n  </thf-info>\n\n  <thf-info\n    [t-label]=\"literals.periodicity\"\n    [t-orientation]=\"infoOrientation\"\n    [t-value]=\"periodicityValue\">\n  </thf-info>\n\n  <thf-info *ngIf=\"value.periodicity !== 'single'\"\n    [t-label]=\"literals.execution\"\n    [t-orientation]=\"infoOrientation\"\n    [t-value]=\"executionValue\">\n  </thf-info>\n\n  <thf-info\n    [t-label]=\"literals.recurrent\"\n    [t-orientation]=\"infoOrientation\"\n    [t-value]=\"recurrentValue\">\n  </thf-info>\n\n  <thf-info\n    [t-label]=\"literals.firstExecution\"\n    [t-orientation]=\"infoOrientation\"\n    [t-value]=\"firstExecutionValue\">\n  </thf-info>\n</div>\n\n<thf-widget *ngIf=\"parameters && parameters.length\"\n  class=\"thf-pt-1 thf-pb-1 thf-md-12\"\n  [t-title]=\"literals.parameters\">\n\n  <thf-dynamic-view\n    [t-fields]=\"parameters\"\n    [t-value]=\"value.executionParameter\">\n  </thf-dynamic-view>\n\n</thf-widget>\n\n"
                }] }
    ];
    /** @nocollapse */
    ThfPageJobSchedulerSummaryComponent.ctorParameters = function () { return [
        { type: DatePipe }
    ]; };
    ThfPageJobSchedulerSummaryComponent.propDecorators = {
        literals: [{ type: Input, args: ['t-literals',] }],
        parameters: [{ type: Input, args: ['t-parameters',] }],
        value: [{ type: Input, args: ['t-value',] }]
    };
    return ThfPageJobSchedulerSummaryComponent;
}());
export { ThfPageJobSchedulerSummaryComponent };
if (false) {
    /** @type {?} */
    ThfPageJobSchedulerSummaryComponent.prototype.executionValue;
    /** @type {?} */
    ThfPageJobSchedulerSummaryComponent.prototype.firstExecutionValue;
    /** @type {?} */
    ThfPageJobSchedulerSummaryComponent.prototype.infoOrientation;
    /** @type {?} */
    ThfPageJobSchedulerSummaryComponent.prototype.periodicityValue;
    /** @type {?} */
    ThfPageJobSchedulerSummaryComponent.prototype.recurrentValue;
    /** @type {?} */
    ThfPageJobSchedulerSummaryComponent.prototype.literals;
    /** @type {?} */
    ThfPageJobSchedulerSummaryComponent.prototype.parameters;
    /** @type {?} */
    ThfPageJobSchedulerSummaryComponent.prototype.value;
    /**
     * @type {?}
     * @private
     */
    ThfPageJobSchedulerSummaryComponent.prototype.datePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLXBhZ2Utam9iLXNjaGVkdWxlci1zdW1tYXJ5LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0b3R2cy90aGYtdGVtcGxhdGVzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvdGhmLXBhZ2Utam9iLXNjaGVkdWxlci90aGYtcGFnZS1qb2Itc2NoZWR1bGVyLXN1bW1hcnkvdGhmLXBhZ2Utam9iLXNjaGVkdWxlci1zdW1tYXJ5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDekQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRTNDLE9BQU8sRUFBdUIsa0JBQWtCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFJeEU7SUFrQkUsNkNBQW9CLFFBQWtCO1FBQWxCLGFBQVEsR0FBUixRQUFRLENBQVU7UUFadEMsbUJBQWMsR0FBRyxFQUFFLENBQUM7UUFDcEIsd0JBQW1CLEdBQUcsRUFBRSxDQUFDO1FBQ3pCLG9CQUFlLEdBQUcsa0JBQWtCLENBQUMsVUFBVSxDQUFDO1FBQ2hELHFCQUFnQixHQUFHLEVBQUUsQ0FBQztRQUN0QixtQkFBYyxHQUFHLEVBQUUsQ0FBQztRQUVDLGFBQVEsR0FBRyxtQkFBTSxFQUFFLEVBQUEsQ0FBQztRQUVsQixlQUFVLEdBQStCLEVBQUUsQ0FBQztRQUVqRCxVQUFLLEdBQTRCLG1CQUFNLEVBQUUsRUFBQSxDQUFDO0lBRW5CLENBQUM7Ozs7SUFFMUMsc0RBQVE7OztJQUFSO1FBQ1EsSUFBQSxlQUF5RyxFQUF2Ryw0QkFBVyxFQUFFLGNBQUksRUFBRSwwQkFBVSxFQUFFLDBCQUFVLEVBQUUsd0JBQVMsRUFBRSxrQ0FBYyxFQUFFLDBDQUFpQztRQUUvRyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzlELElB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Q0FBQyxXQUFXLENBQUM7U0FDbEM7SUFDSCxDQUFDOzs7Ozs7SUFFTywwREFBWTs7Ozs7SUFBcEIsVUFBcUIsSUFBd0I7UUFBeEIscUJBQUEsRUFBQSxTQUF3Qjs7WUFDckMsY0FBYyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtRQUUvQyxPQUFPLElBQUksQ0FBQyxJQUFJOzs7OztRQUFDLFVBQUMsQ0FBUyxFQUFFLENBQVM7O2dCQUM5QixPQUFPLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRTs7Z0JBQ3pCLE9BQU8sR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFO1lBRS9CLE9BQU8sY0FBYyxDQUFDLE9BQU8sQ0FBQyxHQUFHLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwRSxDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7O2dCQWhJRixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLGdDQUFnQztvQkFDMUMsd2tDQUE0RDtpQkFDN0Q7Ozs7Z0JBVFEsUUFBUTs7OzJCQWtCZCxLQUFLLFNBQUMsWUFBWTs2QkFFbEIsS0FBSyxTQUFDLGNBQWM7d0JBRXBCLEtBQUssU0FBQyxTQUFTOztJQWtIbEIsMENBQUM7Q0FBQSxBQWxJRCxJQWtJQztTQTlIWSxtQ0FBbUM7OztJQUU5Qyw2REFBb0I7O0lBQ3BCLGtFQUF5Qjs7SUFDekIsOERBQWdEOztJQUNoRCwrREFBc0I7O0lBQ3RCLDZEQUFvQjs7SUFFcEIsdURBQXlDOztJQUV6Qyx5REFBbUU7O0lBRW5FLG9EQUE0RDs7Ozs7SUFFaEQsdURBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEYXRlUGlwZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbmltcG9ydCB7IFRoZkR5bmFtaWNWaWV3RmllbGQsIFRoZkluZm9PcmllbnRhdGlvbiB9IGZyb20gJ0B0b3R2cy90aGYtdWknO1xuXG5pbXBvcnQgeyBUaGZKb2JTY2hlZHVsZXJJbnRlcm5hbCB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGhmLWpvYi1zY2hlZHVsZXItaW50ZXJuYWwuaW50ZXJmYWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGhmLXBhZ2Utam9iLXNjaGVkdWxlci1zdW1tYXJ5JyxcbiAgdGVtcGxhdGVVcmw6ICd0aGYtcGFnZS1qb2Itc2NoZWR1bGVyLXN1bW1hcnkuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIFRoZlBhZ2VKb2JTY2hlZHVsZXJTdW1tYXJ5Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBleGVjdXRpb25WYWx1ZSA9ICcnO1xuICBmaXJzdEV4ZWN1dGlvblZhbHVlID0gJyc7XG4gIGluZm9PcmllbnRhdGlvbiA9IFRoZkluZm9PcmllbnRhdGlvbi5Ib3Jpem9udGFsO1xuICBwZXJpb2RpY2l0eVZhbHVlID0gJyc7XG4gIHJlY3VycmVudFZhbHVlID0gJyc7XG5cbiAgQElucHV0KCd0LWxpdGVyYWxzJykgbGl0ZXJhbHMgPSA8YW55PiB7fTtcblxuICBASW5wdXQoJ3QtcGFyYW1ldGVycycpIHBhcmFtZXRlcnM6IEFycmF5PFRoZkR5bmFtaWNWaWV3RmllbGQ+ID0gW107XG5cbiAgQElucHV0KCd0LXZhbHVlJykgdmFsdWU6IFRoZkpvYlNjaGVkdWxlckludGVybmFsID0gPGFueT4ge307XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRlUGlwZTogRGF0ZVBpcGUpIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgY29uc3QgeyBwZXJpb2RpY2l0eSwgaG91ciwgZGF5T2ZNb250aCwgZGF5c09mV2VlaywgcmVjdXJyZW50LCBmaXJzdEV4ZWN1dGlvbiwgZmlyc3RFeGVjdXRpb25Ib3VyIH0gPSB0aGlzLnZhbHVlO1xuXG4gICAgdGhpcy5wZXJpb2RpY2l0eVZhbHVlID0gdGhpcy5nZXRQZXJpb2RpY2l0eUxhYmVsKHBlcmlvZGljaXR5KTtcbiAgICB0aGlzLmV4ZWN1dGlvblZhbHVlID0gdGhpcy5nZXRFeGVjdXRpb25WYWx1ZShwZXJpb2RpY2l0eSwgaG91ciwgZGF5c09mV2VlaywgZGF5T2ZNb250aCk7XG4gICAgdGhpcy5maXJzdEV4ZWN1dGlvblZhbHVlID0gdGhpcy5nZXRGaXJzdEV4ZWN1dGlvbkxhYmVsKGZpcnN0RXhlY3V0aW9uLCBmaXJzdEV4ZWN1dGlvbkhvdXIpO1xuICAgIHRoaXMucmVjdXJyZW50VmFsdWUgPSB0aGlzLmdldFJlY3VycmVudFZhbHVlKHJlY3VycmVudCk7XG4gIH1cblxuICBwcml2YXRlIGdldEV4ZWN1dGlvblZhbHVlKHBlcmlvZGljaXR5OiBzdHJpbmcsIGhvdXI/OiBzdHJpbmcsIGRheXNPZldlZWs/OiBBcnJheTxzdHJpbmc+LCBkYXlPZk1vbnRoPzogbnVtYmVyKSB7XG4gICAgc3dpdGNoIChwZXJpb2RpY2l0eSkge1xuICAgICAgY2FzZSAnZGFpbHknOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRIb3VyTGFiZWwoaG91cik7XG4gICAgICBjYXNlICdtb250aGx5JzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9udGhseUxhYmVsRXhlY3V0aW9uKGRheU9mTW9udGgsIGhvdXIpO1xuICAgICAgY2FzZSAnd2Vla2x5JzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0V2Vla2x5TGFiZWxFeGVjdXRpb24oZGF5c09mV2VlaywgaG91cik7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5saXRlcmFscy5ub3RSZXBvcnRlZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEZpcnN0RXhlY3V0aW9uTGFiZWwoZmlyc3RFeGVjdXRpb246IERhdGUsIGZpcnN0RXhlY3V0aW9uSG91cj86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKGZpcnN0RXhlY3V0aW9uKSB7XG4gICAgICBjb25zdCBkYXRlID0gdGhpcy5kYXRlUGlwZS50cmFuc2Zvcm0oZmlyc3RFeGVjdXRpb24sICdkZC9NTS95eXl5JywgJy0wMjAwJyk7XG5cbiAgICAgIHJldHVybiBgJHtkYXRlfSAke3RoaXMuZ2V0SG91ckxhYmVsKGZpcnN0RXhlY3V0aW9uSG91cil9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMubGl0ZXJhbHMubm90UmVwb3J0ZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRIb3VyTGFiZWwoaG91cjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGAke3RoaXMubGl0ZXJhbHMuYXR9ICR7aG91ciB8fCAnMDA6MDAnfWhgO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRNb250aGx5TGFiZWxFeGVjdXRpb24oZGF5T2ZNb250aDogbnVtYmVyLCBob3VyOiBzdHJpbmcpIHtcbiAgICBjb25zdCBob3VyTGFiZWwgPSB0aGlzLmdldEhvdXJMYWJlbChob3VyKTtcblxuICAgIHJldHVybiBgJHt0aGlzLmxpdGVyYWxzLmRheX0gJHtkYXlPZk1vbnRofSAke2hvdXJMYWJlbH1gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRQZXJpb2RpY2l0eUxhYmVsKHBlcmlvZGljaXR5KSB7XG4gICAgc3dpdGNoIChwZXJpb2RpY2l0eSkge1xuICAgICAgY2FzZSAnZGFpbHknOlxuICAgICAgICByZXR1cm4gdGhpcy5saXRlcmFscy5kYWlseTtcbiAgICAgIGNhc2UgJ21vbnRobHknOlxuICAgICAgICByZXR1cm4gdGhpcy5saXRlcmFscy5tb250aGx5O1xuICAgICAgY2FzZSAnd2Vla2x5JzpcbiAgICAgICAgcmV0dXJuIHRoaXMubGl0ZXJhbHMud2Vla2x5O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMubGl0ZXJhbHMuc2luZ2xlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0UmVjdXJyZW50VmFsdWUocmVjdXJyZW50OiBib29sZWFuKTogc3RyaW5nIHtcbiAgICByZXR1cm4gcmVjdXJyZW50ID8gdGhpcy5saXRlcmFscy55ZXMgOiB0aGlzLmxpdGVyYWxzLm5vO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTb3J0ZXJXZWVrRGF5cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ3N1bmRheSc6IDAsXG4gICAgICAnbW9uZGF5JzogMSxcbiAgICAgICd0dWVzZGF5JzogMixcbiAgICAgICd3ZWRuZXNkYXknOiAzLFxuICAgICAgJ3RodXJzZGF5JzogNCxcbiAgICAgICdmcmlkYXknOiA1LFxuICAgICAgJ3NhdHVyZGF5JzogNlxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdldFRyYW5zbGF0ZVdlZWtEYXkoZGF5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRheXMgPSB7XG4gICAgICBTdW5kYXk6IHRoaXMubGl0ZXJhbHMuc3VuZGF5LFxuICAgICAgTW9uZGF5OiB0aGlzLmxpdGVyYWxzLm1vbmRheSxcbiAgICAgIFR1ZXNkYXk6IHRoaXMubGl0ZXJhbHMudHVlc2RheSxcbiAgICAgIFdlZG5lc2RheTogdGhpcy5saXRlcmFscy53ZWRuZXNkYXksXG4gICAgICBUaHVyc2RheTogdGhpcy5saXRlcmFscy50aHVyc2RheSxcbiAgICAgIEZyaWRheTogdGhpcy5saXRlcmFscy5mcmlkYXksXG4gICAgICBTYXR1cmRheTogdGhpcy5saXRlcmFscy5zYXR1cmRheSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRheXNbZGF5XSB8fCAnJztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0V2Vla0RheXNMYWJlbChkYXlzOiBBcnJheTxzdHJpbmc+ID0gW10pOiBzdHJpbmcge1xuICAgIGNvbnN0IHdlZWtEYXlzU29ydGVkID0gdGhpcy5zb3J0V2Vla0RheXMoZGF5cyk7XG5cbiAgICByZXR1cm4gd2Vla0RheXNTb3J0ZWQubWFwKGRheSA9PiB0aGlzLmdldFRyYW5zbGF0ZVdlZWtEYXkoZGF5KSkuam9pbignLCAnKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0V2Vla2x5TGFiZWxFeGVjdXRpb24oZGF5c09mV2VlazogQXJyYXk8c3RyaW5nPiwgaG91cjogc3RyaW5nKSB7XG4gICAgaWYgKGRheXNPZldlZWsgJiYgQXJyYXkuaXNBcnJheShkYXlzT2ZXZWVrKSkge1xuICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0V2Vla0RheXNMYWJlbChkYXlzT2ZXZWVrKX0gJHt0aGlzLmdldEhvdXJMYWJlbChob3VyKX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5saXRlcmFscy5ub3RSZXBvcnRlZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNvcnRXZWVrRGF5cyhkYXlzOiBBcnJheTxzdHJpbmc+ID0gW10pIHtcbiAgICBjb25zdCBzb3J0ZXJXZWVrRGF5cyA9IHRoaXMuZ2V0U29ydGVyV2Vla0RheXMoKTtcblxuICAgIHJldHVybiBkYXlzLnNvcnQoKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBjdXJyRGF5ID0gYS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgbmV4dERheSA9IGIudG9Mb3dlckNhc2UoKTtcblxuICAgICAgcmV0dXJuIHNvcnRlcldlZWtEYXlzW2N1cnJEYXldID4gc29ydGVyV2Vla0RheXNbbmV4dERheV0gPyAxIDogLTE7XG4gICAgfSk7XG4gIH1cblxufVxuIl19