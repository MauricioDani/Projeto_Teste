/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { EventEmitter, Input, Output } from '@angular/core';
import { convertToBoolean, isExternalLink, isTypeof } from '../../utils/util';
/**
 * \@description
 *
 * O componente `thf-page-change-password` é utilizado como template para tela de cadastro ou alteração de senha.
 *
 * Apresenta dicas e regras para senhas mais seguras e também possibilidade de personalizar o redirecionamento para as telas
 * 'esqueceu a senha', 'voltar' e 'entrar no sistema'. Os textos das telas são pré-definidos e imutáveis.
 *
 * A propriedade `t-url-new-password` automatiza a rotina do template e simplifica o processo de cadastro/alteração de senha, bastando
 * definir uma url para POST das informações digitadas pelo usuário.  A flexibilidade e praticidade podem chegar a um nível em que o
 * desenvolvimento da aplicação no *client side* é desprovida de qualquer código-fonte relacionado à rotina de cadastro/alteração de senha.
 * Seu detalhamento para uso pode ser visto logo abaixo em *propriedades*.
 * Caso julgue necessário, pode-se também definir manualmente a rotina do componente.
 *
 * Para que as imagens sejam exibidas corretamente, é necessário incluir o caminho delas ao projeto. Para isso, edite
 * o *assets* no arquivo **angular.json** da aplicação na seguinte ordem:
 * ```
 *   "assets": [
 *     "src/assets",
 *     "src/favicon.ico",
 *     {
 *       "glob": "**\/*",
 *       "input": "node_modules/\@totvs/thf-theme/images",
 *       "output": "assets/images"
 *     }
 *   ]
 * ```
 * @abstract
 */
export class ThfPageChangePasswordBaseComponent {
    constructor() {
        this._hideCurrentPassword = false;
        this._requirements = [];
        this._urlHome = '/';
        /**
         * \@optional
         *
         * \@description
         *
         * URL para a ação de retorno da página.
         *
         * > O botão `Voltar` aparece apenas para telas de alteração de senha, ou seja, só aparece se a propriedade `t-hide-current-password` for
         * falsa.
         *
         * \@default `/`
         */
        this.urlBack = '/';
        /**
         * \@optional
         *
         * \@description
         *
         * Função executada ao submeter o form pelo botão salvar.
         *
         * Caso definida essa função, a modal de confirmação não aparece, mas pode ser chamada pelo
         * método `openConfirmation`. Exemplo:
         *
         * ```
         * \@ViewChild(ThfPageChangePasswordComponent) changePassword: ThfPageChangePasswordComponent;
         *
         * onSubmit() {
         *  this.changePassword.openConfirmation();
         * }
         *
         * ```
         * > Esta propriedade será ignorada se for definido valor para a propriedade `t-url-new-password`.
         */
        this.submit = new EventEmitter();
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Esconde o campo `Senha atual` para que o template seja para criação de senha.
     *
     * \@default `false`
     * @param {?} value
     * @return {?}
     */
    set hideCurrentPassword(value) {
        this._hideCurrentPassword = convertToBoolean(value);
    }
    /**
     * @return {?}
     */
    get hideCurrentPassword() {
        return this._hideCurrentPassword;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * URL para a ação do link `Esqueceu a senha`.
     *
     * A propriedade aceita os seguintes tipos:
     *
     * - **String**: informe uma url externa ou uma rota válida;
     * - **Function**: pode-se customizar a ação. Para esta possilidade basta atribuir:
     * ```
     * <thf-page-change-password>
     *      [recovery]="this.myFunc.bind(this)";
     * </thf-page-change-password>
     * ```
     *
     * - **ThfPageChangePasswordRecovery**: cria-se vínculo automático com o template **thf-modal-password-recovery**.
     *   O objeto deve conter a **url** para requisição dos recursos e pode-se definir o **tipo** de modal para recuperação de senha,
     *   **email** para contato e **máscara** do campo de telefone.
     *
     * > Caso não tenha valor o link `Esqueceu a senha` desaparece.
     * @param {?} value
     * @return {?}
     */
    set recovery(value) {
        this._recovery = value;
        if (isTypeof(value, 'string')) {
            this.recoveryUrlType = isExternalLink(value) ? 'externalLink' : 'internalLink';
        }
    }
    /**
     * @return {?}
     */
    get recovery() {
        return this._recovery;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Lista de regras para criação e alteração de senha.
     * @param {?} value
     * @return {?}
     */
    set requirements(value) {
        this._requirements = value || [];
        this.showRequirements = this._requirements.length > 0;
    }
    /**
     * @return {?}
     */
    get requirements() {
        return this._requirements;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * URL para a ação do botão `Entrar no sistema` da modal de confirmação que aparece após salvar a senha ou se chamada pelo método
     * `openConfirmation`.
     *
     * \@default `/`
     * @param {?} value
     * @return {?}
     */
    set urlHome(value) {
        this._urlHome = value;
        this.modalAction.action = this.navigateTo.bind(this, this.urlHome);
    }
    /**
     * @return {?}
     */
    get urlHome() {
        return this._urlHome;
    }
}
ThfPageChangePasswordBaseComponent.propDecorators = {
    hideCurrentPassword: [{ type: Input, args: ['t-hide-current-password',] }],
    logo: [{ type: Input, args: ['t-logo',] }],
    recovery: [{ type: Input, args: ['t-recovery',] }],
    requirements: [{ type: Input, args: ['t-requirements',] }],
    secondaryLogo: [{ type: Input, args: ['t-secondary-logo',] }],
    token: [{ type: Input, args: ['t-token',] }],
    urlBack: [{ type: Input, args: ['t-url-back',] }],
    urlNewPassword: [{ type: Input, args: ['t-url-new-password',] }],
    urlHome: [{ type: Input, args: ['t-url-home',] }],
    submit: [{ type: Output, args: ['t-submit',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    ThfPageChangePasswordBaseComponent.prototype._hideCurrentPassword;
    /**
     * @type {?}
     * @private
     */
    ThfPageChangePasswordBaseComponent.prototype._recovery;
    /**
     * @type {?}
     * @private
     */
    ThfPageChangePasswordBaseComponent.prototype._requirements;
    /**
     * @type {?}
     * @private
     */
    ThfPageChangePasswordBaseComponent.prototype._urlHome;
    /**
     * @type {?}
     * @protected
     */
    ThfPageChangePasswordBaseComponent.prototype.validatorChange;
    /** @type {?} */
    ThfPageChangePasswordBaseComponent.prototype.confirmPassword;
    /** @type {?} */
    ThfPageChangePasswordBaseComponent.prototype.currentPassword;
    /** @type {?} */
    ThfPageChangePasswordBaseComponent.prototype.modalAction;
    /** @type {?} */
    ThfPageChangePasswordBaseComponent.prototype.newPassword;
    /** @type {?} */
    ThfPageChangePasswordBaseComponent.prototype.recoveryUrlType;
    /** @type {?} */
    ThfPageChangePasswordBaseComponent.prototype.showRequirements;
    /**
     * \@optional
     *
     * \@description
     *
     * Caminho para a logomarca localizada na parte superior.
     *
     * > Caso seja indefinida o espaço se mantém preservado porém vazio.
     * @type {?}
     */
    ThfPageChangePasswordBaseComponent.prototype.logo;
    /**
     * \@optional
     *
     * \@description
     *
     * Caminho para a logomarca localizada no rodapé.
     * @type {?}
     */
    ThfPageChangePasswordBaseComponent.prototype.secondaryLogo;
    /**
     * Token para solicitação de troca/recuperação de senha.
     *
     * > Esta propriedade será ignorada caso exista um token como parâmetro na URL inicial do template.
     * @type {?}
     */
    ThfPageChangePasswordBaseComponent.prototype.token;
    /**
     * \@optional
     *
     * \@description
     *
     * URL para a ação de retorno da página.
     *
     * > O botão `Voltar` aparece apenas para telas de alteração de senha, ou seja, só aparece se a propriedade `t-hide-current-password` for
     * falsa.
     *
     * \@default `/`
     * @type {?}
     */
    ThfPageChangePasswordBaseComponent.prototype.urlBack;
    /**
     * Endpoint usado pelo template para realizar um POST. Quando preenchido, o método `t-submit` será ignorado e o componente adquirirá
     * automatização para o processo de cadastro/troca de senha.
     *
     * ### Processo
     * Ao digitar um valor válido nos campos de senha e pressionar **salvar**,
     * o componente fará uma requisição `POST` na url especificada nesta propriedade passando o objeto contendo os valores definidos pelo
     * usuário.
     *
     * ```
     * body {
     *  token?: token,
     *  oldPassword?: oldPassword,
     *  newPassword: newPassword
     * }
     * ```
     *
     * O código de resposta HTTP de status esperado é `204`.
     *
     * Em caso de **sucesso**, será exibida a modal de confirmação de senha alterada.
     *
     * > O token será informado pela propriedade `t-token`do componente ou por um *query parameter* na URL do template.
     *
     * *Processo finalizado.*
     *
     * _______________
     *
     * #### Praticidade
     * As informações do serviço de autenticação também podem ser transmitidas diretamente pelas configuraçãos de rota e, desta maneira,
     * dispensa-se qualquer menção e/ou importação do componente `thf-page-change-password` no restante da aplicação. O exemplo abaixo
     * exemplifica a forma dinâmica com a qual o template de tela de troca de senha pode ser gerado ao navegar para rota `/change-password`, e
     * também como ele se comunica com o serviço para efetuação do processo de troca de senha do usuário e solicitação de nova senha.
     * Basta definir nas configurações de rota:
     *
     *
     * ```
     *   import { ThfModalPasswordRecoveryType, ThfPageChangePasswordComponent } from '\@totvs/thf-templates';
     *
     *   ...
     *   const routes: Routes = [
     *     {
     *       path: 'change-password', component: ThfPageChangePasswordComponent, data: {
     *         serviceApi: 'https://thf.totvs.com.br/sample/api/new-password',
     *         recovery: {
     *           url: 'https://thf.totvs.com.br/sample/api/users',
     *           type: ThfModalPasswordRecoveryType.All,
     *           contactMail: 'dev.totvs\@totvs.com',
     *           phoneMask: '9-999-999-9999'
     *         }
     *       }
     *     }
     *     ...
     *   ];
     *
     * \@NgModule({
     *     imports: [RouterModule.forRoot(routes)],
     *     exports: [RouterModule]
     *   })
     *   export class AppRoutingModule { }
     * ```
     *
     *
     * O metadado `serviceApi` deve ser a **url** para requisição dos recursos de troca de senha. E `recovery` é a interface
     * `ThfPageChangePasswordRecovery` responsável pelas especificações contidas na modal de recuperação de senha.
     *
     * > É essencial que siga a nomenclatura dos atributos exemplificados acima para sua efetiva funcionalidade.
     *
     * @type {?}
     */
    ThfPageChangePasswordBaseComponent.prototype.urlNewPassword;
    /**
     * \@optional
     *
     * \@description
     *
     * Função executada ao submeter o form pelo botão salvar.
     *
     * Caso definida essa função, a modal de confirmação não aparece, mas pode ser chamada pelo
     * método `openConfirmation`. Exemplo:
     *
     * ```
     * \@ViewChild(ThfPageChangePasswordComponent) changePassword: ThfPageChangePasswordComponent;
     *
     * onSubmit() {
     *  this.changePassword.openConfirmation();
     * }
     *
     * ```
     * > Esta propriedade será ignorada se for definido valor para a propriedade `t-url-new-password`.
     * @type {?}
     */
    ThfPageChangePasswordBaseComponent.prototype.submit;
    /**
     * @abstract
     * @param {?} url
     * @return {?}
     */
    ThfPageChangePasswordBaseComponent.prototype.navigateTo = function (url) { };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLXBhZ2UtY2hhbmdlLXBhc3N3b3JkLWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRvdHZzL3RoZi10ZW1wbGF0ZXMvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy90aGYtcGFnZS1jaGFuZ2UtcGFzc3dvcmQvdGhmLXBhZ2UtY2hhbmdlLXBhc3N3b3JkLWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFJNUQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUM5RSxNQUFNLE9BQWdCLGtDQUFrQztJQUF4RDtRQUVVLHlCQUFvQixHQUFZLEtBQUssQ0FBQztRQUV0QyxrQkFBYSxHQUE0QyxFQUFFLENBQUM7UUFDNUQsYUFBUSxHQUFXLEdBQUcsQ0FBQzs7Ozs7Ozs7Ozs7OztRQW9IVixZQUFPLEdBQVcsR0FBRyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7UUE4R3ZCLFdBQU0sR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztJQUlyRSxDQUFDOzs7Ozs7Ozs7Ozs7SUFuTkMsSUFBc0MsbUJBQW1CLENBQUMsS0FBYztRQUN0RSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdEQsQ0FBQzs7OztJQUVELElBQUksbUJBQW1CO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLG9CQUFvQixDQUFDO0lBQ25DLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBb0NELElBQXlCLFFBQVEsQ0FBQyxLQUF3RDtRQUN4RixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUV2QixJQUFJLFFBQVEsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEVBQUU7WUFDN0IsSUFBSSxDQUFDLGVBQWUsR0FBRyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDO1NBQ2hGO0lBQ0gsQ0FBQzs7OztJQUVELElBQUksUUFBUTtRQUNWLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QixDQUFDOzs7Ozs7Ozs7O0lBU0QsSUFBNkIsWUFBWSxDQUFDLEtBQThDO1FBQ3RGLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ3hELENBQUM7Ozs7SUFDRCxJQUFJLFlBQVk7UUFDZCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDNUIsQ0FBQzs7Ozs7Ozs7Ozs7OztJQWdIRCxJQUF5QixPQUFPLENBQUMsS0FBYTtRQUM1QyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUN0QixJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3JFLENBQUM7Ozs7SUFDRCxJQUFJLE9BQU87UUFDVCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQzs7O2tDQXpMQSxLQUFLLFNBQUMseUJBQXlCO21CQWlCL0IsS0FBSyxTQUFDLFFBQVE7dUJBeUJkLEtBQUssU0FBQyxZQUFZOzJCQW1CbEIsS0FBSyxTQUFDLGdCQUFnQjs0QkFldEIsS0FBSyxTQUFDLGtCQUFrQjtvQkFPeEIsS0FBSyxTQUFDLFNBQVM7c0JBY2YsS0FBSyxTQUFDLFlBQVk7NkJBc0VsQixLQUFLLFNBQUMsb0JBQW9CO3NCQVkxQixLQUFLLFNBQUMsWUFBWTtxQkE0QmxCLE1BQU0sU0FBQyxVQUFVOzs7Ozs7O0lBck9sQixrRUFBOEM7Ozs7O0lBQzlDLHVEQUFxRTs7Ozs7SUFDckUsMkRBQW9FOzs7OztJQUNwRSxzREFBK0I7Ozs7O0lBQy9CLDZEQUErQjs7SUFFL0IsNkRBQXdCOztJQUN4Qiw2REFBd0I7O0lBQ3hCLHlEQUE0Qjs7SUFDNUIseURBQW9COztJQUNwQiw2REFBd0I7O0lBQ3hCLDhEQUEwQjs7Ozs7Ozs7Ozs7SUE0QjFCLGtEQUErQjs7Ozs7Ozs7O0lBMkQvQiwyREFBa0Q7Ozs7Ozs7SUFPbEQsbURBQWlDOzs7Ozs7Ozs7Ozs7OztJQWNqQyxxREFBMkM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFzRTNDLDREQUFxRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQXdDckQsb0RBQW1FOzs7Ozs7SUFFbkUsNkVBQXVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFRoZk1vZGFsQWN0aW9uIH0gZnJvbSAnQHRvdHZzL3RoZi11aSc7XG5cbmltcG9ydCB7IGNvbnZlcnRUb0Jvb2xlYW4sIGlzRXh0ZXJuYWxMaW5rLCBpc1R5cGVvZiB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xuXG5pbXBvcnQgeyBUaGZQYWdlQ2hhbmdlUGFzc3dvcmRSZWNvdmVyeSB9IGZyb20gJy4vaW50ZXJmYWNlcy90aGYtcGFnZS1jaGFuZ2UtcGFzc3dvcmQtcmVjb3ZlcnkuaW50ZXJmYWNlJztcbmltcG9ydCB7IFRoZlBhZ2VDaGFuZ2VQYXNzd29yZFJlcXVpcmVtZW50IH0gZnJvbSAnLi9pbnRlcmZhY2VzL3RoZi1wYWdlLWNoYW5nZS1wYXNzd29yZC1yZXF1aXJlbWVudC5pbnRlcmZhY2UnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIE8gY29tcG9uZW50ZSBgdGhmLXBhZ2UtY2hhbmdlLXBhc3N3b3JkYCDDqSB1dGlsaXphZG8gY29tbyB0ZW1wbGF0ZSBwYXJhIHRlbGEgZGUgY2FkYXN0cm8gb3UgYWx0ZXJhw6fDo28gZGUgc2VuaGEuXG4gKlxuICogQXByZXNlbnRhIGRpY2FzIGUgcmVncmFzIHBhcmEgc2VuaGFzIG1haXMgc2VndXJhcyBlIHRhbWLDqW0gcG9zc2liaWxpZGFkZSBkZSBwZXJzb25hbGl6YXIgbyByZWRpcmVjaW9uYW1lbnRvIHBhcmEgYXMgdGVsYXNcbiAqICdlc3F1ZWNldSBhIHNlbmhhJywgJ3ZvbHRhcicgZSAnZW50cmFyIG5vIHNpc3RlbWEnLiBPcyB0ZXh0b3MgZGFzIHRlbGFzIHPDo28gcHLDqS1kZWZpbmlkb3MgZSBpbXV0w6F2ZWlzLlxuICpcbiAqIEEgcHJvcHJpZWRhZGUgYHQtdXJsLW5ldy1wYXNzd29yZGAgYXV0b21hdGl6YSBhIHJvdGluYSBkbyB0ZW1wbGF0ZSBlIHNpbXBsaWZpY2EgbyBwcm9jZXNzbyBkZSBjYWRhc3Ryby9hbHRlcmHDp8OjbyBkZSBzZW5oYSwgYmFzdGFuZG9cbiAqIGRlZmluaXIgdW1hIHVybCBwYXJhIFBPU1QgZGFzIGluZm9ybWHDp8O1ZXMgZGlnaXRhZGFzIHBlbG8gdXN1w6FyaW8uICBBIGZsZXhpYmlsaWRhZGUgZSBwcmF0aWNpZGFkZSBwb2RlbSBjaGVnYXIgYSB1bSBuw612ZWwgZW0gcXVlIG9cbiAqIGRlc2Vudm9sdmltZW50byBkYSBhcGxpY2HDp8OjbyBubyAqY2xpZW50IHNpZGUqIMOpIGRlc3Byb3ZpZGEgZGUgcXVhbHF1ZXIgY8OzZGlnby1mb250ZSByZWxhY2lvbmFkbyDDoCByb3RpbmEgZGUgY2FkYXN0cm8vYWx0ZXJhw6fDo28gZGUgc2VuaGEuXG4gKiBTZXUgZGV0YWxoYW1lbnRvIHBhcmEgdXNvIHBvZGUgc2VyIHZpc3RvIGxvZ28gYWJhaXhvIGVtICpwcm9wcmllZGFkZXMqLlxuICogQ2FzbyBqdWxndWUgbmVjZXNzw6FyaW8sIHBvZGUtc2UgdGFtYsOpbSBkZWZpbmlyIG1hbnVhbG1lbnRlIGEgcm90aW5hIGRvIGNvbXBvbmVudGUuXG4gKlxuICogUGFyYSBxdWUgYXMgaW1hZ2VucyBzZWphbSBleGliaWRhcyBjb3JyZXRhbWVudGUsIMOpIG5lY2Vzc8OhcmlvIGluY2x1aXIgbyBjYW1pbmhvIGRlbGFzIGFvIHByb2pldG8uIFBhcmEgaXNzbywgZWRpdGVcbiAqIG8gKmFzc2V0cyogbm8gYXJxdWl2byAqKmFuZ3VsYXIuanNvbioqIGRhIGFwbGljYcOnw6NvIG5hIHNlZ3VpbnRlIG9yZGVtOlxuICogYGBgXG4gKiAgIFwiYXNzZXRzXCI6IFtcbiAqICAgICBcInNyYy9hc3NldHNcIixcbiAqICAgICBcInNyYy9mYXZpY29uLmljb1wiLFxuICogICAgIHtcbiAqICAgICAgIFwiZ2xvYlwiOiBcIioqXFwvKlwiLFxuICogICAgICAgXCJpbnB1dFwiOiBcIm5vZGVfbW9kdWxlcy9AdG90dnMvdGhmLXRoZW1lL2ltYWdlc1wiLFxuICogICAgICAgXCJvdXRwdXRcIjogXCJhc3NldHMvaW1hZ2VzXCJcbiAqICAgICB9XG4gKiAgIF1cbiAqIGBgYFxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVGhmUGFnZUNoYW5nZVBhc3N3b3JkQmFzZUNvbXBvbmVudCB7XG5cbiAgcHJpdmF0ZSBfaGlkZUN1cnJlbnRQYXNzd29yZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9yZWNvdmVyeTogc3RyaW5nIHwgVGhmUGFnZUNoYW5nZVBhc3N3b3JkUmVjb3ZlcnkgfCBGdW5jdGlvbjtcbiAgcHJpdmF0ZSBfcmVxdWlyZW1lbnRzOiBBcnJheTxUaGZQYWdlQ2hhbmdlUGFzc3dvcmRSZXF1aXJlbWVudD4gPSBbXTtcbiAgcHJpdmF0ZSBfdXJsSG9tZTogc3RyaW5nID0gJy8nO1xuICBwcm90ZWN0ZWQgdmFsaWRhdG9yQ2hhbmdlOiBhbnk7XG5cbiAgY29uZmlybVBhc3N3b3JkOiBzdHJpbmc7XG4gIGN1cnJlbnRQYXNzd29yZDogc3RyaW5nO1xuICBtb2RhbEFjdGlvbjogVGhmTW9kYWxBY3Rpb247XG4gIG5ld1Bhc3N3b3JkOiBzdHJpbmc7XG4gIHJlY292ZXJ5VXJsVHlwZTogc3RyaW5nO1xuICBzaG93UmVxdWlyZW1lbnRzOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEVzY29uZGUgbyBjYW1wbyBgU2VuaGEgYXR1YWxgIHBhcmEgcXVlIG8gdGVtcGxhdGUgc2VqYSBwYXJhIGNyaWHDp8OjbyBkZSBzZW5oYS5cbiAgICpcbiAgICogQGRlZmF1bHQgYGZhbHNlYFxuICAgKi9cbiAgQElucHV0KCd0LWhpZGUtY3VycmVudC1wYXNzd29yZCcpIHNldCBoaWRlQ3VycmVudFBhc3N3b3JkKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5faGlkZUN1cnJlbnRQYXNzd29yZCA9IGNvbnZlcnRUb0Jvb2xlYW4odmFsdWUpO1xuICB9XG5cbiAgZ2V0IGhpZGVDdXJyZW50UGFzc3dvcmQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2hpZGVDdXJyZW50UGFzc3dvcmQ7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBDYW1pbmhvIHBhcmEgYSBsb2dvbWFyY2EgbG9jYWxpemFkYSBuYSBwYXJ0ZSBzdXBlcmlvci5cbiAgICpcbiAgICogPiBDYXNvIHNlamEgaW5kZWZpbmlkYSBvIGVzcGHDp28gc2UgbWFudMOpbSBwcmVzZXJ2YWRvIHBvcsOpbSB2YXppby5cbiAgICovXG4gIEBJbnB1dCgndC1sb2dvJykgbG9nbz86IHN0cmluZztcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBVUkwgcGFyYSBhIGHDp8OjbyBkbyBsaW5rIGBFc3F1ZWNldSBhIHNlbmhhYC5cbiAgICpcbiAgICogQSBwcm9wcmllZGFkZSBhY2VpdGEgb3Mgc2VndWludGVzIHRpcG9zOlxuICAgKlxuICAgKiAtICoqU3RyaW5nKio6IGluZm9ybWUgdW1hIHVybCBleHRlcm5hIG91IHVtYSByb3RhIHbDoWxpZGE7XG4gICAqIC0gKipGdW5jdGlvbioqOiBwb2RlLXNlIGN1c3RvbWl6YXIgYSBhw6fDo28uIFBhcmEgZXN0YSBwb3NzaWxpZGFkZSBiYXN0YSBhdHJpYnVpcjpcbiAgICogYGBgXG4gICAqIDx0aGYtcGFnZS1jaGFuZ2UtcGFzc3dvcmQ+XG4gICAqICAgICAgW3JlY292ZXJ5XT1cInRoaXMubXlGdW5jLmJpbmQodGhpcylcIjtcbiAgICogPC90aGYtcGFnZS1jaGFuZ2UtcGFzc3dvcmQ+XG4gICAqIGBgYFxuICAgKlxuICAgKiAtICoqVGhmUGFnZUNoYW5nZVBhc3N3b3JkUmVjb3ZlcnkqKjogY3JpYS1zZSB2w61uY3VsbyBhdXRvbcOhdGljbyBjb20gbyB0ZW1wbGF0ZSAqKnRoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeSoqLlxuICAgKiAgIE8gb2JqZXRvIGRldmUgY29udGVyIGEgKip1cmwqKiBwYXJhIHJlcXVpc2nDp8OjbyBkb3MgcmVjdXJzb3MgZSBwb2RlLXNlIGRlZmluaXIgbyAqKnRpcG8qKiBkZSBtb2RhbCBwYXJhIHJlY3VwZXJhw6fDo28gZGUgc2VuaGEsXG4gICAqICAgKiplbWFpbCoqIHBhcmEgY29udGF0byBlICoqbcOhc2NhcmEqKiBkbyBjYW1wbyBkZSB0ZWxlZm9uZS5cbiAgICpcbiAgICogPiBDYXNvIG7Do28gdGVuaGEgdmFsb3IgbyBsaW5rIGBFc3F1ZWNldSBhIHNlbmhhYCBkZXNhcGFyZWNlLlxuICAgKi9cbiAgQElucHV0KCd0LXJlY292ZXJ5Jykgc2V0IHJlY292ZXJ5KHZhbHVlOiBzdHJpbmcgfCBGdW5jdGlvbiB8IFRoZlBhZ2VDaGFuZ2VQYXNzd29yZFJlY292ZXJ5KSB7XG4gICAgdGhpcy5fcmVjb3ZlcnkgPSB2YWx1ZTtcblxuICAgIGlmIChpc1R5cGVvZih2YWx1ZSwgJ3N0cmluZycpKSB7XG4gICAgICB0aGlzLnJlY292ZXJ5VXJsVHlwZSA9IGlzRXh0ZXJuYWxMaW5rKHZhbHVlKSA/ICdleHRlcm5hbExpbmsnIDogJ2ludGVybmFsTGluayc7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHJlY292ZXJ5KCkge1xuICAgIHJldHVybiB0aGlzLl9yZWNvdmVyeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIExpc3RhIGRlIHJlZ3JhcyBwYXJhIGNyaWHDp8OjbyBlIGFsdGVyYcOnw6NvIGRlIHNlbmhhLlxuICAgKi9cbiAgQElucHV0KCd0LXJlcXVpcmVtZW50cycpIHNldCByZXF1aXJlbWVudHModmFsdWU6IEFycmF5PFRoZlBhZ2VDaGFuZ2VQYXNzd29yZFJlcXVpcmVtZW50Pikge1xuICAgIHRoaXMuX3JlcXVpcmVtZW50cyA9IHZhbHVlIHx8IFtdO1xuICAgIHRoaXMuc2hvd1JlcXVpcmVtZW50cyA9IHRoaXMuX3JlcXVpcmVtZW50cy5sZW5ndGggPiAwO1xuICB9XG4gIGdldCByZXF1aXJlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVpcmVtZW50cztcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIENhbWluaG8gcGFyYSBhIGxvZ29tYXJjYSBsb2NhbGl6YWRhIG5vIHJvZGFww6kuXG4gICAqL1xuICBASW5wdXQoJ3Qtc2Vjb25kYXJ5LWxvZ28nKSBzZWNvbmRhcnlMb2dvPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUb2tlbiBwYXJhIHNvbGljaXRhw6fDo28gZGUgdHJvY2EvcmVjdXBlcmHDp8OjbyBkZSBzZW5oYS5cbiAgICpcbiAgICogPiBFc3RhIHByb3ByaWVkYWRlIHNlcsOhIGlnbm9yYWRhIGNhc28gZXhpc3RhIHVtIHRva2VuIGNvbW8gcGFyw6JtZXRybyBuYSBVUkwgaW5pY2lhbCBkbyB0ZW1wbGF0ZS5cbiAgICovXG4gIEBJbnB1dCgndC10b2tlbicpIHRva2VuPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFVSTCBwYXJhIGEgYcOnw6NvIGRlIHJldG9ybm8gZGEgcMOhZ2luYS5cbiAgICpcbiAgICogPiBPIGJvdMOjbyBgVm9sdGFyYCBhcGFyZWNlIGFwZW5hcyBwYXJhIHRlbGFzIGRlIGFsdGVyYcOnw6NvIGRlIHNlbmhhLCBvdSBzZWphLCBzw7MgYXBhcmVjZSBzZSBhIHByb3ByaWVkYWRlIGB0LWhpZGUtY3VycmVudC1wYXNzd29yZGAgZm9yXG4gICAqIGZhbHNhLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgL2BcbiAgICovXG4gIEBJbnB1dCgndC11cmwtYmFjaycpIHVybEJhY2s6IHN0cmluZyA9ICcvJztcblxuICAvKipcbiAgICogRW5kcG9pbnQgdXNhZG8gcGVsbyB0ZW1wbGF0ZSBwYXJhIHJlYWxpemFyIHVtIFBPU1QuIFF1YW5kbyBwcmVlbmNoaWRvLCBvIG3DqXRvZG8gYHQtc3VibWl0YCBzZXLDoSBpZ25vcmFkbyBlIG8gY29tcG9uZW50ZSBhZHF1aXJpcsOhXG4gICAqIGF1dG9tYXRpemHDp8OjbyBwYXJhIG8gcHJvY2Vzc28gZGUgY2FkYXN0cm8vdHJvY2EgZGUgc2VuaGEuXG4gICAqXG4gICAqICMjIyBQcm9jZXNzb1xuICAgKiBBbyBkaWdpdGFyIHVtIHZhbG9yIHbDoWxpZG8gbm9zIGNhbXBvcyBkZSBzZW5oYSBlIHByZXNzaW9uYXIgKipzYWx2YXIqKixcbiAgICogbyBjb21wb25lbnRlIGZhcsOhIHVtYSByZXF1aXNpw6fDo28gYFBPU1RgIG5hIHVybCBlc3BlY2lmaWNhZGEgbmVzdGEgcHJvcHJpZWRhZGUgcGFzc2FuZG8gbyBvYmpldG8gY29udGVuZG8gb3MgdmFsb3JlcyBkZWZpbmlkb3MgcGVsb1xuICAgKiB1c3XDoXJpby5cbiAgICpcbiAgICogYGBgXG4gICAqIGJvZHkge1xuICAgKiAgdG9rZW4/OiB0b2tlbixcbiAgICogIG9sZFBhc3N3b3JkPzogb2xkUGFzc3dvcmQsXG4gICAqICBuZXdQYXNzd29yZDogbmV3UGFzc3dvcmRcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogTyBjw7NkaWdvIGRlIHJlc3Bvc3RhIEhUVFAgZGUgc3RhdHVzIGVzcGVyYWRvIMOpIGAyMDRgLlxuICAgKlxuICAgKiBFbSBjYXNvIGRlICoqc3VjZXNzbyoqLCBzZXLDoSBleGliaWRhIGEgbW9kYWwgZGUgY29uZmlybWHDp8OjbyBkZSBzZW5oYSBhbHRlcmFkYS5cbiAgICpcbiAgICogPiBPIHRva2VuIHNlcsOhIGluZm9ybWFkbyBwZWxhIHByb3ByaWVkYWRlIGB0LXRva2VuYGRvIGNvbXBvbmVudGUgb3UgcG9yIHVtICpxdWVyeSBwYXJhbWV0ZXIqIG5hIFVSTCBkbyB0ZW1wbGF0ZS5cbiAgICpcbiAgICogKlByb2Nlc3NvIGZpbmFsaXphZG8uKlxuICAgKlxuICAgKiBfX19fX19fX19fX19fX19cbiAgICpcbiAgICogIyMjIyBQcmF0aWNpZGFkZVxuICAgKiBBcyBpbmZvcm1hw6fDtWVzIGRvIHNlcnZpw6dvIGRlIGF1dGVudGljYcOnw6NvIHRhbWLDqW0gcG9kZW0gc2VyIHRyYW5zbWl0aWRhcyBkaXJldGFtZW50ZSBwZWxhcyBjb25maWd1cmHDp8Ojb3MgZGUgcm90YSBlLCBkZXN0YSBtYW5laXJhLFxuICAgKiBkaXNwZW5zYS1zZSBxdWFscXVlciBtZW7Dp8OjbyBlL291IGltcG9ydGHDp8OjbyBkbyBjb21wb25lbnRlIGB0aGYtcGFnZS1jaGFuZ2UtcGFzc3dvcmRgIG5vIHJlc3RhbnRlIGRhIGFwbGljYcOnw6NvLiBPIGV4ZW1wbG8gYWJhaXhvXG4gICAqIGV4ZW1wbGlmaWNhIGEgZm9ybWEgZGluw6JtaWNhIGNvbSBhIHF1YWwgbyB0ZW1wbGF0ZSBkZSB0ZWxhIGRlIHRyb2NhIGRlIHNlbmhhIHBvZGUgc2VyIGdlcmFkbyBhbyBuYXZlZ2FyIHBhcmEgcm90YSBgL2NoYW5nZS1wYXNzd29yZGAsIGVcbiAgICogdGFtYsOpbSBjb21vIGVsZSBzZSBjb211bmljYSBjb20gbyBzZXJ2acOnbyBwYXJhIGVmZXR1YcOnw6NvIGRvIHByb2Nlc3NvIGRlIHRyb2NhIGRlIHNlbmhhIGRvIHVzdcOhcmlvIGUgc29saWNpdGHDp8OjbyBkZSBub3ZhIHNlbmhhLlxuICAgKiBCYXN0YSBkZWZpbmlyIG5hcyBjb25maWd1cmHDp8O1ZXMgZGUgcm90YTpcbiAgICpcbiAgICpcbiAgICogYGBgXG4gICAqICAgaW1wb3J0IHsgVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZSwgVGhmUGFnZUNoYW5nZVBhc3N3b3JkQ29tcG9uZW50IH0gZnJvbSAnQHRvdHZzL3RoZi10ZW1wbGF0ZXMnO1xuICAgKlxuICAgKiAgIC4uLlxuICAgKiAgIGNvbnN0IHJvdXRlczogUm91dGVzID0gW1xuICAgKiAgICAge1xuICAgKiAgICAgICBwYXRoOiAnY2hhbmdlLXBhc3N3b3JkJywgY29tcG9uZW50OiBUaGZQYWdlQ2hhbmdlUGFzc3dvcmRDb21wb25lbnQsIGRhdGE6IHtcbiAgICogICAgICAgICBzZXJ2aWNlQXBpOiAnaHR0cHM6Ly90aGYudG90dnMuY29tLmJyL3NhbXBsZS9hcGkvbmV3LXBhc3N3b3JkJyxcbiAgICogICAgICAgICByZWNvdmVyeToge1xuICAgKiAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly90aGYudG90dnMuY29tLmJyL3NhbXBsZS9hcGkvdXNlcnMnLFxuICAgKiAgICAgICAgICAgdHlwZTogVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5BbGwsXG4gICAqICAgICAgICAgICBjb250YWN0TWFpbDogJ2Rldi50b3R2c0B0b3R2cy5jb20nLFxuICAgKiAgICAgICAgICAgcGhvbmVNYXNrOiAnOS05OTktOTk5LTk5OTknXG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9XG4gICAqICAgICB9XG4gICAqICAgICAuLi5cbiAgICogICBdO1xuICAgKlxuICAgKiAgIEBOZ01vZHVsZSh7XG4gICAqICAgICBpbXBvcnRzOiBbUm91dGVyTW9kdWxlLmZvclJvb3Qocm91dGVzKV0sXG4gICAqICAgICBleHBvcnRzOiBbUm91dGVyTW9kdWxlXVxuICAgKiAgIH0pXG4gICAqICAgZXhwb3J0IGNsYXNzIEFwcFJvdXRpbmdNb2R1bGUgeyB9XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiBPIG1ldGFkYWRvIGBzZXJ2aWNlQXBpYCBkZXZlIHNlciBhICoqdXJsKiogcGFyYSByZXF1aXNpw6fDo28gZG9zIHJlY3Vyc29zIGRlIHRyb2NhIGRlIHNlbmhhLiBFIGByZWNvdmVyeWAgw6kgYSBpbnRlcmZhY2VcbiAgICogYFRoZlBhZ2VDaGFuZ2VQYXNzd29yZFJlY292ZXJ5YCByZXNwb25zw6F2ZWwgcGVsYXMgZXNwZWNpZmljYcOnw7VlcyBjb250aWRhcyBuYSBtb2RhbCBkZSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhLlxuICAgKlxuICAgKiA+IMOJIGVzc2VuY2lhbCBxdWUgc2lnYSBhIG5vbWVuY2xhdHVyYSBkb3MgYXRyaWJ1dG9zIGV4ZW1wbGlmaWNhZG9zIGFjaW1hIHBhcmEgc3VhIGVmZXRpdmEgZnVuY2lvbmFsaWRhZGUuXG4gICAqXG4gICAqL1xuICBASW5wdXQoJ3QtdXJsLW5ldy1wYXNzd29yZCcpIHVybE5ld1Bhc3N3b3JkPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFVSTCBwYXJhIGEgYcOnw6NvIGRvIGJvdMOjbyBgRW50cmFyIG5vIHNpc3RlbWFgIGRhIG1vZGFsIGRlIGNvbmZpcm1hw6fDo28gcXVlIGFwYXJlY2UgYXDDs3Mgc2FsdmFyIGEgc2VuaGEgb3Ugc2UgY2hhbWFkYSBwZWxvIG3DqXRvZG9cbiAgICogYG9wZW5Db25maXJtYXRpb25gLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgL2BcbiAgICovXG4gIEBJbnB1dCgndC11cmwtaG9tZScpIHNldCB1cmxIb21lKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl91cmxIb21lID0gdmFsdWU7XG4gICAgdGhpcy5tb2RhbEFjdGlvbi5hY3Rpb24gPSB0aGlzLm5hdmlnYXRlVG8uYmluZCh0aGlzLCB0aGlzLnVybEhvbWUpO1xuICB9XG4gIGdldCB1cmxIb21lKCkge1xuICAgIHJldHVybiB0aGlzLl91cmxIb21lO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRnVuw6fDo28gZXhlY3V0YWRhIGFvIHN1Ym1ldGVyIG8gZm9ybSBwZWxvIGJvdMOjbyBzYWx2YXIuXG4gICAqXG4gICAqIENhc28gZGVmaW5pZGEgZXNzYSBmdW7Dp8OjbywgYSBtb2RhbCBkZSBjb25maXJtYcOnw6NvIG7Do28gYXBhcmVjZSwgbWFzIHBvZGUgc2VyIGNoYW1hZGEgcGVsb1xuICAgKiBtw6l0b2RvIGBvcGVuQ29uZmlybWF0aW9uYC4gRXhlbXBsbzpcbiAgICpcbiAgICogYGBgXG4gICAqIEBWaWV3Q2hpbGQoVGhmUGFnZUNoYW5nZVBhc3N3b3JkQ29tcG9uZW50KSBjaGFuZ2VQYXNzd29yZDogVGhmUGFnZUNoYW5nZVBhc3N3b3JkQ29tcG9uZW50O1xuICAgKlxuICAgKiBvblN1Ym1pdCgpIHtcbiAgICogIHRoaXMuY2hhbmdlUGFzc3dvcmQub3BlbkNvbmZpcm1hdGlvbigpO1xuICAgKiB9XG4gICAqXG4gICAqIGBgYFxuICAgKiA+IEVzdGEgcHJvcHJpZWRhZGUgc2Vyw6EgaWdub3JhZGEgc2UgZm9yIGRlZmluaWRvIHZhbG9yIHBhcmEgYSBwcm9wcmllZGFkZSBgdC11cmwtbmV3LXBhc3N3b3JkYC5cbiAgICovXG4gIEBPdXRwdXQoJ3Qtc3VibWl0Jykgc3VibWl0OiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBhYnN0cmFjdCBuYXZpZ2F0ZVRvKHVybDogc3RyaW5nKTogdm9pZDtcblxufVxuIl19