/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { EventEmitter, Input, Output } from '@angular/core';
import { browserLanguage, thfLocaleDefault } from '../../utils/util';
import { thfModalPasswordRecoveryLiterals } from './literals/i18n/thf-modal-password-recovery-literals';
import { ThfModalPasswordRecoveryType } from './enums/thf-modal-password-recovery-type.enum';
/** @type {?} */
const ThfModalPasswordRecoveryDefaultMaxLength = 15;
/** @type {?} */
const ThfModalPasswordRecoveryDefaultMinLength = 15;
/** @type {?} */
const ThfModalPasswordRecoveryDefaultPhone = '(99) 99999-9999';
/** @type {?} */
const ThfModalPasswordRecoveryTypeDefault = ThfModalPasswordRecoveryType.Email;
/**
 * \@description
 *
 * O componente `thf-modal-password-recovery` é utilizado como template para solicitação de troca de senha.
 *
 * É composto por uma modal que possui três telas, cada uma com as seguintes características:
 *
 * - A primeira possui campos para preenchimento de email ou número de telefone;
 * - Tela com campo para preenchimento de código SMS enviado para o número de telefone enviado;
 * - A terceira se trata de uma confirmação de envio de link para a caixa de email do usuário.
 *
 *
 * A propriedade `t-url-recovery` automatiza a rotina do componente e simplifica o processo
 * para recuperação de senha, bastando definir uma url para requisição dos recursos.
 * Seu detalhamento para uso pode ser visto logo abaixo em *propriedades*.
 * Caso julgue necessário, pode-se também definir manualmente a rotina do componente.
 *
 *
 * Para a modal de digitação de código SMS, é possível definir uma mensagem de erro
 * customizada com a propriedade `t-code-error` e há um link para
 * reenvio de código por SMS. Ao reenviar, o evento `t-code-submit` envia um objeto com o telefone do usuário e a quantidade
 * de vezes em que o usuário fez a solicitação de reenvio.
 *
 * > É indicada a utilização da tela de digitação para envio de código SMS apenas
 * se a opção por envio SMS for disponibilizada para o usuário.
 *
 *
 * A modal de confirmação contém uma ação de reenvio e o evento `t-submit`
 * é quem passa o objeto contendo o email em conjunto com a quantidade de tentativas de reenvio.
 *
 * > A tela de confirmação é indicada para quando o usuário solicitar a troca através do email.
 *
 * > Os textos das modals são pré-definidos, imutáveis e são traduzidos de acordo com o idioma do *browser* (pt, en e es)
 *
 * Para que as imagens sejam exibidas corretamente, é necessário incluir o caminho delas ao projeto. Para isso, edite
 * o *assets* no arquivo **angular.json** da aplicação na seguinte ordem:
 * ```
 *   "assets": [
 *     "src/assets",
 *     "src/favicon.ico",
 *     {
 *       "glob": "**\/*",
 *       "input": "node_modules/\@totvs/thf-theme/images",
 *       "output": "assets/images"
 *     }
 *   ]
 * ```
 * @abstract
 */
export class ThfModalPasswordRecoveryBaseComponent {
    constructor() {
        this._phoneMask = ThfModalPasswordRecoveryDefaultPhone;
        this._type = ThfModalPasswordRecoveryTypeDefault;
        this.maxLength = ThfModalPasswordRecoveryDefaultMaxLength;
        this.minLength = ThfModalPasswordRecoveryDefaultMinLength;
        this.literals = Object.assign({}, thfModalPasswordRecoveryLiterals[thfLocaleDefault], thfModalPasswordRecoveryLiterals[browserLanguage()]);
        /**
         * \@optional
         *
         * \@description
         *
         * Ação contendo como parâmetro o código enviado por SMS e digitado pelo usuário.
         *
         * > Esta propriedade será ignorada se for definido valor para a propriedade `t-url-recovery`.
         */
        this.codeSubmit = new EventEmitter();
        /**
         * \@optional
         *
         * \@description
         *
         * Ação contendo o email como parâmetro e que é executada quando o usuário clica sobres os botões de 'enviar' e 'reenviar' e-mail.
         *
         * > Esta propriedade será ignorada se for definido valor para a propriedade `t-url-recovery`.
         */
        this.submit = new EventEmitter();
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Definição do e-mail que é exibido na mensagem para contato de suporte.
     * @param {?} value
     * @return {?}
     */
    set contactEmail(value) {
        this._contactEmail = value;
        this.smsCodeErrorMessage = this.concatenateSMSErrorMessage(value);
    }
    /**
     * @return {?}
     */
    get contactEmail() {
        return this._contactEmail;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Definição da mascara do campo de telefone.
     *
     * \@default `(99) 99999-9999`
     * @param {?} value
     * @return {?}
     */
    set phoneMask(value) {
        this._phoneMask = value || ThfModalPasswordRecoveryDefaultPhone;
        this.minLength = this.maxLength = this._phoneMask.length;
    }
    /**
     * @return {?}
     */
    get phoneMask() {
        return this._phoneMask;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Define o tipo de recuperação de senha que será exibido.
     *
     * \@default `ThfModalPasswordRecoveryType.Email`
     *
     * @param {?} value
     * @return {?}
     */
    set type(value) {
        this._type = ((/** @type {?} */ (Object))).values(ThfModalPasswordRecoveryType).includes(value) ? value : ThfModalPasswordRecoveryTypeDefault;
    }
    /**
     * @return {?}
     */
    get type() {
        return this._type;
    }
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    concatenateSMSErrorMessage(value) {
        /** @type {?} */
        const literalCodeErrorMessage = this.literals.smsCodeErrorMessagePhrase;
        return value && value !== '' ? `${literalCodeErrorMessage} ${this.literals.prepositionIn} ${value}.` : literalCodeErrorMessage;
    }
}
ThfModalPasswordRecoveryBaseComponent.propDecorators = {
    contactEmail: [{ type: Input, args: ['t-contact-email',] }],
    codeError: [{ type: Input, args: ['t-code-error',] }],
    phoneMask: [{ type: Input, args: ['t-phone-mask',] }],
    type: [{ type: Input, args: ['t-type',] }],
    urlRecovery: [{ type: Input, args: ['t-url-recovery',] }],
    codeSubmit: [{ type: Output, args: ['t-code-submit',] }],
    submit: [{ type: Output, args: ['t-submit',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    ThfModalPasswordRecoveryBaseComponent.prototype._contactEmail;
    /**
     * @type {?}
     * @private
     */
    ThfModalPasswordRecoveryBaseComponent.prototype._phoneMask;
    /**
     * @type {?}
     * @private
     */
    ThfModalPasswordRecoveryBaseComponent.prototype._type;
    /** @type {?} */
    ThfModalPasswordRecoveryBaseComponent.prototype.email;
    /** @type {?} */
    ThfModalPasswordRecoveryBaseComponent.prototype.maxLength;
    /** @type {?} */
    ThfModalPasswordRecoveryBaseComponent.prototype.minLength;
    /** @type {?} */
    ThfModalPasswordRecoveryBaseComponent.prototype.modalPasswordRecoveryTypeAll;
    /** @type {?} */
    ThfModalPasswordRecoveryBaseComponent.prototype.phone;
    /** @type {?} */
    ThfModalPasswordRecoveryBaseComponent.prototype.smsCode;
    /** @type {?} */
    ThfModalPasswordRecoveryBaseComponent.prototype.smsCodeErrorMessage;
    /** @type {?} */
    ThfModalPasswordRecoveryBaseComponent.prototype.literals;
    /**
     * \@optional
     *
     * \@description
     *
     * Definição de mensagem de erro customizada para quando o usuário passar um código SMS inválido ou errado.
     * @type {?}
     */
    ThfModalPasswordRecoveryBaseComponent.prototype.codeError;
    /**
     * \@optional
     *
     * \@description
     *
     * Endpoint usado pelo template para requisição do recurso. Quando preenchido,
     * o métodos `t-submit` e `t-submit-code` serão ignorados e o componente adquirirá automatização
     * para o processo de solicitação de troca de senha.
     *
     * ### Processos
     * Ao digitar um valor válido no campo de email/telefone e pressionar **enviar**,
     * o componente fará uma requisição `POST` na url especificada nesta propriedade passando o objeto contendo o valor definido pelo usuário.
     *
     * ```
     * body {
     *  email: email,
     *  retry?: retry
     * }
     * ```
     *
     *
     * #### Recuperação por email
     * Para a recuperação de senha por **email**, o código de resposta HTTP de status esperado é `204`.
     *
     * Em caso de **sucesso**, será exibida a modal de confirmação de e-mail para o usuário.
     *
     *
     * > A ação **Reenviar** na tela de confirmação efetua uma nova requisição
     * passando-se o objeto com incremento para o valor da propriedade **retry**.
     *
     * *Processo finalizado.*
     *
     *
     * #### Recuperação por SMS
     * Se a opção de recuperação for por **SMS**, o código de status de sucesso deve ser `200`.
     * Em caso de **sucesso**, abre-se a modal de digitação de código SMS e a resposta
     * desta requisição deve retornar uma definição de dados abaixo:
     *
     * ```
     * 200:
     *  {
     *    hash: hash,
     *    urlValidationCode?: url
     *  }
     * ```
     *
     *
     * - O **hash** será o código de validação da solicitação do SMS para ser enviado juntamente com o código de verificação do SMS;
     * - **urlValidationCode** é a url usada para validação do código enviado por SMS.
     *
     *
     * > Caso não seja passado urlValidationCode, o endpoint usado para validação do código será `<t-url-recovery>/validation`.
     *
     *
     * #### Validação do código SMS
     * Ao digitar um valor válido no campo de código SMS e pressionar **continuar**, o componente fará uma requisição `POST` contendo:
     *
     * ```
     * POST /<t-url-recovery>/validation OU /<urlValidationCode>
     * Body {
     *  hash: hash,
     *  code: code
     * }
     * ```
     *
     *
     * O código de resposta HTTP de status esperado é `200`.
     *
     * Em caso de **erro** na validação do código SMS, a modal se mantém com o campo para digitação
     * de código SMS
     *
     *
     * > Pode-se atribuir a mensagem de erro (message) para o atributo `t-code-error` conforme retorno abaixo:
     *
     * ```
     * 400
     *  {
     *    error {
     *      message: 'Error Message'
     *    }
     *  }
     * ```
     *
     *
     * Em caso de **sucesso**, espera-se a resposta desta requisição retornando a seguinte definição:
     *
     * ```
     * 200:
     *  {
     *    token: token,
     *    urlChangePassword?: url
     *  }
     * ```
     *
     *
     * - **token**: Token de alteração de senha;
     * - **urlChangePassword**: url para o formulário de alteração de senha.
     *
     *
     * O componente está configurado para redirecionar para a url estabelecida em `urlChangePassword`.
     *
     * > Caso não seja passado valor para urlChangePassword,
     * a url usada para validação será a `<t-url-recovery>/changePassword?token=<token>`.
     *
     * *Processo finalizado.*
     * @type {?}
     */
    ThfModalPasswordRecoveryBaseComponent.prototype.urlRecovery;
    /**
     * \@optional
     *
     * \@description
     *
     * Ação contendo como parâmetro o código enviado por SMS e digitado pelo usuário.
     *
     * > Esta propriedade será ignorada se for definido valor para a propriedade `t-url-recovery`.
     * @type {?}
     */
    ThfModalPasswordRecoveryBaseComponent.prototype.codeSubmit;
    /**
     * \@optional
     *
     * \@description
     *
     * Ação contendo o email como parâmetro e que é executada quando o usuário clica sobres os botões de 'enviar' e 'reenviar' e-mail.
     *
     * > Esta propriedade será ignorada se for definido valor para a propriedade `t-url-recovery`.
     * @type {?}
     */
    ThfModalPasswordRecoveryBaseComponent.prototype.submit;
    /**
     * Acão para conclusão de processo e fechamento da modal. Indica-se sua utilização
     * para após o envio e validação do código SMS enviado pelo usuário.
     *
     * > Nas modals em que há a ação de 'cancelar' dispensa-se o uso desta ação pois o componente já trata o fechamento da modal.
     * @abstract
     * @return {?}
     */
    ThfModalPasswordRecoveryBaseComponent.prototype.completed = function () { };
    /**
     * Abre a modal de preenchimento de email ou número de telefone para solicitação de troca de senha.
     * @abstract
     * @return {?}
     */
    ThfModalPasswordRecoveryBaseComponent.prototype.open = function () { };
    /**
     * Abre a modal de confirmação de envio de email.
     * @abstract
     * @return {?}
     */
    ThfModalPasswordRecoveryBaseComponent.prototype.openConfirmation = function () { };
    /**
     * Abre a modal de preenchimento do código SMS enviado ao usuário.
     * @abstract
     * @return {?}
     */
    ThfModalPasswordRecoveryBaseComponent.prototype.openSmsCode = function () { };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRvdHZzL3RoZi10ZW1wbGF0ZXMvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy90aGYtbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnkvdGhmLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFNUQsT0FBTyxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBRXJFLE9BQU8sRUFBRSxnQ0FBZ0MsRUFBRSxNQUFNLHNEQUFzRCxDQUFDO0FBQ3hHLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLCtDQUErQyxDQUFDOztNQUV2Rix3Q0FBd0MsR0FBRyxFQUFFOztNQUM3Qyx3Q0FBd0MsR0FBRyxFQUFFOztNQUM3QyxvQ0FBb0MsR0FBRyxpQkFBaUI7O01BQ3hELG1DQUFtQyxHQUFpQyw0QkFBNEIsQ0FBQyxLQUFLOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtENUcsTUFBTSxPQUFnQixxQ0FBcUM7SUFBM0Q7UUFHVSxlQUFVLEdBQUcsb0NBQW9DLENBQUM7UUFDbEQsVUFBSyxHQUFpQyxtQ0FBbUMsQ0FBQztRQUdsRixjQUFTLEdBQUcsd0NBQXdDLENBQUM7UUFDckQsY0FBUyxHQUFHLHdDQUF3QyxDQUFDO1FBTXJELGFBQVEscUJBT0QsZ0NBQWdDLENBQUMsZ0JBQWdCLENBQUMsRUFDbEQsZ0NBQWdDLENBQUMsZUFBZSxFQUFFLENBQUMsRUFDdEQ7Ozs7Ozs7Ozs7UUFxTHFCLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOzs7Ozs7Ozs7O1FBVzFDLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO0lBK0J2RCxDQUFDOzs7Ozs7Ozs7O0lBdE5DLElBQThCLFlBQVksQ0FBQyxLQUFhO1FBQ3RELElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO1FBRTNCLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsMEJBQTBCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDcEUsQ0FBQzs7OztJQUVELElBQUksWUFBWTtRQUNkLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUM1QixDQUFDOzs7Ozs7Ozs7Ozs7SUFvQkQsSUFBMkIsU0FBUyxDQUFDLEtBQWE7UUFDaEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLElBQUksb0NBQW9DLENBQUM7UUFDaEUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDO0lBQzNELENBQUM7Ozs7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQzs7Ozs7Ozs7Ozs7OztJQVlELElBQXFCLElBQUksQ0FBQyxLQUFtQztRQUMzRCxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsbUJBQUssTUFBTSxFQUFBLENBQUMsQ0FBQyxNQUFNLENBQUMsNEJBQTRCLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsbUNBQW1DLENBQUM7SUFDaEksQ0FBQzs7OztJQUVELElBQUksSUFBSTtRQUNOLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDOzs7Ozs7SUEySk8sMEJBQTBCLENBQUMsS0FBYTs7Y0FDeEMsdUJBQXVCLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyx5QkFBeUI7UUFFdkUsT0FBTyxLQUFLLElBQUksS0FBSyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyx1QkFBdUIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsdUJBQXVCLENBQUM7SUFDakksQ0FBQzs7OzJCQXBOQSxLQUFLLFNBQUMsaUJBQWlCO3dCQWlCdkIsS0FBSyxTQUFDLGNBQWM7d0JBV3BCLEtBQUssU0FBQyxjQUFjO21CQW1CcEIsS0FBSyxTQUFDLFFBQVE7MEJBa0hkLEtBQUssU0FBQyxnQkFBZ0I7eUJBV3RCLE1BQU0sU0FBQyxlQUFlO3FCQVd0QixNQUFNLFNBQUMsVUFBVTs7Ozs7OztJQXJObEIsOERBQThCOzs7OztJQUM5QiwyREFBMEQ7Ozs7O0lBQzFELHNEQUFrRjs7SUFFbEYsc0RBQWM7O0lBQ2QsMERBQXFEOztJQUNyRCwwREFBcUQ7O0lBQ3JELDZFQUFzQzs7SUFDdEMsc0RBQWM7O0lBQ2Qsd0RBQWdCOztJQUNoQixvRUFBNEI7O0lBRTVCLHlEQVNJOzs7Ozs7Ozs7SUEwQkosMERBQXlDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFnSnpDLDREQUE4Qzs7Ozs7Ozs7Ozs7SUFXOUMsMkRBQThEOzs7Ozs7Ozs7OztJQVc5RCx1REFBcUQ7Ozs7Ozs7OztJQVFyRCw0RUFBMkI7Ozs7OztJQUszQix1RUFBc0I7Ozs7OztJQUt0QixtRkFBa0M7Ozs7OztJQUtsQyw4RUFBNkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgYnJvd3Nlckxhbmd1YWdlLCB0aGZMb2NhbGVEZWZhdWx0IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbCc7XG5cbmltcG9ydCB7IHRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeUxpdGVyYWxzIH0gZnJvbSAnLi9saXRlcmFscy9pMThuL3RoZi1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1saXRlcmFscyc7XG5pbXBvcnQgeyBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlIH0gZnJvbSAnLi9lbnVtcy90aGYtbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktdHlwZS5lbnVtJztcblxuY29uc3QgVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdE1heExlbmd0aCA9IDE1O1xuY29uc3QgVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdE1pbkxlbmd0aCA9IDE1O1xuY29uc3QgVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdFBob25lID0gJyg5OSkgOTk5OTktOTk5OSc7XG5jb25zdCBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlRGVmYXVsdDogVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZSA9IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuRW1haWw7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogTyBjb21wb25lbnRlIGB0aGYtbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnlgIMOpIHV0aWxpemFkbyBjb21vIHRlbXBsYXRlIHBhcmEgc29saWNpdGHDp8OjbyBkZSB0cm9jYSBkZSBzZW5oYS5cbiAqXG4gKiDDiSBjb21wb3N0byBwb3IgdW1hIG1vZGFsIHF1ZSBwb3NzdWkgdHLDqnMgdGVsYXMsIGNhZGEgdW1hIGNvbSBhcyBzZWd1aW50ZXMgY2FyYWN0ZXLDrXN0aWNhczpcbiAqXG4gKiAtIEEgcHJpbWVpcmEgcG9zc3VpIGNhbXBvcyBwYXJhIHByZWVuY2hpbWVudG8gZGUgZW1haWwgb3UgbsO6bWVybyBkZSB0ZWxlZm9uZTtcbiAqIC0gVGVsYSBjb20gY2FtcG8gcGFyYSBwcmVlbmNoaW1lbnRvIGRlIGPDs2RpZ28gU01TIGVudmlhZG8gcGFyYSBvIG7Dum1lcm8gZGUgdGVsZWZvbmUgZW52aWFkbztcbiAqIC0gQSB0ZXJjZWlyYSBzZSB0cmF0YSBkZSB1bWEgY29uZmlybWHDp8OjbyBkZSBlbnZpbyBkZSBsaW5rIHBhcmEgYSBjYWl4YSBkZSBlbWFpbCBkbyB1c3XDoXJpby5cbiAqXG4gKlxuICogQSBwcm9wcmllZGFkZSBgdC11cmwtcmVjb3ZlcnlgIGF1dG9tYXRpemEgYSByb3RpbmEgZG8gY29tcG9uZW50ZSBlIHNpbXBsaWZpY2EgbyBwcm9jZXNzb1xuICogcGFyYSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhLCBiYXN0YW5kbyBkZWZpbmlyIHVtYSB1cmwgcGFyYSByZXF1aXNpw6fDo28gZG9zIHJlY3Vyc29zLlxuICogU2V1IGRldGFsaGFtZW50byBwYXJhIHVzbyBwb2RlIHNlciB2aXN0byBsb2dvIGFiYWl4byBlbSAqcHJvcHJpZWRhZGVzKi5cbiAqIENhc28ganVsZ3VlIG5lY2Vzc8OhcmlvLCBwb2RlLXNlIHRhbWLDqW0gZGVmaW5pciBtYW51YWxtZW50ZSBhIHJvdGluYSBkbyBjb21wb25lbnRlLlxuICpcbiAqXG4gKiBQYXJhIGEgbW9kYWwgZGUgZGlnaXRhw6fDo28gZGUgY8OzZGlnbyBTTVMsIMOpIHBvc3PDrXZlbCBkZWZpbmlyIHVtYSBtZW5zYWdlbSBkZSBlcnJvXG4gKiBjdXN0b21pemFkYSBjb20gYSBwcm9wcmllZGFkZSBgdC1jb2RlLWVycm9yYCBlIGjDoSB1bSBsaW5rIHBhcmFcbiAqIHJlZW52aW8gZGUgY8OzZGlnbyBwb3IgU01TLiBBbyByZWVudmlhciwgbyBldmVudG8gYHQtY29kZS1zdWJtaXRgIGVudmlhIHVtIG9iamV0byBjb20gbyB0ZWxlZm9uZSBkbyB1c3XDoXJpbyBlIGEgcXVhbnRpZGFkZVxuICogZGUgdmV6ZXMgZW0gcXVlIG8gdXN1w6FyaW8gZmV6IGEgc29saWNpdGHDp8OjbyBkZSByZWVudmlvLlxuICpcbiAqID4gw4kgaW5kaWNhZGEgYSB1dGlsaXphw6fDo28gZGEgdGVsYSBkZSBkaWdpdGHDp8OjbyBwYXJhIGVudmlvIGRlIGPDs2RpZ28gU01TIGFwZW5hc1xuICogc2UgYSBvcMOnw6NvIHBvciBlbnZpbyBTTVMgZm9yIGRpc3BvbmliaWxpemFkYSBwYXJhIG8gdXN1w6FyaW8uXG4gKlxuICpcbiAqIEEgbW9kYWwgZGUgY29uZmlybWHDp8OjbyBjb250w6ltIHVtYSBhw6fDo28gZGUgcmVlbnZpbyBlIG8gZXZlbnRvIGB0LXN1Ym1pdGBcbiAqIMOpIHF1ZW0gcGFzc2EgbyBvYmpldG8gY29udGVuZG8gbyBlbWFpbCBlbSBjb25qdW50byBjb20gYSBxdWFudGlkYWRlIGRlIHRlbnRhdGl2YXMgZGUgcmVlbnZpby5cbiAqXG4gKiA+IEEgdGVsYSBkZSBjb25maXJtYcOnw6NvIMOpIGluZGljYWRhIHBhcmEgcXVhbmRvIG8gdXN1w6FyaW8gc29saWNpdGFyIGEgdHJvY2EgYXRyYXbDqXMgZG8gZW1haWwuXG4gKlxuICogPiBPcyB0ZXh0b3MgZGFzIG1vZGFscyBzw6NvIHByw6ktZGVmaW5pZG9zLCBpbXV0w6F2ZWlzIGUgc8OjbyB0cmFkdXppZG9zIGRlIGFjb3JkbyBjb20gbyBpZGlvbWEgZG8gKmJyb3dzZXIqIChwdCwgZW4gZSBlcylcbiAqXG4gKiBQYXJhIHF1ZSBhcyBpbWFnZW5zIHNlamFtIGV4aWJpZGFzIGNvcnJldGFtZW50ZSwgw6kgbmVjZXNzw6FyaW8gaW5jbHVpciBvIGNhbWluaG8gZGVsYXMgYW8gcHJvamV0by4gUGFyYSBpc3NvLCBlZGl0ZVxuICogbyAqYXNzZXRzKiBubyBhcnF1aXZvICoqYW5ndWxhci5qc29uKiogZGEgYXBsaWNhw6fDo28gbmEgc2VndWludGUgb3JkZW06XG4gKiBgYGBcbiAqICAgXCJhc3NldHNcIjogW1xuICogICAgIFwic3JjL2Fzc2V0c1wiLFxuICogICAgIFwic3JjL2Zhdmljb24uaWNvXCIsXG4gKiAgICAge1xuICogICAgICAgXCJnbG9iXCI6IFwiKipcXC8qXCIsXG4gKiAgICAgICBcImlucHV0XCI6IFwibm9kZV9tb2R1bGVzL0B0b3R2cy90aGYtdGhlbWUvaW1hZ2VzXCIsXG4gKiAgICAgICBcIm91dHB1dFwiOiBcImFzc2V0cy9pbWFnZXNcIlxuICogICAgIH1cbiAqICAgXVxuICogYGBgXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlCYXNlQ29tcG9uZW50IHtcblxuICBwcml2YXRlIF9jb250YWN0RW1haWw6IHN0cmluZztcbiAgcHJpdmF0ZSBfcGhvbmVNYXNrID0gVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdFBob25lO1xuICBwcml2YXRlIF90eXBlOiBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlID0gVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZURlZmF1bHQ7XG5cbiAgZW1haWw6IHN0cmluZztcbiAgbWF4TGVuZ3RoID0gVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdE1heExlbmd0aDtcbiAgbWluTGVuZ3RoID0gVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdE1pbkxlbmd0aDtcbiAgbW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZUFsbDogYm9vbGVhbjtcbiAgcGhvbmU6IHN0cmluZztcbiAgc21zQ29kZTogc3RyaW5nO1xuICBzbXNDb2RlRXJyb3JNZXNzYWdlOiBzdHJpbmc7XG5cbiAgbGl0ZXJhbHM6IHsgY2FuY2VsQnV0dG9uOiBzdHJpbmcsIGNsb3NlQnV0dG9uOiBzdHJpbmcsIGNvbnRpbnVlQnV0dG9uOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIGVtYWlsRXJyb3JNZXNzYWdlUGhyYXNlOiBzdHJpbmcsXG4gICAgZW1haWxTZW50Q29uZmlybWF0aW9uUGhyYXNlOiBzdHJpbmcsIGVtYWlsU2VudFRpdGxlOiBzdHJpbmcsIGZvcmdvdFBhc3N3b3JkVGl0bGU6IHN0cmluZyxcbiAgICBpbnNlcnRDb2RlOiBzdHJpbmcsIGluc2VydEVtYWlsOiBzdHJpbmcsIGluc2VydFBob25lOiBzdHJpbmcsIHBob25lRXJyb3JNZXNzYWdlUGhyYXNlOiBzdHJpbmcsXG4gICAgcHJlcG9zaXRpb25Jbjogc3RyaW5nLCBwcmVwb3NpdGlvbk9yOiBzdHJpbmcsIHJlY292ZXJ5UGFzc3dvcmRQaHJhc2U6IHN0cmluZywgcmVzZW5kRW1haWxCdXR0b246IHN0cmluZyxcbiAgICByZXNlbmRTbXNDb2RlUGhyYXNlOiBzdHJpbmcsIHNlbmRBZ2Fpbjogc3RyaW5nLCBzZW5kQnV0dG9uOiBzdHJpbmcsIHNtczogc3RyaW5nLCBzbXNDb2RlOiBzdHJpbmcsXG4gICAgc21zQ29kZUVycm9yTWVzc2FnZVBocmFzZTogc3RyaW5nLCBzZW50U21zQ29kZVBocmFzZTogc3RyaW5nLCBzdXBwb3J0Q29udGFjdDogc3RyaW5nLCB0ZWxlcGhvbmU6IHN0cmluZywgdHlwZUNvZGVUaXRsZTogc3RyaW5nIH0gPVxuICAgIHtcbiAgICAgIC4uLnRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeUxpdGVyYWxzW3RoZkxvY2FsZURlZmF1bHRdLFxuICAgICAgLi4udGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5TGl0ZXJhbHNbYnJvd3Nlckxhbmd1YWdlKCldLFxuICAgIH07XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5pw6fDo28gZG8gZS1tYWlsIHF1ZSDDqSBleGliaWRvIG5hIG1lbnNhZ2VtIHBhcmEgY29udGF0byBkZSBzdXBvcnRlLlxuICAgKi9cbiAgQElucHV0KCd0LWNvbnRhY3QtZW1haWwnKSBzZXQgY29udGFjdEVtYWlsKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9jb250YWN0RW1haWwgPSB2YWx1ZTtcblxuICAgIHRoaXMuc21zQ29kZUVycm9yTWVzc2FnZSA9IHRoaXMuY29uY2F0ZW5hdGVTTVNFcnJvck1lc3NhZ2UodmFsdWUpO1xuICB9XG5cbiAgZ2V0IGNvbnRhY3RFbWFpbCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGFjdEVtYWlsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5pw6fDo28gZGUgbWVuc2FnZW0gZGUgZXJybyBjdXN0b21pemFkYSBwYXJhIHF1YW5kbyBvIHVzdcOhcmlvIHBhc3NhciB1bSBjw7NkaWdvIFNNUyBpbnbDoWxpZG8gb3UgZXJyYWRvLlxuICAgKi9cbiAgQElucHV0KCd0LWNvZGUtZXJyb3InKSBjb2RlRXJyb3I6IHN0cmluZztcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmnDp8OjbyBkYSBtYXNjYXJhIGRvIGNhbXBvIGRlIHRlbGVmb25lLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgKDk5KSA5OTk5OS05OTk5YFxuICAgKi9cbiAgQElucHV0KCd0LXBob25lLW1hc2snKSBzZXQgcGhvbmVNYXNrKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9waG9uZU1hc2sgPSB2YWx1ZSB8fCBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlEZWZhdWx0UGhvbmU7XG4gICAgdGhpcy5taW5MZW5ndGggPSB0aGlzLm1heExlbmd0aCA9IHRoaXMuX3Bob25lTWFzay5sZW5ndGg7XG4gIH1cblxuICBnZXQgcGhvbmVNYXNrKCkge1xuICAgIHJldHVybiB0aGlzLl9waG9uZU1hc2s7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmUgbyB0aXBvIGRlIHJlY3VwZXJhw6fDo28gZGUgc2VuaGEgcXVlIHNlcsOhIGV4aWJpZG8uXG4gICAqXG4gICAqIEBkZWZhdWx0IGBUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLkVtYWlsYFxuICAgKlxuICAgKi9cbiAgQElucHV0KCd0LXR5cGUnKSBzZXQgdHlwZSh2YWx1ZTogVGhmTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZSkge1xuICAgIHRoaXMuX3R5cGUgPSAoPGFueT5PYmplY3QpLnZhbHVlcyhUaGZNb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlKS5pbmNsdWRlcyh2YWx1ZSkgPyB2YWx1ZSA6IFRoZk1vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGVEZWZhdWx0O1xuICB9XG5cbiAgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGU7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBFbmRwb2ludCB1c2FkbyBwZWxvIHRlbXBsYXRlIHBhcmEgcmVxdWlzacOnw6NvIGRvIHJlY3Vyc28uIFF1YW5kbyBwcmVlbmNoaWRvLFxuICAgKiBvIG3DqXRvZG9zIGB0LXN1Ym1pdGAgZSBgdC1zdWJtaXQtY29kZWAgc2Vyw6NvIGlnbm9yYWRvcyBlIG8gY29tcG9uZW50ZSBhZHF1aXJpcsOhIGF1dG9tYXRpemHDp8Ojb1xuICAgKiBwYXJhIG8gcHJvY2Vzc28gZGUgc29saWNpdGHDp8OjbyBkZSB0cm9jYSBkZSBzZW5oYS5cbiAgICpcbiAgICogIyMjIFByb2Nlc3Nvc1xuICAgKiBBbyBkaWdpdGFyIHVtIHZhbG9yIHbDoWxpZG8gbm8gY2FtcG8gZGUgZW1haWwvdGVsZWZvbmUgZSBwcmVzc2lvbmFyICoqZW52aWFyKiosXG4gICAqIG8gY29tcG9uZW50ZSBmYXLDoSB1bWEgcmVxdWlzacOnw6NvIGBQT1NUYCBuYSB1cmwgZXNwZWNpZmljYWRhIG5lc3RhIHByb3ByaWVkYWRlIHBhc3NhbmRvIG8gb2JqZXRvIGNvbnRlbmRvIG8gdmFsb3IgZGVmaW5pZG8gcGVsbyB1c3XDoXJpby5cbiAgICpcbiAgICogYGBgXG4gICAqIGJvZHkge1xuICAgKiAgZW1haWw6IGVtYWlsLFxuICAgKiAgcmV0cnk/OiByZXRyeVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiAjIyMjIFJlY3VwZXJhw6fDo28gcG9yIGVtYWlsXG4gICAqIFBhcmEgYSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhIHBvciAqKmVtYWlsKiosIG8gY8OzZGlnbyBkZSByZXNwb3N0YSBIVFRQIGRlIHN0YXR1cyBlc3BlcmFkbyDDqSBgMjA0YC5cbiAgICpcbiAgICogRW0gY2FzbyBkZSAqKnN1Y2Vzc28qKiwgc2Vyw6EgZXhpYmlkYSBhIG1vZGFsIGRlIGNvbmZpcm1hw6fDo28gZGUgZS1tYWlsIHBhcmEgbyB1c3XDoXJpby5cbiAgICpcbiAgICpcbiAgICogPiBBIGHDp8OjbyAqKlJlZW52aWFyKiogbmEgdGVsYSBkZSBjb25maXJtYcOnw6NvIGVmZXR1YSB1bWEgbm92YSByZXF1aXNpw6fDo29cbiAgICogcGFzc2FuZG8tc2UgbyBvYmpldG8gY29tIGluY3JlbWVudG8gcGFyYSBvIHZhbG9yIGRhIHByb3ByaWVkYWRlICoqcmV0cnkqKi5cbiAgICpcbiAgICogKlByb2Nlc3NvIGZpbmFsaXphZG8uKlxuICAgKlxuICAgKlxuICAgKiAjIyMjIFJlY3VwZXJhw6fDo28gcG9yIFNNU1xuICAgKiBTZSBhIG9ww6fDo28gZGUgcmVjdXBlcmHDp8OjbyBmb3IgcG9yICoqU01TKiosIG8gY8OzZGlnbyBkZSBzdGF0dXMgZGUgc3VjZXNzbyBkZXZlIHNlciBgMjAwYC5cbiAgICogRW0gY2FzbyBkZSAqKnN1Y2Vzc28qKiwgYWJyZS1zZSBhIG1vZGFsIGRlIGRpZ2l0YcOnw6NvIGRlIGPDs2RpZ28gU01TIGUgYSByZXNwb3N0YVxuICAgKiBkZXN0YSByZXF1aXNpw6fDo28gZGV2ZSByZXRvcm5hciB1bWEgZGVmaW5pw6fDo28gZGUgZGFkb3MgYWJhaXhvOlxuICAgKlxuICAgKiBgYGBcbiAgICogMjAwOlxuICAgKiAge1xuICAgKiAgICBoYXNoOiBoYXNoLFxuICAgKiAgICB1cmxWYWxpZGF0aW9uQ29kZT86IHVybFxuICAgKiAgfVxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogLSBPICoqaGFzaCoqIHNlcsOhIG8gY8OzZGlnbyBkZSB2YWxpZGHDp8OjbyBkYSBzb2xpY2l0YcOnw6NvIGRvIFNNUyBwYXJhIHNlciBlbnZpYWRvIGp1bnRhbWVudGUgY29tIG8gY8OzZGlnbyBkZSB2ZXJpZmljYcOnw6NvIGRvIFNNUztcbiAgICogLSAqKnVybFZhbGlkYXRpb25Db2RlKiogw6kgYSB1cmwgdXNhZGEgcGFyYSB2YWxpZGHDp8OjbyBkbyBjw7NkaWdvIGVudmlhZG8gcG9yIFNNUy5cbiAgICpcbiAgICpcbiAgICogPiBDYXNvIG7Do28gc2VqYSBwYXNzYWRvIHVybFZhbGlkYXRpb25Db2RlLCBvIGVuZHBvaW50IHVzYWRvIHBhcmEgdmFsaWRhw6fDo28gZG8gY8OzZGlnbyBzZXLDoSBgPHQtdXJsLXJlY292ZXJ5Pi92YWxpZGF0aW9uYC5cbiAgICpcbiAgICpcbiAgICogIyMjIyBWYWxpZGHDp8OjbyBkbyBjw7NkaWdvIFNNU1xuICAgKiBBbyBkaWdpdGFyIHVtIHZhbG9yIHbDoWxpZG8gbm8gY2FtcG8gZGUgY8OzZGlnbyBTTVMgZSBwcmVzc2lvbmFyICoqY29udGludWFyKiosIG8gY29tcG9uZW50ZSBmYXLDoSB1bWEgcmVxdWlzacOnw6NvIGBQT1NUYCBjb250ZW5kbzpcbiAgICpcbiAgICogYGBgXG4gICAqIFBPU1QgLzx0LXVybC1yZWNvdmVyeT4vdmFsaWRhdGlvbiBPVSAvPHVybFZhbGlkYXRpb25Db2RlPlxuICAgKiBCb2R5IHtcbiAgICogIGhhc2g6IGhhc2gsXG4gICAqICBjb2RlOiBjb2RlXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqXG4gICAqIE8gY8OzZGlnbyBkZSByZXNwb3N0YSBIVFRQIGRlIHN0YXR1cyBlc3BlcmFkbyDDqSBgMjAwYC5cbiAgICpcbiAgICogRW0gY2FzbyBkZSAqKmVycm8qKiBuYSB2YWxpZGHDp8OjbyBkbyBjw7NkaWdvIFNNUywgYSBtb2RhbCBzZSBtYW50w6ltIGNvbSBvIGNhbXBvIHBhcmEgZGlnaXRhw6fDo29cbiAgICogZGUgY8OzZGlnbyBTTVNcbiAgICpcbiAgICpcbiAgICogPiBQb2RlLXNlIGF0cmlidWlyIGEgbWVuc2FnZW0gZGUgZXJybyAobWVzc2FnZSkgcGFyYSBvIGF0cmlidXRvIGB0LWNvZGUtZXJyb3JgIGNvbmZvcm1lIHJldG9ybm8gYWJhaXhvOlxuICAgKlxuICAgKiBgYGBcbiAgICogNDAwXG4gICAqICB7XG4gICAqICAgIGVycm9yIHtcbiAgICogICAgICBtZXNzYWdlOiAnRXJyb3IgTWVzc2FnZSdcbiAgICogICAgfVxuICAgKiAgfVxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogRW0gY2FzbyBkZSAqKnN1Y2Vzc28qKiwgZXNwZXJhLXNlIGEgcmVzcG9zdGEgZGVzdGEgcmVxdWlzacOnw6NvIHJldG9ybmFuZG8gYSBzZWd1aW50ZSBkZWZpbmnDp8OjbzpcbiAgICpcbiAgICogYGBgXG4gICAqIDIwMDpcbiAgICogIHtcbiAgICogICAgdG9rZW46IHRva2VuLFxuICAgKiAgICB1cmxDaGFuZ2VQYXNzd29yZD86IHVybFxuICAgKiAgfVxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogLSAqKnRva2VuKio6IFRva2VuIGRlIGFsdGVyYcOnw6NvIGRlIHNlbmhhO1xuICAgKiAtICoqdXJsQ2hhbmdlUGFzc3dvcmQqKjogdXJsIHBhcmEgbyBmb3JtdWzDoXJpbyBkZSBhbHRlcmHDp8OjbyBkZSBzZW5oYS5cbiAgICpcbiAgICpcbiAgICogTyBjb21wb25lbnRlIGVzdMOhIGNvbmZpZ3VyYWRvIHBhcmEgcmVkaXJlY2lvbmFyIHBhcmEgYSB1cmwgZXN0YWJlbGVjaWRhIGVtIGB1cmxDaGFuZ2VQYXNzd29yZGAuXG4gICAqXG4gICAqID4gQ2FzbyBuw6NvIHNlamEgcGFzc2FkbyB2YWxvciBwYXJhIHVybENoYW5nZVBhc3N3b3JkLFxuICAgKiBhIHVybCB1c2FkYSBwYXJhIHZhbGlkYcOnw6NvIHNlcsOhIGEgYDx0LXVybC1yZWNvdmVyeT4vY2hhbmdlUGFzc3dvcmQ/dG9rZW49PHRva2VuPmAuXG4gICAqXG4gICAqICpQcm9jZXNzbyBmaW5hbGl6YWRvLipcbiAgICovXG4gIEBJbnB1dCgndC11cmwtcmVjb3ZlcnknKSB1cmxSZWNvdmVyeT86IHN0cmluZztcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBBw6fDo28gY29udGVuZG8gY29tbyBwYXLDom1ldHJvIG8gY8OzZGlnbyBlbnZpYWRvIHBvciBTTVMgZSBkaWdpdGFkbyBwZWxvIHVzdcOhcmlvLlxuICAgKlxuICAgKiA+IEVzdGEgcHJvcHJpZWRhZGUgc2Vyw6EgaWdub3JhZGEgc2UgZm9yIGRlZmluaWRvIHZhbG9yIHBhcmEgYSBwcm9wcmllZGFkZSBgdC11cmwtcmVjb3ZlcnlgLlxuICAgKi9cbiAgQE91dHB1dCgndC1jb2RlLXN1Ym1pdCcpIGNvZGVTdWJtaXQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBBw6fDo28gY29udGVuZG8gbyBlbWFpbCBjb21vIHBhcsOibWV0cm8gZSBxdWUgw6kgZXhlY3V0YWRhIHF1YW5kbyBvIHVzdcOhcmlvIGNsaWNhIHNvYnJlcyBvcyBib3TDtWVzIGRlICdlbnZpYXInIGUgJ3JlZW52aWFyJyBlLW1haWwuXG4gICAqXG4gICAqID4gRXN0YSBwcm9wcmllZGFkZSBzZXLDoSBpZ25vcmFkYSBzZSBmb3IgZGVmaW5pZG8gdmFsb3IgcGFyYSBhIHByb3ByaWVkYWRlIGB0LXVybC1yZWNvdmVyeWAuXG4gICAqL1xuICBAT3V0cHV0KCd0LXN1Ym1pdCcpIHN1Ym1pdCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBBY8OjbyBwYXJhIGNvbmNsdXPDo28gZGUgcHJvY2Vzc28gZSBmZWNoYW1lbnRvIGRhIG1vZGFsLiBJbmRpY2Etc2Ugc3VhIHV0aWxpemHDp8Ojb1xuICAgKiBwYXJhIGFww7NzIG8gZW52aW8gZSB2YWxpZGHDp8OjbyBkbyBjw7NkaWdvIFNNUyBlbnZpYWRvIHBlbG8gdXN1w6FyaW8uXG4gICAqXG4gICAqID4gTmFzIG1vZGFscyBlbSBxdWUgaMOhIGEgYcOnw6NvIGRlICdjYW5jZWxhcicgZGlzcGVuc2Etc2UgbyB1c28gZGVzdGEgYcOnw6NvIHBvaXMgbyBjb21wb25lbnRlIGrDoSB0cmF0YSBvIGZlY2hhbWVudG8gZGEgbW9kYWwuXG4gICAqL1xuICBhYnN0cmFjdCBjb21wbGV0ZWQoKTogdm9pZDtcblxuICAvKipcbiAgICogQWJyZSBhIG1vZGFsIGRlIHByZWVuY2hpbWVudG8gZGUgZW1haWwgb3UgbsO6bWVybyBkZSB0ZWxlZm9uZSBwYXJhIHNvbGljaXRhw6fDo28gZGUgdHJvY2EgZGUgc2VuaGEuXG4gICAqL1xuICBhYnN0cmFjdCBvcGVuKCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEFicmUgYSBtb2RhbCBkZSBjb25maXJtYcOnw6NvIGRlIGVudmlvIGRlIGVtYWlsLlxuICAgKi9cbiAgYWJzdHJhY3Qgb3BlbkNvbmZpcm1hdGlvbigpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBBYnJlIGEgbW9kYWwgZGUgcHJlZW5jaGltZW50byBkbyBjw7NkaWdvIFNNUyBlbnZpYWRvIGFvIHVzdcOhcmlvLlxuICAgKi9cbiAgYWJzdHJhY3Qgb3BlblNtc0NvZGUoKTogdm9pZDtcblxuICBwcml2YXRlIGNvbmNhdGVuYXRlU01TRXJyb3JNZXNzYWdlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICBjb25zdCBsaXRlcmFsQ29kZUVycm9yTWVzc2FnZSA9IHRoaXMubGl0ZXJhbHMuc21zQ29kZUVycm9yTWVzc2FnZVBocmFzZTtcblxuICAgIHJldHVybiB2YWx1ZSAmJiB2YWx1ZSAhPT0gJycgPyBgJHtsaXRlcmFsQ29kZUVycm9yTWVzc2FnZX0gJHt0aGlzLmxpdGVyYWxzLnByZXBvc2l0aW9uSW59ICR7dmFsdWV9LmAgOiBsaXRlcmFsQ29kZUVycm9yTWVzc2FnZTtcbiAgfVxuXG59XG4iXX0=