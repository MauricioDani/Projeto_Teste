/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { NgForm } from '@angular/forms';
import { isTypeof } from '../../../utils/util';
import { ThfPageJobSchedulerLookupService } from '../thf-page-job-scheduler-lookup.service';
import { ThfPageJobSchedulerService } from '../thf-page-job-scheduler.service';
export class ThfPageJobSchedulerExecutionComponent {
    /**
     * @param {?} thfPageJobSchedulerService
     * @param {?} thfPageJobSchedulerLookup
     */
    constructor(thfPageJobSchedulerService, thfPageJobSchedulerLookup) {
        this.thfPageJobSchedulerService = thfPageJobSchedulerService;
        this.thfPageJobSchedulerLookup = thfPageJobSchedulerLookup;
        this._value = {};
        this.dayPattern = '^(3[0-1]|[0-2][0-9]|[1-9]|0[1-9])$';
        this.existProcessAPI = true;
        this.minDateFirstExecution = new Date();
        this.periodicityOptions = [];
        this.timePattern = '^(2[0-3]|[01][0-9]):?([0-5][0-9])$';
        this.weekDays = [];
        this.isEdit = false;
        this.literals = (/** @type {?} */ ({}));
        this.changeProcess = new EventEmitter();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set value(value) {
        this._value = value && isTypeof(value, 'object') ? value : {};
    }
    /**
     * @return {?}
     */
    get value() {
        return this._value;
    }
    /**
     * @return {?}
     */
    get startDateFirstExecution() {
        return this.isEdit ? undefined : this.minDateFirstExecution;
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.subscribeProcessIdValueChanges();
        }));
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.periodicityTemplates = {
            daily: this.dailyTemplate,
            monthly: this.monthlyTemplate,
            weekly: this.weeklyTempalte
        };
        this.checkExistsProcessesAPI();
        this.periodicityOptions = this.getPeriodicityOptions();
        this.weekDays = this.getWeekDays();
    }
    /**
     * @private
     * @return {?}
     */
    checkExistsProcessesAPI() {
        this.thfPageJobSchedulerService.getHeadProcesses().subscribe(undefined, (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            this.existProcessAPI = false;
        }));
    }
    /**
     * @private
     * @return {?}
     */
    getPeriodicityOptions() {
        return [
            { label: this.literals.single, value: 'single' },
            { label: this.literals.daily, value: 'daily' },
            { label: this.literals.weekly, value: 'weekly' },
            { label: this.literals.monthly, value: 'monthly' }
        ];
    }
    /**
     * @private
     * @return {?}
     */
    getWeekDays() {
        return [
            { label: this.literals.sunday, value: 'Sunday' },
            { label: this.literals.monday, value: 'Monday' },
            { label: this.literals.tuesday, value: 'Tuesday' },
            { label: this.literals.wednesday, value: 'Wednesday' },
            { label: this.literals.thursday, value: 'Thursday' },
            { label: this.literals.friday, value: 'Friday' },
            { label: this.literals.saturday, value: 'Saturday' }
        ];
    }
    /**
     * @private
     * @return {?}
     */
    subscribeProcessIdValueChanges() {
        this.form.controls['processID'].valueChanges.subscribe((/**
         * @param {?} processId
         * @return {?}
         */
        processId => {
            this.changeProcess.emit({ processId, existAPI: this.existProcessAPI });
        }));
    }
}
ThfPageJobSchedulerExecutionComponent.decorators = [
    { type: Component, args: [{
                selector: 'thf-page-job-scheduler-execution',
                template: "<form #formExecution=\"ngForm\">\n  <div class=\"thf-row\">\n    <ng-container *ngIf=\"existProcessAPI; then lookupProcessesID; else inputProcessesID\"></ng-container>\n  </div>\n\n  <div class=\"thf-row\">\n    <thf-divider class=\"thf-md-12\" [t-label]=\"literals.firstExecution\"></thf-divider>\n\n    <thf-datepicker\n      class=\"thf-md-4\"\n      name=\"firstExecution\"\n      [(ngModel)]=\"value.firstExecution\"\n      t-placeholder=\"dd/mm/aaaa\"\n      t-required\n      [t-disabled]=\"isEdit\"\n      [t-label]=\"literals.day\"\n      [t-min-date]=\"startDateFirstExecution\">\n    </thf-datepicker>\n\n    <thf-input\n      class=\"thf-md-2\"\n      name=\"firstExecutionHour\"\n      [(ngModel)]=\"value.firstExecutionHour\"\n      t-mask=\"99:99\"\n      t-mask-format-model\n      t-placeholder=\"HH:mm\"\n      t-required\n      [t-disabled]=\"isEdit\"\n      [t-label]=\"literals.hour\"\n      [t-pattern]=\"timePattern\">\n    </thf-input>\n\n  </div>\n\n  <hr>\n\n  <div class=\"thf-row\">\n    <thf-radio-group\n      class=\"thf-sm-12\"\n      name=\"periodicity\"\n      [(ngModel)]=\"value.periodicity\"\n      t-columns=\"4\"\n      t-required\n      [t-label]=\"literals.periodicity\"\n      [t-options]=\"periodicityOptions\">\n    </thf-radio-group>\n\n    <ng-container *ngIf=\"value.periodicity !== 'single'\">\n      <thf-divider class=\"thf-md-12\" [t-label]=\"literals.periodicityData\">\n      </thf-divider>\n\n      <div class=\"thf-row\">\n        <ng-container *ngTemplateOutlet=\"periodicityTemplates[value.periodicity]\">\n        </ng-container>\n      </div>\n\n      <div class=\"thf-row\">\n        <thf-switch\n          class=\"thf-md-3\"\n          name=\"recurrent\"\n          [(ngModel)]=\"value.recurrent\"\n          [t-label]=\"literals.recurrent\"\n          [t-label-off]=\"literals.no\"\n          [t-label-on]=\"literals.yes\">\n        </thf-switch>\n      </div>\n    </ng-container>\n  </div>\n\n  <ng-template #lookupProcessesID>\n    <thf-lookup\n      class=\"thf-md-12\"\n      name=\"processID\"\n      [(ngModel)]=\"value.processID\"\n      t-field-label=\"description\"\n      t-field-value=\"processID\"\n      t-required\n      [t-disabled]=\"isEdit\"\n      [t-filter-service]=\"thfPageJobSchedulerLookup\"\n      [t-label]=\"literals.process\"\n      [t-placeholder]=\"literals.enterProcess\">\n    </thf-lookup>\n  </ng-template>\n\n  <ng-template #inputProcessesID>\n    <thf-input\n      class=\"thf-md-12\"\n      name=\"processID\"\n      [(ngModel)]=\"value.processID\"\n      t-required\n      [t-disabled]=\"isEdit\"\n      [t-label]=\"literals.process\"\n      [t-placeholder]=\"literals.enterProcess\">\n    </thf-input>\n  </ng-template>\n\n  <ng-template #dailyTemplate>\n    <ng-container *ngTemplateOutlet=\"inputHourTemplate\">\n    </ng-container>\n  </ng-template>\n\n  <ng-template #weeklyTemplate>\n    <div class=\"thf-row\">\n      <ng-container *ngTemplateOutlet=\"inputHourTemplate\">\n      </ng-container>\n    </div>\n\n    <thf-checkbox-group\n      class=\"thf-md-12\"\n      name=\"daysOfWeek\"\n      [(ngModel)]=\"value.daysOfWeek\"\n      t-columns=\"4\"\n      t-required\n      [t-label]=\"literals.weekDays\"\n      [t-options]=\"weekDays\">\n    </thf-checkbox-group>\n  </ng-template>\n\n  <ng-template #monthlyTemplate>\n    <thf-number\n      class=\"thf-md-3\"\n      name=\"dayOfMonth\"\n      [(ngModel)]=\"value.dayOfMonth\"\n      t-required\n      [t-error-pattern]=\"'Dia inv\u00E1lido'\"\n      [t-label]=\"literals.day\"\n      [t-max]=\"31\"\n      [t-pattern]=\"dayPattern\">\n    </thf-number>\n\n    <ng-container *ngTemplateOutlet=\"inputHourTemplate\">\n    </ng-container>\n  </ng-template>\n\n  <ng-template #inputHourTemplate>\n    <thf-input\n      class=\"thf-md-2\"\n      name=\"hour\"\n      [(ngModel)]=\"value.hour\"\n      t-mask=\"99:99\"\n      t-mask-format-model\n      t-placeholder=\"HH:mm\"\n      t-required\n      [t-label]=\"literals.hour\"\n      [t-pattern]=\"timePattern\">\n    </thf-input>\n  </ng-template>\n</form>\n"
            }] }
];
/** @nocollapse */
ThfPageJobSchedulerExecutionComponent.ctorParameters = () => [
    { type: ThfPageJobSchedulerService },
    { type: ThfPageJobSchedulerLookupService }
];
ThfPageJobSchedulerExecutionComponent.propDecorators = {
    form: [{ type: ViewChild, args: ['formExecution', { static: true },] }],
    dailyTemplate: [{ type: ViewChild, args: ['dailyTemplate', { static: true },] }],
    monthlyTemplate: [{ type: ViewChild, args: ['monthlyTemplate', { static: true },] }],
    weeklyTempalte: [{ type: ViewChild, args: ['weeklyTemplate', { static: true },] }],
    isEdit: [{ type: Input, args: ['t-is-edit',] }],
    literals: [{ type: Input, args: ['t-literals',] }],
    value: [{ type: Input, args: ['t-value',] }],
    changeProcess: [{ type: Output, args: ['t-change-process',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    ThfPageJobSchedulerExecutionComponent.prototype._value;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.dayPattern;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.existProcessAPI;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.minDateFirstExecution;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.periodicityOptions;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.periodicityTemplates;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.timePattern;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.weekDays;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.form;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.dailyTemplate;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.monthlyTemplate;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.weeklyTempalte;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.isEdit;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.literals;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.changeProcess;
    /**
     * @type {?}
     * @private
     */
    ThfPageJobSchedulerExecutionComponent.prototype.thfPageJobSchedulerService;
    /** @type {?} */
    ThfPageJobSchedulerExecutionComponent.prototype.thfPageJobSchedulerLookup;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhmLXBhZ2Utam9iLXNjaGVkdWxlci1leGVjdXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRvdHZzL3RoZi10ZW1wbGF0ZXMvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy90aGYtcGFnZS1qb2Itc2NoZWR1bGVyL3RoZi1wYWdlLWpvYi1zY2hlZHVsZXItZXhlY3V0aW9uL3RoZi1wYWdlLWpvYi1zY2hlZHVsZXItZXhlY3V0aW9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFpQixTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQWUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3RILE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUl4QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFL0MsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDNUYsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFNL0UsTUFBTSxPQUFPLHFDQUFxQzs7Ozs7SUFpQ2hELFlBQ1UsMEJBQXNELEVBQ3ZELHlCQUEyRDtRQUQxRCwrQkFBMEIsR0FBMUIsMEJBQTBCLENBQTRCO1FBQ3ZELDhCQUF5QixHQUF6Qix5QkFBeUIsQ0FBa0M7UUFqQzVELFdBQU0sR0FBUSxFQUFFLENBQUM7UUFFekIsZUFBVSxHQUFHLG9DQUFvQyxDQUFDO1FBQ2xELG9CQUFlLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLDBCQUFxQixHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7UUFDbkMsdUJBQWtCLEdBQStCLEVBQUUsQ0FBQztRQUVwRCxnQkFBVyxHQUFHLG9DQUFvQyxDQUFDO1FBQ25ELGFBQVEsR0FBa0MsRUFBRSxDQUFDO1FBU3pCLFdBQU0sR0FBWSxLQUFLLENBQUM7UUFFdkIsYUFBUSxHQUFHLG1CQUFN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c0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCwgVGVtcGxhdGVSZWYsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTmdGb3JtIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5pbXBvcnQgeyBUaGZDaGVja2JveEdyb3VwT3B0aW9uLCBUaGZSYWRpb0dyb3VwT3B0aW9uIH0gZnJvbSAnQHRvdHZzL3RoZi11aSc7XG5cbmltcG9ydCB7IGlzVHlwZW9mIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbCc7XG5cbmltcG9ydCB7IFRoZlBhZ2VKb2JTY2hlZHVsZXJMb29rdXBTZXJ2aWNlIH0gZnJvbSAnLi4vdGhmLXBhZ2Utam9iLXNjaGVkdWxlci1sb29rdXAuc2VydmljZSc7XG5pbXBvcnQgeyBUaGZQYWdlSm9iU2NoZWR1bGVyU2VydmljZSB9IGZyb20gJy4uL3RoZi1wYWdlLWpvYi1zY2hlZHVsZXIuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3RoZi1wYWdlLWpvYi1zY2hlZHVsZXItZXhlY3V0aW9uJyxcbiAgdGVtcGxhdGVVcmw6ICd0aGYtcGFnZS1qb2Itc2NoZWR1bGVyLWV4ZWN1dGlvbi5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgVGhmUGFnZUpvYlNjaGVkdWxlckV4ZWN1dGlvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XG5cbiAgcHJpdmF0ZSBfdmFsdWU6IGFueSA9IHt9O1xuXG4gIGRheVBhdHRlcm4gPSAnXigzWzAtMV18WzAtMl1bMC05XXxbMS05XXwwWzEtOV0pJCc7XG4gIGV4aXN0UHJvY2Vzc0FQSSA9IHRydWU7XG4gIG1pbkRhdGVGaXJzdEV4ZWN1dGlvbiA9IG5ldyBEYXRlKCk7XG4gIHBlcmlvZGljaXR5T3B0aW9uczogQXJyYXk8VGhmUmFkaW9Hcm91cE9wdGlvbj4gPSBbXTtcbiAgcGVyaW9kaWNpdHlUZW1wbGF0ZXM6IHsgZGFpbHk6IFRlbXBsYXRlUmVmPGFueT4sIHdlZWtseTogVGVtcGxhdGVSZWY8YW55PiwgbW9udGhseTogVGVtcGxhdGVSZWY8YW55PiB9IDtcbiAgdGltZVBhdHRlcm4gPSAnXigyWzAtM118WzAxXVswLTldKTo/KFswLTVdWzAtOV0pJCc7XG4gIHdlZWtEYXlzOiBBcnJheTxUaGZDaGVja2JveEdyb3VwT3B0aW9uPiA9IFtdO1xuXG4gIEBWaWV3Q2hpbGQoJ2Zvcm1FeGVjdXRpb24nLCB7IHN0YXRpYzogdHJ1ZSB9KSBmb3JtOiBOZ0Zvcm07XG5cbiAgLy8gdGVtcGxhdGVzXG4gIEBWaWV3Q2hpbGQoJ2RhaWx5VGVtcGxhdGUnLCB7IHN0YXRpYzogdHJ1ZSB9KSBkYWlseVRlbXBsYXRlO1xuICBAVmlld0NoaWxkKCdtb250aGx5VGVtcGxhdGUnLCB7IHN0YXRpYzogdHJ1ZSB9KSBtb250aGx5VGVtcGxhdGU7XG4gIEBWaWV3Q2hpbGQoJ3dlZWtseVRlbXBsYXRlJywgeyBzdGF0aWM6IHRydWUgfSkgd2Vla2x5VGVtcGFsdGU7XG5cbiAgQElucHV0KCd0LWlzLWVkaXQnKSBpc0VkaXQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBASW5wdXQoJ3QtbGl0ZXJhbHMnKSBsaXRlcmFscyA9IDxhbnk+IHt9O1xuXG4gIEBJbnB1dCgndC12YWx1ZScpIHNldCB2YWx1ZSh2YWx1ZTogYW55KSB7XG4gICAgdGhpcy5fdmFsdWUgPSB2YWx1ZSAmJiBpc1R5cGVvZih2YWx1ZSwgJ29iamVjdCcpID8gdmFsdWUgOiB7fTtcbiAgfVxuXG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cblxuICBAT3V0cHV0KCd0LWNoYW5nZS1wcm9jZXNzJykgY2hhbmdlUHJvY2VzczogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHRoZlBhZ2VKb2JTY2hlZHVsZXJTZXJ2aWNlOiBUaGZQYWdlSm9iU2NoZWR1bGVyU2VydmljZSxcbiAgICBwdWJsaWMgdGhmUGFnZUpvYlNjaGVkdWxlckxvb2t1cDogVGhmUGFnZUpvYlNjaGVkdWxlckxvb2t1cFNlcnZpY2UpIHsgfVxuXG4gIGdldCBzdGFydERhdGVGaXJzdEV4ZWN1dGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pc0VkaXQgPyB1bmRlZmluZWQgOiB0aGlzLm1pbkRhdGVGaXJzdEV4ZWN1dGlvbjtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5zdWJzY3JpYmVQcm9jZXNzSWRWYWx1ZUNoYW5nZXMoKTtcbiAgICB9KTtcblxuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5wZXJpb2RpY2l0eVRlbXBsYXRlcyA9IHtcbiAgICAgIGRhaWx5OiB0aGlzLmRhaWx5VGVtcGxhdGUsXG4gICAgICBtb250aGx5OiB0aGlzLm1vbnRobHlUZW1wbGF0ZSxcbiAgICAgIHdlZWtseTogdGhpcy53ZWVrbHlUZW1wYWx0ZVxuICAgIH07XG5cbiAgICB0aGlzLmNoZWNrRXhpc3RzUHJvY2Vzc2VzQVBJKCk7XG5cbiAgICB0aGlzLnBlcmlvZGljaXR5T3B0aW9ucyA9IHRoaXMuZ2V0UGVyaW9kaWNpdHlPcHRpb25zKCk7XG4gICAgdGhpcy53ZWVrRGF5cyA9IHRoaXMuZ2V0V2Vla0RheXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tFeGlzdHNQcm9jZXNzZXNBUEkoKSB7XG4gICAgdGhpcy50aGZQYWdlSm9iU2NoZWR1bGVyU2VydmljZS5nZXRIZWFkUHJvY2Vzc2VzKCkuc3Vic2NyaWJlKHVuZGVmaW5lZCwgZXJyb3IgPT4ge1xuICAgICAgdGhpcy5leGlzdFByb2Nlc3NBUEkgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UGVyaW9kaWNpdHlPcHRpb25zKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLnNpbmdsZSwgdmFsdWU6ICdzaW5nbGUnIH0sXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLmRhaWx5LCB2YWx1ZTogJ2RhaWx5JyB9LFxuICAgICAgeyBsYWJlbDogdGhpcy5saXRlcmFscy53ZWVrbHksIHZhbHVlOiAnd2Vla2x5JyB9LFxuICAgICAgeyBsYWJlbDogdGhpcy5saXRlcmFscy5tb250aGx5LCB2YWx1ZTogJ21vbnRobHknIH1cbiAgICBdO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRXZWVrRGF5cygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgeyBsYWJlbDogdGhpcy5saXRlcmFscy5zdW5kYXksIHZhbHVlOiAnU3VuZGF5JyB9LFxuICAgICAgeyBsYWJlbDogdGhpcy5saXRlcmFscy5tb25kYXksIHZhbHVlOiAnTW9uZGF5JyB9LFxuICAgICAgeyBsYWJlbDogdGhpcy5saXRlcmFscy50dWVzZGF5LCB2YWx1ZTogJ1R1ZXNkYXknIH0sXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLndlZG5lc2RheSwgdmFsdWU6ICdXZWRuZXNkYXknIH0sXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLnRodXJzZGF5LCB2YWx1ZTogJ1RodXJzZGF5JyB9LFxuICAgICAgeyBsYWJlbDogdGhpcy5saXRlcmFscy5mcmlkYXksIHZhbHVlOiAnRnJpZGF5JyB9LFxuICAgICAgeyBsYWJlbDogdGhpcy5saXRlcmFscy5zYXR1cmRheSwgdmFsdWU6ICdTYXR1cmRheScgfVxuICAgIF07XG4gIH1cblxuICBwcml2YXRlIHN1YnNjcmliZVByb2Nlc3NJZFZhbHVlQ2hhbmdlcygpIHtcbiAgICB0aGlzLmZvcm0uY29udHJvbHNbJ3Byb2Nlc3NJRCddLnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUocHJvY2Vzc0lkID0+IHtcbiAgICAgIHRoaXMuY2hhbmdlUHJvY2Vzcy5lbWl0KHsgcHJvY2Vzc0lkLCBleGlzdEFQSTogdGhpcy5leGlzdFByb2Nlc3NBUEkgfSk7XG4gICAgfSk7XG4gIH1cblxufVxuIl19